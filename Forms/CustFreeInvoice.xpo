Exportfile for AOT version 1.0 or later
Formatversion: 1

***Element: FRM

; 
; --------------------------------------------------------------------------------
FRMVERSION 12

FORM #CustFreeInvoice
  PROPERTIES
    Name                #CustFreeInvoice
    Origin              #{ECB19711-82CD-43EC-B196-3562C53898C5}
  ENDPROPERTIES
  
  METHODS
    SOURCE #classDeclaration
      #class FormRun extends ObjectRun
      #{
      #    #define.LedgerJournalTable_CustPaym('LedgerJournalTable_CustPaym')
      #    #define.FormOpenModeForNew('FormOpenModeForNew')
      #    RefRecId        custInvoiceTouched;
      #
      #    boolean         updateCurrencyCode;
      #    boolean         isUserTaskOwner;
      #    boolean         isUserApprovalOwner;
      #    boolean         postingEnable;
      #    boolean         deleteMarkupDistribution;
      #    boolean         deleteLineDistribution;
      #
      #    LogisticsLocationRecId          dlvLocationId;
      #    LogisticsLocationRecId          origDlvLocationId;
      #    LogisticsLocationRecId          postalAddressLocation;
      #    boolean                         recreateTax;
      #    ProjFundingSource               projFundingSource;
      #    DimensionDefaultingController   dimensionDefaultingControllerHeader;
      #    DimensionDefaultingController   dimensionDefaultingControllerLine;
      #
      #    LedgerDimensionDefaultAccountController linesDefaultAccountController;
      #
      #    CustParameters  custParameters;
      #    FormMode        formMode;
      #
      #    DialogButton    copyTaxGroupToMarkupTrans;
      #    DueDate         priorDueDate;
      #
      #    #isoCountryRegionCodes
      #    boolean         isUnrealizedVATEnabled;
      #    boolean         isCustInvoiceTableExtensionTHEnabled;
      #
      #    Map mapCustCustomFieldElements;
      #    boolean customFieldDialogOkClicked;
      #    boolean customFieldDialogOpen;
      #    boolean isBillingClassificationEnabled;
      #    CustCustomFieldInputDialog      customFieldDialog;
      #
      #    SysManagedCodeMgr       sysManagedCodeMgr;
      #    CustBillingCode         billingCodeLookup;
      #    CustBillingCodeVersion  custBillingCodeVersion;
      #    BillingCode             custInvoiceLineBillingCode;
      #    boolean         recreateWithholdTax;
      #
      #    SalesPurchOperationTypeController_BR    salesPurchOperationTypeController_BR;
      #    DialogButton                            copyTaxItemGroupToMarkupTrans;
      #    boolean countryRegion_EEU, countryRegion_LTLV;
      #    boolean isPolishCountryContext;
      #    RevisionNum_RU       lastRevisionNum;
      #    FactureDate_RU       lastRevisionDate;
      #
      #    #isoCountryRegionCodes
      #    QueryBuildRange         postedCriteria;
      #    boolean                 userAllowsPayments;
      #    boolean                 mcrCallCenterEnabled;
      #    boolean                 mcrGiftCardFreeTextInvoice;
      #
      #    // <GMY>
      #    boolean                                     isCustInvoiceTable_WEnabled;
      #    boolean                                     isCustInvoiceLine_WEnabled;
      #    boolean                                     isISOMY;
      #    boolean                                     isWrnOutMY;
      #    CustInvoiceJourLookupController_MY          custInvoiceJourLookupController;
      #    // </GMY>
      #}
      #
      #
      #
    ENDSOURCE
    SOURCE #allowedit
      #void allowedit()
      #{
      #    boolean countryRegion_RU = SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]);
      #    MCRCustPaymTotals custPaymTotals;
      #    boolean     isWorkflowApproved;
      #
      #    if (custInvoiceTable.isEditable())
      #    {
      #        element.allowEditCustBillingClassification();
      #
      #        // For gift card invoices do not allow creation.
      #        if(element.args().menuItemName()==menuitemDisplayStr(MCRGiftCardCustFreeInvoiceDetails))
      #        {
      #            custInvoiceTable_ds.allowCreate(false);
      #        }
      #        custInvoiceTable_ds.allowEdit(true);
      #
      #        custInvoiceLine_ds.allowEdit(true);
      #        custInvoiceLine_ds.allowCreate(true);
      #
      #        if (CustInvoiceTable::isInActiveWorkflow(custInvoiceTable.RecId))
      #        {
      #            custInvoiceTable_ds.allowDelete(false);
      #            custInvoiceLine_ds.allowDelete(false);
      #        }
      #        else
      #        {
      #            custInvoiceTable_ds.allowDelete(true);
      #            custInvoiceLine_ds.allowDelete(true);
      #        }
      #
      #        editButton.enabled(true);
      #        correction.enabled(false);
      #
      #        buttonCustPostInvoiceJob.enabled(true);
      #
      #        markupTrans.enabled(true);
      #        taxTransSource.enabled(true);
      #        subLedgerJournal.enabled(true);
      #
      #        if (countryRegion_RU)
      #        {
      #            buttonCustPostInvoice4PaymJob_RU.enabled(true);
      #        }
      #
      #        if (custInvoiceTable.PaymentSched)
      #        {
      #            buttonPaymentSched.enabled(true);
      #        }
      #        else
      #        {
      #            buttonPaymentSched.enabled(false);
      #            // (Multiple payments)
      #            // Allow the invoice account to be edited only if allowed to be changed for all payments (or if the free-text
      #            // invoice is new). Because changing the order account changes invoice account, the order account is also allowed
      #            // to be edited if the invoice account is allowed to be changed.
      #            if (mcrCallCenterEnabled
      #                && userAllowsPayments
      #                && custInvoiceTable)
      #            {
      #                custPaymTotals =
      #                    MCRCustPaymTotals::construct(custInvoiceTable.TableId,
      #                                                custInvoiceTable.RecId);
      #
      #                if (!custPaymTotals || custPaymTotals.allowEditInvoiceAccount())
      #                {
      #                    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, InvoiceAccount)).allowEdit(true);
      #                    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, OrderAccount)).allowEdit(true);
      #                }
      #                else
      #                {
      #                    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, InvoiceAccount)).allowEdit(false);
      #                    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, OrderAccount)).allowEdit(false);
      #                }
      #            }
      #        }
      #
      #        if (isConfigurationkeyEnabled(configurationKeyNum(FreeTextInvoiceCorrection))
      #        || BrazilParameters::isEnabled()
      #        )
      #        {
      #            // disabling fields if it is un-posted corrected invoice.
      #            if (custInvoiceTable.isCorrectedInvoice())
      #            {
      #               custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CurrencyCode)).allowEdit(false);
      #               custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, InvoiceAccount)).allowEdit(false);
      #               custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, OrderAccount)).allowEdit(false);
      #            }
      #            else
      #            {
      #               custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CurrencyCode)).allowEdit(true);
      #               custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, InvoiceAccount)).allowEdit(true);
      #               custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, OrderAccount)).allowEdit(true);
      #            }
      #        }
      #
      #        if (countryRegion_EEU)
      #        {
      #
      #            custFreeCreditNote_W.enabled(true);
      #        }
      #    }
      #    else
      #    {
      #        custInvoiceTable_ds.allowEdit(false);
      #        custInvoiceTable_ds.allowDelete(false);
      #
      #        custInvoiceLine_ds.allowCreate(false);
      #        custInvoiceLine_ds.allowEdit(false);
      #        custInvoiceLine_ds.allowDelete(false);
      #
      #        editButton.enabled(false);
      #        buttonCustPostInvoiceJob.enabled(false);
      #
      #        buttonPaymentSched.enabled(false);
      #        buttonCustPostInvoice4PaymJob_RU.enabled(false);
      #
      #        if (custInvoiceTable.SubLedgerJournalStatus == SubLedgerJournalStatus::Processing)
      #        {
      #            markupTrans.enabled(false);
      #            taxTransSource.enabled(false);
      #            subLedgerJournal.enabled(false);
      #        }
      #        else
      #        {
      #            markupTrans.enabled(true);
      #            taxTransSource.enabled(true);
      #            subLedgerJournal.enabled(true);
      #        }
      #
      #        if ((!CustRelatedInvoice::doesCorrectedInvoiceExist(custInvoiceTable.RecId) && custInvoiceTable.canCorrect()
      #            && !custInvoiceTable.isAlreadyCredited_W())
      #            || CustInterestAdjustmentHistory::doesAdjustedInvoiceExist(custInvoiceTable.RecId))
      #        {
      #            correction.enabled(true);
      #        }
      #        else
      #        {
      #            correction.enabled(false);
      #        }
      #
      #        if (countryRegion_EEU)
      #        {
      #            custFreeCreditNote_W.enabled(false);
      #        }
      #    }
      #    if (countryRegion_RU)
      #    {
      #       this.allowEdit_W();
      #    }
      #
      #    if (BrazilParameters::isEnabled())
      #    {
      #        this.allowEdit_BR();
      #    }
      #
      #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoCZ]))
      #    {
      #        correction.enabled(correction.enabled() &&
      #                            !CzCustAdvanceInvoiceTable::existsFreeTextInvoice(custInvoiceTable.RecId));
      #    }
      #
      #    if (custInvoiceTable.Log)
      #    {
      #        buttonErrorMessage.enabled(true);
      #    }
      #    else
      #    {
      #        buttonErrorMessage.enabled(false);
      #    }
      #
      #    if (custInvoiceTable.OneTimeCustomer || custInvoiceTable.OrderAccount)
      #    {
      #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, OneTimeCustomer)).skip(true);
      #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, OneTimeCustomer)).allowEdit(false);
      #    }
      #    else
      #    {
      #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, OneTimeCustomer)).skip(false);
      #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, OneTimeCustomer)).allowEdit(true);
      #    }
      #    if (custInvoiceTable.CashDiscCode == '')
      #    {
      #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CashDiscDate)).allowEdit(false);
      #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CashDiscDate)).skip(true);
      #    }
      #    else
      #    {
      #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CashDiscDate)).allowEdit(true);
      #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CashDiscDate)).skip(false);
      #    }
      #
      #    // (Multiple payments)
      #    // The Invoice ID is now generated the first time payments are submitted for authorization, rather than while posting
      #    // the invoice.  If the Invoice ID exists, do not allow the posting data to be edited.
      #    if (MCROrderParameters::isCallCenterEnabledAndInUse())
      #    {
      #        if (strLen(custInvoiceTable.InvoiceId) > 0)
      #        {
      #            custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, PostingProfile)).allowEdit(false);
      #            custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, PostingProfile)).skip(true);
      #
      #            custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, NumberSequenceGroup)).allowEdit(false);
      #            custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, NumberSequenceGroup)).skip(true);
      #        }
      #        else
      #        {
      #            custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, PostingProfile)).allowEdit(true);
      #            custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, PostingProfile)).skip(false);
      #
      #            custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, NumberSequenceGroup)).allowEdit(true);
      #            custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, NumberSequenceGroup)).skip(false);
      #        }
      #    }
      #
      #    eInvoice.visible(CustTable::isCustDKPublic(custInvoiceTable.InvoiceAccount));
      #    custInvoiceLine_EInvoiceAccountCode.visible(CustTable::isCustDKPublic(custInvoiceTable.InvoiceAccount));
      #
      #    buttonSetupPaymFormat.enabled(CustPaymModeTable::find(custInvoiceTable.PaymMode).ExportOnInvoice);
      #
      #    if (custInvoiceTable.isEditable() && custInvoiceTable.OrderAccount)
      #    {
      #        custOpenTransButton.enabled(true);
      #    }
      #    else
      #    {
      #        custOpenTransButton.enabled(false);
      #    }
      #
      #    deleteButton.enabled(!custInvoiceTable.Posted);
      #    if (custInvoiceTable.WorkflowApprovalStatus)
      #    {
      #        isWorkflowApproved  = (custInvoiceTable.WorkflowApprovalStatus != CustFreeInvoiceWFApprovalStatus::Approved)
      #                                && !CustInvoiceTable::isInActiveWorkflow(custInvoiceTable.RecId);
      #
      #        newInvoiceLine.enabled((!custInvoiceTable.Posted || !custInvoiceTable.RecId) && isWorkflowApproved);
      #        deleteInvoiceLine.enabled((!custInvoiceTable.Posted || !custInvoiceTable.RecId) && isWorkflowApproved);
      #    }
      #    else
      #    {
      #        newInvoiceLine.enabled(!custInvoiceTable.Posted || !custInvoiceTable.RecId);
      #        deleteInvoiceLine.enabled(!custInvoiceTable.Posted || !custInvoiceTable.RecId);
      #    }
      #
      #    groupFinancialDimensionLine.allowEdit(!custInvoiceTable.Posted || !custInvoiceTable.RecId);
      #
      #    CustDirectDebitMandate::defaultAndDisplayMandate(
      #        custInvoiceTable.InvoiceAccount,
      #        custInvoiceTable.PaymMode,
      #        custInvoiceTable.DirectDebitMandate,
      #        false,
      #        custInvoiceTable_ds,
      #        fieldNum(CustInvoiceTable, DirectDebitMandate));
      #}
    ENDSOURCE
    SOURCE #allowEdit_BR
      #void allowEdit_BR()
      #{
      #    if (custInvoiceTable.isEditable())
      #    {
      #        dropDialogCustFreeInvoiceCancel_BR.enabled(false);
      #    }
      #    else
      #    {
      #        if ((!CustRelatedInvoice::doesCorrectedInvoiceExist(custInvoiceTable.RecId) && custInvoiceTable.canCorrect())
      #            || CustInterestAdjustmentHistory::doesAdjustedInvoiceExist(custInvoiceTable.RecId))
      #        {
      #            dropDialogCustFreeInvoiceCancel_BR.enabled(true);
      #        }
      #        else if(!custInvoiceTable.hasCanceledRelatedInvoice_BR() && !custInvoiceTable.isCancelInvoice_BR())
      #        {
      #            correction.enabled(true);
      #            dropDialogCustFreeInvoiceCancel_BR.enabled(true);
      #        }
      #        else
      #        {
      #            dropDialogCustFreeInvoiceCancel_BR.enabled(false);
      #        }
      #    }
      #}
    ENDSOURCE
    SOURCE #allowEdit_LT
      #void allowEdit_LT()
      #{
      #    if (countryRegion_LTLV)
      #    {
      #        custInvoiceTable_DS.object(fieldNum(CustInvoiceTable,
      #                                            ManualNumbering_W)).allowEdit(!custInvoiceTable.ManualInvoiceID_W);
      #        custInvoiceTable_DS.object(fieldNum(CustInvoiceTable,
      #                                            DocNumberingCode_LT)).allowEdit(!custInvoiceTable.ManualInvoiceID_W &&
      #                                                                            custInvoiceTable.ManualNumbering_W);
      #        custInvoiceTable_DS.object(fieldNum(CustInvoiceTable,
      #                                            ManualInvoiceID_W)).allowEdit(!custInvoiceTable.ManualNumbering_W);
      #    }
      #}
    ENDSOURCE
    SOURCE #allowEdit_LV
      #void allowEdit_LV()
      #{
      #    if (countryRegion_LTLV)
      #    {
      #        custInvoiceTable_DS.object(fieldNum(CustInvoiceTable,
      #                                            ManualInvoiceID_W)).allowEdit(  custInvoiceTable.ManualNumbering_W &&
      #                                                                          ! custInvoiceTable.DocNumberingCode_LT);
      #    }
      #}
      #
    ENDSOURCE
    SOURCE #allowEdit_RU
      #void allowEdit_RU()
      #{
      #    boolean correctedFactureAllowEdit;
      #
      #    correctedFactureAllowEdit = buttonCustPostFactureFreeTxtJob_RU.enabled() && custInvoiceTable.Correct_RU;
      #
      #    buttonCustPostFactureFreeTxtJob_RU.enabled(!custInvoiceTable.custInvoiceJour().custInvoiceJour_RU().FacturedFully_RU);
      #    custInvoice4PaymJournal_RU.enabled(custInvoiceTable.existInvoice4Paym_RU());
      #    factureJournalCust_RU.enabled(custInvoiceTable.InvoiceId && custInvoiceTable.custInvoiceJour().factureJourSortedList_RU().len());
      #
      #    if (buttonCustPostFactureFreeTxtJob_RU.enabled() && custInvoiceTable.Posted)
      #    {
      #        custInvoiceTable_ds.allowEdit(true);
      #        allowEditFieldsOnFormDS_W(custInvoiceTable_ds, false);
      #        contactPersonName.allowEdit(false);
      #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CorrectedInvoiceId_RU)).allowEdit(false);
      #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CorrectedInvoiceDate_RU)).allowEdit(false);
      #    }
      #    else
      #    {
      #        allowEditFieldsOnFormDS_W(custInvoiceTable_ds, true);
      #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CorrectedInvoiceId_RU)).allowEdit(custInvoiceTable.Correct_RU);
      #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CorrectedInvoiceDate_RU)).allowEdit(custInvoiceTable.Correct_RU);
      #    }
      #
      #    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CorrectedFactureExternalId_RU)).allowEdit(correctedFactureAllowEdit);
      #    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CorrectedFactureDate_RU)).allowEdit(correctedFactureAllowEdit);
      #    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CorrectedPeriod_RU)).allowEdit(correctedFactureAllowEdit);
      #
      #    correctedLine_RU.visible(custInvoiceTable.Correct_RU);
      #}
    ENDSOURCE
    SOURCE #allowEdit_W
      #void allowEdit_W()
      #{
      #    this.allowEdit_LT();
      #
      #    this.allowEdit_LV();
      #    this.allowEdit_RU();
      #
      #    currency_M_displayExchRate.visible(custInvoiceTable.Posted || !custInvoiceTable.ExchRate_W);
      #
      #    currency_M_editExchRate_W.visible(!currency_M_displayExchRate.visible());
      #}
    ENDSOURCE
    SOURCE #allowEditCustBillingClassification
      #/// <summary>
      #/// Set the accessibility of <c>CustBillingClassification</c> field of the <c>CustInvoiceTable</c> table.
      #/// </summary>
      #void allowEditCustBillingClassification()
      #{
      #    if (isBillingClassificationEnabled)
      #    {
      #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable,CustBillingClassification)).allowEdit(
      #                                        !custInvoiceLine.existCustBillingCode(custInvoiceTable.RecId));
      #    }
      #}
    ENDSOURCE
    SOURCE #canClose
      #public boolean canClose()
      #{
      #    boolean ret;
      #
      #    ret = super();
      #
      #    if (ret && custInvoiceTable.Touched)
      #    {
      #        ret = custInvoiceTable.checkCreditLimit();
      #    }
      #
      #    return ret;
      #}
    ENDSOURCE
    SOURCE #canShowInputDialog
      #/// <summary>
      #/// Checks to see if there are any custom fields assoicated with the billing code
      #/// </summary>
      #/// <returns>
      #/// True if the dialog can be shown; otherwise false;
      #/// </returns>
      #public boolean canShowInputDialog()
      #{
      #    boolean canShow = false;
      #    CustBillingCodeCustomField  custBillingCodeCustomField;
      #
      #    custBillingCodeVersion = CustBillingCodeVersion::findByDate(custInvoiceLine.CustBillingCode, custInvoiceTable.InvoiceDate);
      #
      #    if (!customFieldDialogOpen)
      #    {
      #        select firstonly custBillingCodeCustomField
      #        where custBillingCodeCustomField.CustBillingCodeVersion == custBillingCodeVersion.RecId
      #              && custBillingCodeCustomField.IsActive == true;
      #
      #        if (!custBillingCodeCustomField.RecId)
      #        {
      #            select firstonly RecId, CustBillingCodeVersion from custBillingCodeCustomField
      #                where
      #                    custBillingCodeCustomField.CustBillingCodeVersion == custBillingCodeVersion.RecId;
      #
      #            if (custBillingCodeCustomField.RecId && custInvoiceTable.Posted)
      #            {
      #                canShow = true;
      #            }
      #        }
      #        else
      #        {
      #            canShow = true;
      #        }
      #
      #    }
      #    else
      #    {
      #        canShow = false;
      #    }
      #
      #
      #    return canShow;
      #}
    ENDSOURCE
    SOURCE #canSubmitToWorkflow
      #public boolean canSubmitToWorkflow()
      #{
      #    return custInvoiceTable.canSubmitToWorkflow();
      #}
    ENDSOURCE
    SOURCE #closeCustomFieldDialog
      #/// <summary>
      #/// This method is called by a <c>CustCustomFieldInputDialog</c> instance when it is closed.
      #/// </summary>
      #/// <param name="_mapCustomFieldElements">
      #/// A <c>Map</c> containg a list of <c>CustCustomFieldElement</c> instances.
      #/// </param>
      #/// <param name="_okClicked">
      #/// A true value if the ok button was clicked otherwise a false value.
      #/// </param>
      #/// <remarks>
      #/// This method resets all the defaults that were set by selecting a billing code if cancel is clicked and the billing code was empty.
      #/// </remarks>
      #public void closeCustomFieldDialog(Map _mapCustomFieldElements, boolean _okClicked)
      #{
      #    if (_okClicked && !custInvoiceTable.Posted)
      #    {
      #        mapCustCustomFieldElements = _mapCustomFieldElements;
      #        if (!_mapCustomFieldElements.empty())
      #        {
      #            custInvoiceLine_ds.forceWrite(true);
      #        }
      #    }
      #
      #    if (custInvoiceLine.orig().CustBillingCode != custInvoiceLine.CustBillingCode && !_okClicked)
      #    {
      #        custInvoiceLine.Description = custInvoiceLine.orig().Description;
      #        custInvoiceLine.TaxItemGroup = custInvoiceLine.orig().TaxItemGroup;
      #        custInvoiceLine.AmountDetails = custInvoiceLine.orig().AmountDetails;
      #        custInvoiceLine.InvoiceTxt = custInvoiceLine.orig().InvoiceTxt;
      #        custInvoiceLine.CustBillingCode = custInvoiceLine.orig().CustBillingCode;
      #        custInvoiceLine.BillingCode = custInvoiceLine.orig().BillingCode;
      #    }
      #    customFieldDialogOkClicked = _okClicked;
      #
      #    buttonCustomField.enabled(true);
      #}
    ENDSOURCE
    SOURCE #deleteTaxForDocumentHeader
      #/// <summary>
      #/// Deletes taxes if they need to be recreated.
      #/// </summary>
      #public void deleteTaxForDocumentHeader()
      #{
      #    CustFreeInvoiceCalcTotals custFreeInvoiceCalcTotals;
      #
      #    if (recreateTax)
      #    {
      #        TaxUncommitted::deleteForDocumentHeader(tableNum(CustInvoiceTable), custInvoiceTable.RecId);
      #
      #        if (countryRegion_EEU && deleteMarkupDistribution)
      #        {
      #            custFreeInvoiceCalcTotals = new CustFreeInvoiceCalcTotals(custInvoiceTable);
      #            custFreeInvoiceCalcTotals.calc();
      #
      #            deleteMarkupDistribution = false;
      #
      #            element.updateMarkupDistribution_W();
      #        }
      #    }
      #    if (TaxWithholdParameters_IN::checkTaxParameters())
      #    {
      #        element.deleteTaxWithholdForDocumentHeader_IN();
      #    }
      #}
    ENDSOURCE
    SOURCE #deleteTaxWithholdForDocumentHeader_IN
      #/// <summary>
      #/// Deletes taxes if they need to be recreated.
      #/// </summary>
      #public void deleteTaxWithholdForDocumentHeader_IN()
      #{
      #    if (recreateWithholdTax)
      #    {
      #        TaxWithholdUncommitted_IN::deleteForDocumentHeader(tableNum(CustInvoiceTable), custInvoiceTable.RecId);
      #    }
      #}
    ENDSOURCE
    SOURCE #dlvLocationId
      #/// <summary>
      #/// The loocation id of the delivery address.
      #/// </summary>
      #/// <param name="_set">
      #/// Indicates if caller is setting dlvLocationId.
      #/// </param>
      #/// <param name="_value">
      #/// The value to set dlvLocationId.
      #/// </param>
      #/// <returns>
      #/// The delivery location id
      #/// </returns>
      #/// <remarks>
      #/// The location id of the delivery address.
      #/// </remarks>
      #// BP deviation documented
      #edit LogisticsLocationRecId dlvLocationId(boolean _set, LogisticsLocationRecId _value)
      #{
      #    LogisticsPostalAddress          postalAddress;
      #
      #    #define.EmptyString("");
      #
      #    if (_set && dlvLocationId != _value)
      #    {
      #        dlvLocationId = _value;
      #
      #        select CountryRegionId, State, County, Address
      #            from postalAddress
      #            where postalAddress.Location == _value;
      #
      #        foreignTrade_dlvCountry.text(postalAddress.CountryRegionId);
      #        foreignTrade_dlvState.text(postalAddress.State);
      #        foreignTrade_dlvCounty.text(postalAddress.County);
      #        foreignTrade_dlvAddress.text(postalAddress.Address);
      #
      #        element.writeDeliveryInfo();
      #
      #        custInvoiceTable_ds.forceWrite(true);
      #        custInvoiceTable_ds.refresh();
      #    }
      #
      #    return dlvLocationId;
      #}
    ENDSOURCE
    SOURCE #enableCreditInvoicingButton
      #public void enableCreditInvoicingButton()
      #{
      #    CustInvoiceLine negativeCustInvioceLine;
      #
      #    if (CustVendCreditInvoicingTable::useCreditInvoicingReporting())
      #    {
      #        select firstonly RecId from negativeCustInvioceLine
      #            where  negativeCustInvioceLine.ParentRecId == custInvoiceTable.RecId
      #                && negativeCustInvioceLine.AmountCur < 0;
      #
      #        // Toggle header button
      #        setupCustVendCreditInvoicingAction.enabled(negativeCustInvioceLine.RecId);
      #        // Toggle line button
      #        cvSetupCustVendCreditInvoicingAction.enabled(custInvoiceLine.AmountCur < 0);
      #    }
      #}
    ENDSOURCE
    SOURCE #enableDisableExciseRecordType_IN
      #public void enableDisableExciseRecordType_IN()
      #{
      #    TaxParameters   taxParametersLoc = TaxParameters::find();
      #
      #    switch (custInvoiceLine.ExciseType_IN)
      #    {
      #        case ExciseType_IN::None:
      #             taxInformation_IN_ECCNumber.visible(taxParametersLoc.Excise_IN);
      #             taxInformation_IN_ManECCRegistrationNumberTable.visible(false);
      #             taxInformation_IN_TraderECCRegistrationNumberTable.visible(false);
      #             exciseNone_IN.visible(taxParametersLoc.Excise_IN);
      #             exciseManufacture_IN.visible(false);
      #             exciseTraders_IN.visible(false);
      #
      #             break;
      #
      #        case ExciseType_IN::Manufacturer:
      #             taxInformation_IN_ECCNumber.visible(false);
      #             taxInformation_IN_ManECCRegistrationNumberTable.visible(taxParametersLoc.Excise_IN);
      #             taxInformation_IN_TraderECCRegistrationNumberTable.visible(false);
      #             exciseManufacture_IN.visible(taxParametersLoc.Excise_IN);
      #             exciseNone_IN.visible(false);
      #             exciseTraders_IN.visible(false);
      #
      #             break;
      #
      #        case ExciseType_IN::Trader:
      #             taxInformation_IN_ECCNumber.visible(false);
      #             taxInformation_IN_ManECCRegistrationNumberTable.visible(false);
      #             taxInformation_IN_TraderECCRegistrationNumberTable.visible(taxParametersLoc.Excise_IN);
      #             exciseTraders_IN.visible(taxParametersLoc.Excise_IN);
      #             exciseNone_IN.visible(false);
      #             exciseManufacture_IN.visible(false);
      #
      #             break;
      #    }
      #}
    ENDSOURCE
    SOURCE #enableDistButtonBasedOnAmountCur
      #void enableDistButtonBasedOnAmountCur()
      #{
      #    if(str2num(custInvoiceLine_AmountCur.valueStr()) != 0)
      #    {
      #        accountingDistributionsLineButton.enabled(true);
      #    }
      #    else
      #    {
      #        accountingDistributionsLineButton.enabled(false);
      #    }
      #}
    ENDSOURCE
    SOURCE #enableLineChargeButtonByLedgerDimension
      #void enableLineChargeButtonByLedgerDimension()
      #{
      #    if (custInvoiceLine.LedgerDimension)
      #    {
      #        lineChargeButton.enabled(true);
      #    }
      #    else
      #    {
      #        lineChargeButton.enabled(false);
      #    }
      #}
    ENDSOURCE
    SOURCE #enableLineFiscalDocumentText_BR
      #void enableLineFiscalDocumentText_BR()
      #{
      #    lineFiscalDocumentText_BR.enabled(custInvoiceLine.RecId);
      #}
    ENDSOURCE
    SOURCE #executeBillingCodeScript
      #///<summary>
      #/// Executes the script associated with the billing code record.
      #///</summary>
      #public void executeBillingCodeScript()
      #{
      #    CustTable                   custTable;
      #    real                        amt;
      #    str                         amtDetails;
      #
      #    List                        recordsList;
      #
      #    CustInvoiceLineScriptBuffer custInvoiceLineScriptBuffer;
      #
      #    //ensure that billing code record is synced.
      #    this.syncBillingCodeLookup();
      #    if (!billingCodeLookup || !custBillingCodeVersion || custBillingCodeVersion.UseScript == UseRateScript::No)
      #    {
      #        return;
      #    }
      #
      #    sysManagedCodeMgr = SysManagedCodeMgr::construct(SysManagedCodeManagerType::CustBillingCodeManagedCodeManager);
      #    sysManagedCodeMgr.setImplementationTableBuffer(custBillingCodeVersion);
      #
      #    recordsList = new List(Types::Record);
      #    recordsList.addEnd(custInvoiceTable);
      #    delete_from custInvoiceLineScriptBuffer;
      #    custInvoiceLineScriptBuffer.insertFromCustInvoiceLine(custInvoiceLine);
      #    recordsList.addEnd(custInvoiceLineScriptBuffer);
      #
      #    select * from custTable
      #        where custTable.AccountNum == custInvoiceTable.OrderAccount;
      #    recordsList.addEnd(custTable);
      #    select * from custTable
      #        where custTable.AccountNum == custInvoiceTable.InvoiceAccount;
      #    recordsList.addEnd(custTable);
      #    sysManagedCodeMgr.setRecordsList(recordsList);
      #
      #    if (mapCustCustomFieldElements && !mapCustCustomFieldElements.empty())
      #    {
      #        sysManagedCodeMgr.setCustomFieldElementsMap(mapCustCustomFieldElements);
      #    }
      #
      #    sysManagedCodeMgr.executeManagedCode();
      #
      #    amt = Currency::amount(sysManagedCodeMgr.parmRealCalculatedValue());
      #    amtDetails = sysManagedCodeMgr.parmStrCalculatedValue();
      #
      #    custInvoiceLine.AmountDetails = amtDetails;
      #
      #    if ( custBillingCodeVersion.RateFieldSelector == RateField::UnitPrice )
      #    {
      #        custInvoiceLine.UnitPrice = amt;
      #        custInvoiceLine.calcLineAmount();
      #    }
      #    else if ( custBillingCodeVersion.RateFieldSelector == RateField::LineAmount )
      #    {
      #        custInvoiceLine.AmountCur = amt;
      #        custInvoiceLine.UnitPrice = 0;
      #    }
      #    custInvoiceLine_ds.refresh();
      #}
    ENDSOURCE
    SOURCE #getDeliveryInfo
      #/// <summary>
      #/// Fills internal delivery info.
      #/// </summary>
      #void getDeliveryInfo()
      #{
      #    LogisticsPostalAddress          postalAddress;
      #    #define.EmptyString("");
      #
      #    if (custInvoiceTable.DeliveryLocation)
      #    {
      #        dlvLocationId = custInvoiceTable.DeliveryLocation;
      #        origDlvLocationId = dlvLocationId;
      #
      #        select CountryRegionId, State, County, Address from postalAddress
      #        where postalAddress.Location == custInvoiceTable.DeliveryLocation;
      #
      #        foreignTrade_dlvCountry.text(postalAddress.CountryRegionId);
      #        foreignTrade_dlvState.text(postalAddress.State);
      #        foreignTrade_dlvCounty.text(postalAddress.County);
      #        foreignTrade_dlvAddress.text(postalAddress.Address);
      #    }
      #    else
      #    {
      #        dlvLocationId = 0;
      #        origDlvLocationId = 0;
      #        foreignTrade_dlvCountry.text(#EmptyString);
      #        foreignTrade_dlvState.text(#EmptyString);
      #        foreignTrade_dlvCounty.text(#EmptyString);
      #        foreignTrade_dlvAddress.text(#EmptyString);
      #    }
      #
      #    foreignTrade_dlvLocationId.update();
      #}
    ENDSOURCE
    SOURCE #init
      #void init()
      #{
      #    #ISOCountryRegionCodes
      #
      #    boolean isFrenchRegulatoryEnabled = PublicSectorUtils::isFrenchRegulatoryEnabled();
      #
      #    isBillingClassificationEnabled = CustParameters::isBillingClassificationEnabled();
      #    // <GMY>
      #    isCustInvoiceTable_WEnabled = SysExtensionSerializerExtensionMap::isExtensionEnabled(tableNum(CustInvoiceTable_W));
      #    isIsoMY = TaxGSTFeatureChecker_MY::isCountryRegionMY();
      #    // </GMY>
      #
      #    if (isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
      #    {
      #        mcrCallCenterEnabled = true;
      #
      #        if (element.args().menuItemName() == menuitemDisplayStr(MCRGiftCardCustFreeInvoiceDetails))
      #        {
      #            mcrGiftCardFreeTextInvoice = true;
      #        }
      #    }
      #
      #    super();
      #    FormSecurity::setFormDataSourceMaxAccessRight(this);
      #
      #    TaxVATNumTable::enableLookupVATNum(vatNum);
      #
      #    groupNotificationToTheCentralBank.visible(SysCountryRegionCode::isLegalEntityInCountryRegion([#isoNO]));
      #    if (!TaxParameters::find().CashDiscOnInvoice)
      #    {
      #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CashDiscPercent)).allowEdit(false);
      #    }
      #    this.initDesign_RU();
      #    this.initDesign_HU();
      #
      #    dimensionDefaultingControllerHeader = DimensionDefaultingController::constructInGroupWithValues(false, true, true, 0, this, groupFinancialDimensionHeader , "@SYS101181");
      #    dimensionDefaultingControllerHeader.parmAttributeValueSetDataSource(custInvoiceTable_ds, fieldStr(CustInvoiceTable, DefaultDimension));
      #
      #    DimensionDefaultingController::initContainerId(groupFinancialDimensionLine, 2);
      #    dimensionDefaultingControllerLine = DimensionDefaultingController::constructInGroupWithValues(false, true, true, 0, this, groupFinancialDimensionLine , "@SYS101181");
      #    dimensionDefaultingControllerLine.parmAttributeValueSetDataSource(custInvoiceLine_ds, fieldStr(CustInvoiceLine, DefaultDimension));
      #
      #    linesDefaultAccountController = LedgerDimensionDefaultAccountController::construct(custInvoiceLine_ds, fieldStr(CustInvoiceLine, LedgerDimension));
      #    linesDefaultAccountController.parmFilterLedgerPostingType(LedgerPostingType::CustRevenue);
      #    linesDefaultAccountController.parmControl(custInvoiceLine_LedgerAccount);
      #
      #    // Disable Invoice Correction for Spanish companies.
      #    adjustmentAction.visible(!SysCountryRegionCode::isLegalEntityInCountryRegion([#isoES]));
      #
      #    custParameters = CustParameters::find();
      #
      #    if (mcrCallCenterEnabled)
      #    {
      #        if (element.args().menuItemName() == menuitemDisplayStr(MCRGiftCardCustFreeInvoiceDetails))
      #        {
      #            element.design().caption("@MCR34113");
      #        }
      #
      #        userAllowsPayments = RetailMCRChannelTable::findForCurrentUser() ? true : false;
      #        mcrCustPaymTableButton.visible(userAllowsPayments);
      #        custInvoiceTable_MCRGetPaymStatus.visible(userAllowsPayments);
      #    }
      #
      #    // Needed to check validity of address
      #    logisticsPostalAddress_ds.addFieldToSelectionList(fieldNum(LogisticsPostalAddress, ValidFrom));
      #    logisticsPostalAddress_ds.addFieldToSelectionList(fieldNum(LogisticsPostalAddress, ValidTo));
      #
      #    cvInvoiceDetailsCFDTabPage_MX.visible(EInvoiceParameters_MX::isElectronicInvoiceEnabled());
      #
      #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIN]))
      #    {
      #        element.setVisible_IN();
      #        element.setTaxWithholdVisible_IN();
      #    }
      #
      #    salesPurchOperationTypeController_BR = new SalesPurchOperationTypeController_BR(this.name());
      #    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, FiscalEstablishment_BR)).mandatory(BrazilParameters::isEnabled());
      #    logisticsPostalAddress_ds.addFieldToSelectionList(fieldNum(LogisticsPostalAddress, CountryRegionId));
      #
      #    isUnrealizedVATEnabled = TaxThaiGovCertificationFeatureChecker::isUnrealizedVATEnabled();
      #    if (isUnrealizedVATEnabled)
      #    {
      #        this.updateDesign();
      #    }
      #    countryRegion_EEU = SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU,#isoPL,#isoHU,#isoCZ,#isoLT,#isoLV,#isoEE]);
      #    isPolishCountryContext = SysCountryRegionCode::isLegalEntityInCountryRegion([#isoPL]);
      #
      #    if (countryRegion_EEU)
      #    {
      #        editReasonCodeHeader.visible(true);
      #        editReasonCommentHeader.visible(true);
      #    }
      #
      #    countryRegion_LTLV = SysCountryRegionCode::isLegalEntityInCountryRegion([#isoLT,#isoLV]);
      #
      #    if (!CustParameters::isTaxIntegrationSystem_CN())
      #    {
      #        headVAT.visible(false);
      #        lineVAT.visible(false);
      #    }
      #
      #    // <GMY>
      #    if(isIsoMY)
      #    {
      #        custInvoiceJourLookupController = CustInvoiceJourLookupController_MY::construct();
      #        editReasonCodeHeader.visible(true);
      #        editReasonCommentHeader.visible(true);
      #    }
      #    // </GMY>
      #
      #    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CustBillingClassification)).visible(isBillingClassificationEnabled);
      #    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CustBillingClassification)).mandatory(isBillingClassificationEnabled);
      #    customFieldsButtons.visible(isBillingClassificationEnabled);
      #    custInvoiceLine_BillingCodeString.visible(isBillingClassificationEnabled);
      #    amountDetails.visible(isBillingClassificationEnabled);
      #
      #    directiveTabPage_PSN.visible(isFrenchRegulatoryEnabled);
      #    maintainTitre_PSN.visible(isFrenchRegulatoryEnabled);
      #
      #    cvSetupCustVendCreditInvoicingAction.visible(SysCountryRegionCode::isLegalEntityInCountryRegion([#isoES, #isoSE, #isoPL]));
      #}
      #
    ENDSOURCE
    SOURCE #initDesign_HU
      #void initDesign_HU()
      #{
      #    #ISOCountryRegionCodes
      #    custInvoiceTable_DS.object(fieldNum(CustInvoiceTable, VatDueDate_W)).mandatory(SysCountryRegionCode::isLegalEntityInCountryRegion([#isoHU]));
      #}
      #
    ENDSOURCE
    SOURCE #initDesign_RU
      #void initDesign_RU()
      #{
      #    #ISOCountryRegionCodes
      #
      #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([ #isoRU ]))
      #    {
      #        custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, Description)).mandatory(true);
      #
      #        buttonCustPostInvoice4PaymJob_RU.visible(true);
      #        buttonCustPostFactureFreeTxtJob_RU.visible(true);
      #    }
      #    else
      #    {
      #        buttonCustPostInvoice4PaymJob_RU.visible(false);
      #        buttonCustPostFactureFreeTxtJob_RU.visible(false);
      #    }
      #}
    ENDSOURCE
    SOURCE #lastRevisionDate_RU
      #//BP deviation documented
      #display FactureDate_RU lastRevisionDate_RU()
      #{
      #    return lastRevisionDate;
      #}
    ENDSOURCE
    SOURCE #lastRevisionNum_RU
      #//BP deviation documented
      #display RevisionNum_RU lastRevisionNum_RU()
      #{
      #    return lastRevisionNum;
      #}
    ENDSOURCE
    SOURCE #modifyDisposalAmount_PL
      #[SysObsoleteAttribute('This method is not used during the disposal process.', false)]
      #void modifyDisposalAmount_PL()
      #{
      #    if (isPolishCountryContext && custInvoiceLine.AssetId && custInvoiceLine.AssetBookId)
      #    {
      #        custInvoiceLine.AmountCur = AssetPostDisposal_Pl::getDisposalAmountBySaleFactor(
      #                custInvoiceLine.AssetId,
      #                custInvoiceLine.AssetBookId,
      #                custInvoiceTable.InvoiceDate,
      #                custInvoiceTable.CurrencyCode,
      #                custInvoiceLineAsset.AssetSaleFactor);
      #
      #        custInvoiceLine.Quantity = AssetTable::find(custInvoiceLine.AssetId).Quantity;
      #    }
      #}
    ENDSOURCE
    SOURCE #noteFormatEdit
      #/// <summary>
      #///     This method sets the fields <c>RefInvoiceId</c>, <c>RefInvoiceAmountCur</c> and <c>ReasonTableRef</c>
      #///     of table <c>CustInvoiceTable</c> editable or not.
      #/// </summary>
      #/// <remarks>
      #///     These fields is not editable only when the note format is <c>TaxUnrealizedSalesNoteFormat::None</c>.
      #/// </remarks>
      #public void noteFormatEdit()
      #{
      #    boolean     isNoneFormat;
      #
      #    isNoneFormat = (custInvoiceTableExtensionTH.NoteFormat == TaxUnrealizedSalesNoteFormat::None);
      #
      #    custInvoiceTableExtensionTH_ds.object(fieldNum(CustInvoiceTableExtensionTH, RefInvoiceId)).allowEdit(!isNoneFormat);
      #    custInvoiceTableExtensionTH_ds.object(fieldNum(CustInvoiceTableExtensionTH, RefInvoiceAmountCur)).allowEdit(!isNoneFormat);
      #    editReasonCodeForUnrealizedVAT.allowEdit(!isNoneFormat);
      #}
    ENDSOURCE
    SOURCE #parmCustomFieldDialog
      #public CustCustomFieldInputDialog parmCustomFieldDialog(CustCustomFieldInputDialog _customFieldDialog = customFieldDialog)
      #{
      #    customFieldDialog = _customFieldDialog;
      #
      #    return customFieldDialog;
      #}
    ENDSOURCE
    SOURCE #parmPostalAddressLocation
      #public LogisticsLocationRecId parmPostalAddressLocation(LogisticsLocationRecId _postalAddressLocation = custInvoiceTable.location())
      #{
      #    postalAddressLocation = _postalAddressLocation;
      #    return postalAddressLocation;
      #}
    ENDSOURCE
    SOURCE #performCustInvoiceJourLookup_MY
      #/// <summary>
      #/// Performs lookup for <c>CustInvoiceJour</c>
      #/// </summary>
      #/// <param name="_control">
      #/// The control to require lookup
      #/// </param>
      #/// <param name="_queryRange">
      #/// The range of query.
      #/// </param>
      #/// <param name="_custAccount">
      #/// The account of customer.
      #/// </param>
      #// <GMY>
      #public void performCustInvoiceJourLookup_MY(
      #    FormStringControl   _control,
      #    Range               _queryRange,
      #    CustAccount         _custAccount)
      #{
      #    custInvoiceJourLookupController.parmQueryRange(_queryRange);
      #    custInvoiceJourLookupController.parmCustAccount(_custAccount);
      #    custInvoiceJourLookupController.performLookup(_control);
      #}
      #// </GMY>
    ENDSOURCE
    SOURCE #recalculateClicked
      #/// <summary>
      #/// Calculates the line amount for the invoiceline which has a billing code associated.
      #/// </summary>
      #public void recalculateClicked()
      #{
      #    if (mapCustCustomFieldElements == null)
      #    {
      #        mapCustCustomFieldElements = CustCustomFieldElement::getCustomFieldValues(CustCustomFieldSourceType::CustInvoiceLine, custInvoiceLine);
      #        element.executeBillingCodeScript();
      #        mapCustCustomFieldElements = null;
      #    }
      #    else
      #    {
      #        element.executeBillingCodeScript();
      #    }
      #}
    ENDSOURCE
    SOURCE #refreshCustInvoiceLine_IN
      #void refreshCustInvoiceLine_IN()
      #{
      #    custInvoiceLine_ds.reread();
      #    custInvoiceLine_ds.refresh();
      #}
    ENDSOURCE
    SOURCE #rerunBillingCodeScripts
      #///<summary>
      #/// Re-executes the scripts associated with billing codes on all lines in invoice.
      #///</summary>
      #void rerunBillingCodeScripts()
      #{
      #    int pos;
      #    int counter = 1;
      #
      #    element.lockWindowUpdate(true);
      #    pos = custInvoiceLine_ds.getPosition();
      #    while(counter <= custInvoiceLine_ds.numberOfRowsLoaded())
      #    {
      #        custinvoiceLine_ds.setPosition(counter);
      #        this.executeBillingCodeScript();
      #        counter++;
      #    }
      #    element.lockWindowUpdate(false);
      #    custInvoiceLine_ds.setPosition(pos);
      #}
    ENDSOURCE
    SOURCE #run
      #public void run()
      #{
      #    CustTable   custTable;
      #
      #    Object callerForm = element.args().caller();
      #
      #    super();
      #
      #    if(element.args().menuItemName() == menuitemDisplayStr(CustFreeInvoiceNew))
      #    {
      #        if (element.args().record().TableId == tableNum(CustTable))
      #        {
      #            custTable = element.args().record();
      #            if (custTable)
      #            {
      #                custInvoiceTable.OrderAccount = custTable.AccountNum;
      #                custInvoiceTable.modifiedField(fieldNum(CustInvoiceTable, OrderAccount));
      #            }
      #        }
      #        cvHeader_OrderAccount.setFocus();
      #    }
      #
      #    if(element.args().formViewOption() == FormViewOption::Grid)
      #    {
      #        tabPageGrid.activatePage();
      #    }
      #}
    ENDSOURCE
    SOURCE #runMenuForViewCorrection
      #public void runMenuForViewCorrection(CustInvoiceTable _custInvoiceTable, MenuFunction _menuFunction)
      #{
      #    Args args = new Args(this);
      #
      #    _custInvoiceTable = _custInvoiceTable ? _custInvoiceTable : custInvoiceTable;
      #
      #    args.record(_custInvoiceTable);
      #    _menuFunction.run(args);
      #}
    ENDSOURCE
    SOURCE #setFieldAccess
      #public void setFieldAccess()
      #{
      #    boolean     isProjectSelected   = custInvoiceLine.ProjId ? true : false;
      #    int         countFundingSource  = ProjFundingSource::getFundingSourcesByCustomer(
      #                                        ProjTable::find(custInvoiceLine.ProjId).ProjInvoiceProjId, custInvoiceTable.OrderAccount).elements();
      #    CustBillingCodeVersion  custBillingCodeVersionLocal;
      #    boolean                 isAllowChangeAmount;
      #    boolean                 isAllowChangeLedgerAccount;
      #
      #    custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, ProjCategoryId)).mandatory(isProjectSelected);
      #    custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, ProjFundingSource)).mandatory(isProjectSelected);
      #
      #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)) && isProjectSelected)
      #    {
      #        if (!custParameters.ProjLedgerAllowEdit && custParameters.EnableProject)
      #        {
      #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, LedgerDimension)).allowEdit(false);
      #        }
      #        else
      #        {
      #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, LedgerDimension)).allowEdit(true);
      #        }
      #    }
      #    else
      #    {
      #        // Make Ledger account field editable based on project settings
      #        if (isProjectSelected && !custParameters.ProjLedgerAllowEdit && custParameters.EnableProject)
      #        {
      #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, LedgerDimension)).allowEdit(false);
      #        }
      #        else
      #        {
      #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, LedgerDimension)).allowEdit(true);
      #        }
      #    }
      #
      #
      #    // set the editable property of the Funding source
      #    custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, ProjFundingSource)).allowEdit(isProjectSelected && (countFundingSource > 1 || countFundingSource == 0));
      #
      #    if (CustInvoiceTable::isInActiveWorkflow(custInvoiceTable.RecId))
      #    {
      #        custInvoiceTable_ds.allowDelete(false);
      #        custInvoiceLine_ds.allowDelete(false);
      #    }
      #
      #    if (BrazilParameters::isEnabled())
      #    {
      #        custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, ServiceInvoice_BR)).allowEdit(custInvoiceLine.AssetId == '');
      #        custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, TaxServiceCode_BR)).allowEdit(custInvoiceLine.ServiceInvoice_BR);
      #    }
      #
      #    if (isBillingClassificationEnabled)
      #    {
      #        // Set editing of project fields based on selected billing code
      #        custBillingCodeVersionLocal = CustBillingCodeVersion::findByDate(custInvoiceLine.CustBillingCode, custInvoiceTable.InvoiceDate);
      #        if(custBillingCodeVersionLocal && custInvoiceLine.ProjId && custInvoiceLine.ProjCategoryId)
      #        {
      #            if (custBillingCodeVersionLocal.ProjId)
      #            {
      #                custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, ProjId)).allowEdit(custBillingCodeVersionLocal.ProjIdAllowChanges);
      #            }
      #
      #            if(custBillingCodeVersionLocal.ProjCategoryId)
      #            {
      #                custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, ProjCategoryId)).allowEdit(custBillingCodeVersionLocal.ProjCategoryAllowChanges );
      #            }
      #        }
      #        else
      #        {
      #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, ProjId)).allowEdit(true);
      #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, ProjCategoryId)).allowEdit(true);
      #        }
      #        if (isConfigurationkeyEnabled(configurationKeyNum(FreeTextInvoiceCorrection)))
      #        {
      #            // disabling fields if it is un-posted corrected invoice.
      #            if (custInvoiceTable.isCorrectedInvoice() && custInvoiceLine.CustBillingCode)
      #            {
      #                custBillingCodeVersionLocal = CustBillingCodeVersion::findByDate(custInvoiceLine.CustBillingCode, CustRelatedInvoice::findParentInvoiceForChild(custInvoiceTable.RecId).AdjustingInvoiceDate);
      #
      #                isAllowChangeAmount = (custBillingCodeVersionLocal && (custBillingCodeVersionLocal.AllowChangeAmount == NoYes::Yes));
      #                isAllowChangeLedgerAccount = (custBillingCodeVersionLocal && (custBillingCodeVersionLocal.AllowChangeLedgerAccount == NoYes::Yes));
      #
      #                // disabling/enabling fields if it is un-posted corrected invoice.
      #                custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, AmountCur)).allowEdit(isAllowChangeAmount);
      #                custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, AmountDetails)).allowEdit(isAllowChangeAmount);
      #                custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, UnitPrice)).allowEdit(isAllowChangeAmount);
      #                custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, LedgerDimension)).allowEdit(isAllowChangeLedgerAccount);
      #            }
      #        }
      #    }
      #
      #    element.setFieldsAccessAsset();
      #}
      #
      #
    ENDSOURCE
    SOURCE #setFieldsAccessAsset
      #public void setFieldsAccessAsset(boolean disableFields = false)
      #{
      #    boolean     isAssetInfoSelected;
      #
      #    if (isPolishCountryContext)
      #    {
      #        if (!disableFields)
      #        {
      #            isAssetInfoSelected = custInvoiceLine.AssetId && custInvoiceLine.AssetBookId;
      #        }
      #        custInvoiceLineAsset_ds.object(fieldNum(CustInvoiceLineAsset, AssetSaleFactor)).allowEdit(isAssetInfoSelected);
      #    }
      #}
      #
    ENDSOURCE
    SOURCE #setFieldsEditable
      #public void setFieldsEditable()
      #{
      #    address.enabled(custInvoiceTable.Posted == NoYes::No);
      #
      #    this.lockWindowUpdate(true);
      #    if (custInvoiceTable.InvoiceAccount)
      #    {
      #        actionPaneAddress.enabled(true);
      #        cvLinesFastTab.enabled(true);
      #        cvLineDetailsFastTab.enabled(true);
      #    }
      #    else
      #    {
      #        actionPaneAddress.enabled(false);
      #        cvLinesFastTab.enabled(false);
      #        cvLineDetailsFastTab.enabled(false);
      #    }
      #
      #    if (CustInvoiceTable::isInActiveWorkflow(custInvoiceTable.RecId))
      #    {
      #        deleteButton.enabled(false);
      #        deleteInvoiceLine.enabled(false);
      #    }
      #    if (TaxWithholdParameters_IN::checkTaxParameters())
      #    {
      #        element.setTaxWithholdEnabled_IN();
      #    }
      #    this.lockWindowUpdate(false);
      #}
      #
    ENDSOURCE
    SOURCE #setFieldsEditableForDirective
      #/// <summary>
      #/// Disables the Directive tab if the DirectiveId has not been assigned in a public sector France context.
      #/// </summary>
      #void setFieldsEditableForDirective()
      #{
      #    if (CustVendDirective_PSN::isContextPublicSectorFrance())
      #    {
      #        directiveTabPage_PSN.allowEdit(custDirective_PSN.CustDirectiveId != '');
      #    }
      #}
      #
    ENDSOURCE
    SOURCE #setTaxWithholdEnabled_IN
      #void setTaxWithholdEnabled_IN()
      #{
      #    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, tdsGroup_IN)).enabled(!custInvoiceTable.tcsGroup_IN);
      #    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, tcsGroup_IN)).enabled(!custInvoiceTable.tdsGroup_IN);
      #    custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, tdsGroup_IN)).enabled(!custInvoiceLine.tcsGroup_IN);
      #    custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, tcsGroup_IN)).enabled(!custInvoiceLine.tdsGroup_IN);
      #    withholdingTax_IN.enabled(custInvoiceLine.tdsGroup_IN || custInvoiceLine.tcsGroup_IN);
      #}
    ENDSOURCE
    SOURCE #setTaxWithholdVisible_IN
      #public void setTaxWithholdVisible_IN()
      #{
      #    TaxWithholdParameters_IN taxWithholdParameters;
      #
      #    taxWithholdParameters = TaxWithholdParameters_IN::find();
      #    withholdingTax_IN.visible(taxWithholdParameters.tdsInvoice || taxWithholdParameters.tcsInvoice);
      #    withholdingTax_IN.visible(taxWithholdParameters.tdsInvoice || taxWithholdParameters.tcsInvoice);
      #    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, tdsGroup_IN)).visible(taxWithholdParameters.tdsInvoice);
      #    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, tcsGroup_IN)).visible(taxWithholdParameters.tcsInvoice);
      #    custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, tdsGroup_IN)).visible(taxWithholdParameters.tdsInvoice);
      #    custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, tcsGroup_IN)).visible(taxWithholdParameters.tcsInvoice);
      #    buttonWithholdTax_IN.visible(taxWithholdParameters.tdsInvoice || taxWithholdParameters.tcsInvoice);
      #    withholdingTax.visible(taxWithholdParameters.tdsInvoice || taxWithholdParameters.tcsInvoice);
      #}
    ENDSOURCE
    SOURCE #setTitleText
      #public void setTitleText()
      #{
      #    if (custInvoiceTable.InvoiceId)
      #    {
      #        freeTextInvoiceId.text(strFmt('%1 : %2 - %3', custInvoiceTable.InvoiceId,
      #                                                custInvoiceTable.InvoiceAccount,
      #                                                custInvoiceTable.customerName()));
      #    }
      #    else
      #    {
      #        freeTextInvoiceId.text(strFmt('%1 - %2', custInvoiceTable.InvoiceAccount,
      #                                                custInvoiceTable.customerName()));
      #    }
      #}
    ENDSOURCE
    SOURCE #setupCustomFieldButtonStatus
      #public void setupCustomFieldButtonStatus()
      #{
      #    boolean enabled;
      #
      #    enabled = custInvoiceLine.BillingCode != '' && element.canShowInputDialog();
      #
      #    buttonCustomField.enabled(enabled);
      #}
    ENDSOURCE
    SOURCE #setupRecalculateButtonStatus
      #/// <summary>
      #/// Sets the enabled state of the 'Recalculate...' menu item.
      #/// </summary>
      #void setupRecalculateButtonStatus()
      #{
      #    boolean enabled = false;
      #
      #    if (!customFieldDialogOpen)
      #    {
      #        enabled = !custInvoiceTable.Posted && custInvoiceLine.BillingCode != '';
      #        if (enabled)
      #        {
      #            this.syncBillingCodeLookup();
      #            enabled = billingCodeLookup && custBillingCodeVersion && custBillingCodeVersion.UseScript == UseRateScript::Yes;
      #        }
      #    }
      #
      #    recalculateLineAmount.enabled(enabled);
      #}
    ENDSOURCE
    SOURCE #setVisible_IN
      #private void setVisible_IN()
      #{
      #    TaxParameters taxParametersLoc = TaxParameters::find();
      #
      #    custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, ExciseTariffCodes_IN)).visible(taxParametersLoc.Excise_IN);
      #    custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, ExciseRecordType_IN)).visible(taxParametersLoc.Excise_IN);
      #    custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, CustomsTariffCodeTable_IN)).visible(taxParametersLoc.Customs_IN);
      #    custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, ServiceCodeTable_IN)).visible(taxParametersLoc.ServiceTax_IN);
      #    custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, gtaServiceCategory_IN)).visible(taxParametersLoc.ServiceTax_IN);
      #    custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, SalesTaxFormTypes_IN)).visible(taxParametersLoc.SalesTax_IN);
      #
      #    vat.visible(taxParametersLoc.vat_in);
      #    salesTax.visible(taxParametersLoc.SalesTax_IN);
      #    serviceTax_IN.visible(taxParametersLoc.ServiceTax_IN);
      #    excise_IN.visible(taxParametersLoc.Excise_IN);
      #    customs_IN.visible(taxParametersLoc.Customs_IN);
      #    tabTaxInformation_IN.visible(TaxParameters::checkTaxParameters_IN() || TaxWithholdParameters_IN::checkTaxParameters());
      #    amount_IN.visible(TaxParameters::checkTaxParameters_IN());
      #}
    ENDSOURCE
    SOURCE #showCustomFieldDialog
      #/// <summary>
      #/// Displays the <c>CustCustomFieldInputDialog</c> dialog if there are any custom fields that need to be displayed.
      #/// </summary>
      #/// <returns>
      #/// A false value if the dialog is displayed and cancel is clicked otherwise true.
      #/// </returns>
      #public boolean showCustomFieldDialog()
      #{
      #    boolean canShow = false;
      #    MenuFunction menuFunction;
      #
      #    Args args;
      #
      #    canShow = element.canShowInputDialog();
      #    if (canShow)
      #    {
      #        args = new Args();
      #        args.parm(custInvoiceTable.Posted == NoYes::Yes ? '1' : '0');
      #        args.record(custInvoiceLine);
      #        args.parmObject(mapCustCustomFieldElements);
      #        args.caller(element);
      #
      #        menuFunction = new MenuFunction(menuitemActionStr(CustCustomFieldInputDialog),MenuItemType::Action);
      #
      #        buttonCustomField.enabled(false);
      #
      #        customFieldDialogOpen = true;
      #        element.setupCustomFieldButtonStatus();
      #        element.setupRecalculateButtonStatus();
      #
      #        menuFunction.run(args);
      #    }
      #    else
      #    {
      #        customFieldDialogOkClicked = true;
      #    }
      #
      #    customFieldDialogOpen = false;
      #    customFieldDialog = null;
      #
      #    element.setupCustomFieldButtonStatus();
      #    element.setupRecalculateButtonStatus();
      #
      #    return customFieldDialogOkClicked;
      #}
    ENDSOURCE
    SOURCE #syncBillingCodeLookup
      #/// <summary>
      #/// Syncronizes the contents of the billingCodeLookup form-level variable with the billing code of the current invoice line.
      #/// </summary>
      #/// <remarks>
      #/// Reloads the record if necessary. If an invoice line has no billing code, empties the record buffer.
      #/// </remarks>
      #public void syncBillingCodeLookup()
      #{
      #
      #    if (custInvoiceLine.BillingCode == "")
      #    {
      #        billingCodeLookup.clear();
      #        custBillingCodeVersion.clear();
      #    }
      #    else
      #    {
      #        if (custInvoiceLine.BillingCode != billingCodeLookup.BillingCode)
      #        {
      #            billingCodeLookup = CustBillingCode::findBillingCode(custInvoiceLine.BillingCode);
      #            custBillingCodeVersion  = CustBillingCodeVersion::findByDate(billingCodeLookup.RecId, custInvoiceTable.InvoiceDate);
      #        }
      #    }
      #}
    ENDSOURCE
    SOURCE #updateDesign
      #/// <summary>
      #///     Sets fields visible and changes the labels when Average VAT feature is active.
      #/// </summary>
      #private void updateDesign()
      #{
      #    noteFormat.visible(true);
      #    reference.visible(true);
      #    isRealizedVAT.visible(true);
      #
      #    this.noteFormatEdit();
      #}
    ENDSOURCE
    SOURCE #updateFormState
      #/// <summary>
      #/// Update form state based on the source document status
      #/// </summary>
      #/// <param name = "_sourceDocumentLineRecId">
      #/// The Id of the source document line.
      #/// </param>
      #/// <remarks>
      #/// Enable subledger journal entries button if the source document line is in a fully distributed state otherwise disable
      #/// </remarks>
      #public void updateFormState(RefRecId _sourceDocumentLineRecId)
      #{
      #    if(custInvoiceLine.SourceDocumentLine == _sourceDocumentLineRecId)
      #    {
      #        if(custInvoiceLine.AmountCur != 0)
      #        {
      #            accountingDistributionsLineButton.enabled(true);
      #        }
      #        else
      #        {
      #            accountingDistributionsLineButton.enabled(false);
      #        }
      #    }
      #}
    ENDSOURCE
    SOURCE #updateMarkupDistribution_W
      #private void updateMarkupDistribution_W()
      #{
      #    CustInvoiceLine  localCustInvoiceLine;
      #    MarkupTrans      localMarkupTrans;
      #
      #    while select localMarkupTrans
      #        where localMarkupTrans.TransRecId   == custInvoiceTable.RecId
      #           && localMarkupTrans.TransTableId == custInvoiceTable.TableId
      #    {
      #        SourceDocumentProcessorFacade::submitSourceDocumentLineImplementation(localMarkupTrans);
      #    }
      #
      #    while select TableId from localCustInvoiceLine
      #        where localCustInvoiceLine.ParentRecId == custInvoiceTable.RecId
      #        join localMarkupTrans
      #            where localMarkupTrans.TransRecId   == localCustInvoiceLine.RecId
      #               && localMarkupTrans.TransTableId == localCustInvoiceLine.TableId
      #    {
      #        SourceDocumentProcessorFacade::submitSourceDocumentLineImplementation(localMarkupTrans);
      #    }
      #}
    ENDSOURCE
    SOURCE #updateSourceRefControlsAfterLookup_MY
      #/// <summary>
      #///     Updates the controls used for selecting source invoice transaction.
      #/// </summary>
      #// <GMY>
      #public void updateSourceRefControlsAfterLookup_MY()
      #{
      #    if (custInvoiceJourLookupController.parmInvoiceInfo())
      #    {
      #        [custInvoiceLine_W.RefInvoiceId_MY, custInvoiceLine_W.RefInvoiceDate_MY] = custInvoiceJourLookupController.parmInvoiceInfo();
      #
      #        // After updated, clear the InvoiceInfo container of CustInvoiceJourLookupController to prepare for next lookup.
      #        custInvoiceJourLookupController.parmInvoiceInfo(conNull());
      #    }
      #}
      #// </GMY>
    ENDSOURCE
    SOURCE #writeDeliveryInfo
      #/// <summary>
      #/// Writes delivery info to database.
      #/// </summary>
      #void writeDeliveryInfo()
      #{
      #    if (dlvLocationId != origDlvLocationId)
      #    {
      #        // Delivery location
      #        if (!dlvLocationId)
      #        {
      #            custInvoiceTable.DeliveryLocation = 0;
      #        }
      #        else
      #        {
      #            custInvoiceTable.DeliveryLocation = dlvLocationId;
      #        }
      #    }
      #}
    ENDSOURCE
  ENDMETHODS
  OBJECTBANK
    PROPERTIES
      ChangeGroupMode     #ImplicitInnerOuter
    ENDPROPERTIES
    
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #CustInvoiceTable
          Table               #CustInvoiceTable
          Index               #InvoiceIdIdx
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD OrderAccount
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void modified()
                #{
                #    super();
                #
                #    // Make sure the header has been saved once it has an order account
                #    if (!custInvoiceTable.RecId
                #        && (!isBillingClassificationEnabled
                #        || custInvoiceTable.CustBillingClassification)
                #       )
                #    {
                #        custInvoiceTable.insert();
                #    }
                #
                #    // Reload default dimensions as the specification of the customer account loads new defaults
                #    dimensionDefaultingControllerHeader.activated();
                #    if (custInvoiceTable.InvoiceDate)
                #    {
                #        dimensionDefaultingControllerHeader.setNonActiveValueTolerance(ErrorTolerance::Warning, custInvoiceTable.InvoiceDate);
                #    }
                #
                #    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, OneTimeCustomer)).allowEdit(false);
                #    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, OneTimeCustomer)).skip(true);
                #    custInvoiceTable_DS.initInvoiceNumbering_LT();
                #    custInvoiceTable_ds.refresh();
                #    custInvoiceTable_ds.setAllowEdit();
                #    custInvoiceTable_ds.rereadReferenceDataSources();
                #    element.setFieldsEditable();
                #    element.dlvLocationId(true, logisticsPostalAddress.Location);
                #
                #    custInvoiceTable.DirectDebitMandate = CustDirectDebitMandate::defaultAndDisplayMandate(
                #        custInvoiceTable.InvoiceAccount,
                #        custInvoiceTable.PaymMode,
                #        custInvoiceTable.DirectDebitMandate,
                #        true,
                #        custInvoiceTable_ds,
                #        fieldNum(CustInvoiceTable, DirectDebitMandate));
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InvoiceAccount
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void modified()
                #{
                #    super();
                #
                #    custInvoiceTable_DS.initInvoiceNumbering_LT();
                #    custInvoiceTable_ds.refresh();
                #    element.setFieldsEditable();
                #
                #    // Modifying InvoiceAccount can update delivery location
                #    element.dlvLocationId(true, logisticsPostalAddress.Location);
                #
                #    custInvoiceTable.DirectDebitMandate = CustDirectDebitMandate::defaultAndDisplayMandate(
                #        custInvoiceTable.InvoiceAccount,
                #        custInvoiceTable.PaymMode,
                #        custInvoiceTable.DirectDebitMandate,
                #        true,
                #        custInvoiceTable_ds,
                #        fieldNum(CustInvoiceTable, DirectDebitMandate));
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InvoiceDate
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void modified()
                #{
                #    super();
                #
                #    dimensionDefaultingControllerHeader.setNonActiveValueTolerance(ErrorTolerance::Warning, custInvoiceTable.InvoiceDate);
                #    dimensionDefaultingControllerLine.setNonActiveValueTolerance(ErrorTolerance::Warning,custInvoiceTable.InvoiceDate);
                #
                #    custInvoiceTable_ds.refresh();
                #}
                #
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret = true;
                #
                #    if (isBillingClassificationEnabled)
                #    {
                #        ret = custBillingCodeVersion.checkValidDatesForInvoiceLine(custInvoiceTable.RecId, custInvoiceTable.orig().InvoiceDate, custInvoiceTable.InvoiceDate);
                #    }
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD DueDate
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    PaymCalendarAdjustedDate    paymCalendarAdjustedDate;
                #
                #    super();
                #
                #    // perform the payment calendar work only for the required countries
                #    if (SysCountryRegionCode::isLegalEntityInConsolidatedCountryRegion() && custInvoiceTable.DueDate)
                #    {
                #        paymCalendarAdjustedDate = CustFreeInvoiceCalcTotals::getAdjustedDate(custInvoiceTable);
                #
                #        custInvoiceTable.DueDate = PaymCalendarProcessor::getAdjustedDueDate(custInvoiceTable.DueDate, priorDueDate, paymCalendarAdjustedDate);
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CurrencyCode
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void modified()
                #{
                #    super();
                #
                #    custInvoiceTable.initBankAccounts_W();
                #
                #    custInvoiceTable_ds.setAllowEdit();
                #    custInvoiceTable_ds.refresh();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CashDiscCode
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void modified()
                #{
                #    super();
                #
                #    custInvoiceTable.CashDiscPercent = CashDisc::find(custInvoiceTable.CashDiscCode).Percent;
                #
                #    if (TaxParameters::find().CashDiscOnInvoice)
                #    {
                #        custInvoiceTable.CashDiscDate = dateNull();
                #        custInvoiceTable.calcCashDiscDate();
                #    }
                #
                #    if (custInvoiceTable.CashDiscCode == '')
                #    {
                #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CashDiscDate)).allowEdit(false);
                #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CashDiscDate)).skip(true);
                #    }
                #    else
                #    {
                #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CashDiscDate)).allowEdit(true);
                #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CashDiscDate)).skip(false);
                #    }
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD OneTimeCustomer
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void modified()
                #{
                #    super();
                #
                #    if (custInvoiceTable.OneTimeCustomer && !custInvoiceTable.OrderAccount)
                #    {
                #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, OneTimeCustomer)).allowEdit(false);
                #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, OneTimeCustomer)).skip(true);
                #    }
                #
                #    if(custInvoiceTable.OneTimeCustomer)
                #    {
                #        orderAccount_Name.allowEdit(true);
                #        cvHeader_OrderAccountName.allowEdit(true);
                #    }
                #    else
                #    {
                #        orderAccount_Name.allowEdit(false);
                #        cvHeader_OrderAccountName.allowEdit(false);
                #    }
                #
                #    if(combinedViewTabPage.isActivePage())
                #    {
                #        cvHeader_OrderAccountName.setFocus();
                #    }
                #    else if(headerViewTabPage.isActivePage())
                #    {
                #        orderAccount_Name.setFocus();
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PaymentSched
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void modified()
                #{
                #
                #    super();
                #
                #    if (custInvoiceTable.PaymentSched)
                #    {
                #        buttonPaymentSched.enabled(true);
                #    }
                #    else
                #    {
                #        buttonPaymentSched.enabled(false);
                #    }
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD VATNum
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{;
                #    if (TaxVATNumTable::taxVATNumTableEnabled())
                #    {
                #        TaxVATNumTable::lookupVATNum(_formControl,custInvoiceTable);
                #    }
                #    else
                #    {
                #        super(_formControl, _filterStr);
                #    }
                #}
                #
              ENDSOURCE
              SOURCE #jumpRef
                #void jumpRef()
                #{
                #    if (TaxVATNumTable::taxVATNumTableEnabled())
                #    {
                #        TaxVATNumTable::jumpRefVATNum(custInvoiceTable, element);
                #    }
                #    else
                #    {
                #        super();
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ContactPersonId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void modified()
                #{;
                #    super();
                #    custInvoiceTable_ds.refresh();
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD PaymMode
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    CustPaymModeTable paymMode;
                #
                #    super();
                #
                #    paymMode = CustPaymModeTable::find(custInvoiceTable.PaymMode);
                #
                #    buttonSetupPaymFormat.enabled(paymMode.ExportOnInvoice);
                #
                #    custInvoiceTable.DirectDebitMandate = CustDirectDebitMandate::defaultAndDisplayMandate(
                #        custInvoiceTable.InvoiceAccount,
                #        custInvoiceTable.PaymMode,
                #        custInvoiceTable.DirectDebitMandate,
                #        false,
                #        custInvoiceTable_ds,
                #        fieldNum(CustInvoiceTable, DirectDebitMandate));
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD DocumentDate
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void modified()
                #{
                #    super();
                #    custInvoiceTable_ds.refresh();
                #    custInvoiceTable_ds.cacheCalculateMethod('Currency_M_displayExchRate');
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD EInvoiceLineSpec
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    custInvoiceTable_ds.showDimAccount();
                #    custInvoiceTable_ds.refresh();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ReleaseDate
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #/// <summary>
                #/// Handles change of release date field.
                #/// </summary>
                #/// <remarks>
                #/// Gives a warning if the date is in the past.
                #/// </remarks>
                #public void modified()
                #{
                #    super();
                #    if (custInvoiceTable.ReleaseDate != utcDateTimeNull() &&
                #        DateTimeUtil::addDays(custInvoiceTable.ReleaseDate, 1) < DateTimeUtil::utcNow())
                #    {
                #        warning(strFmt("@SYS114595"));
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD DeliveryLocation
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (BrazilParameters::isEnabled())
                #    {
                #        custInvoiceTable_ds.rereadReferenceDataSources();
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD PostalAddress
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    LogisticsLocationEntity::showHideEffectiveAddressMessageBar(element, logisticsPostalAddress);
                #    custInvoiceTable.DeliveryLocation = LogisticsPostalAddress::findRecId(custInvoiceTable.PostalAddress).Location;
                #    element.getDeliveryInfo();
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    Common ret;
                #    CustTable localCustTable = CustTable::find(custInvoiceTable.InvoiceAccount);
                #
                #    ret = LogisticsLocationSelectionLookup::lookupAddressForm(_formReferenceControl, localCustTable,
                #        [LogisticsLocationRoleType::Invoice],
                #        false, [custInvoiceTable.PostalAddress]);
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD CFPSId_BR
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    CFPSTable_BR::lookup(_formControl, SalesPurchBoth_BR::Sales);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CorrectedPeriod_RU
            PROPERTIES
              Visible             #No
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Correct_RU
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (! custInvoiceTable.Correct_RU)
                #    {
                #        custInvoiceTable.CorrectedInvoiceId_RU         = '';
                #        custInvoiceTable.CorrectedFactureExternalId_RU = '';
                #        custInvoiceTable.CorrectedInvoiceDate_RU       = dateNull();
                #        custInvoiceTable.CorrectedFactureDate_RU       = dateNull();
                #        custInvoiceTable.CorrectedPeriod_RU            = dateNull();
                #    }
                #
                #    element.allowEdit_RU();
                #    custInvoiceTable_ds.initCorrectedInvoiceValues_RU();
                #    custInvoiceTable_ds.setCorrFacture_RU();
                #    custInvoiceTable_ds.refresh();
                #
                #    correctedLine_RU.visible(custInvoiceTable.Correct_RU);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CorrectedInvoiceId_RU
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    custInvoiceTable_ds.initCorrectedInvoiceLines_RU();
                #    custInvoiceTable_ds.setCorrFacture_RU();
                #}
              ENDSOURCE
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    CustVendInvoiceJour custVendInvoiceJour;
                #    ;
                #
                #    custVendInvoiceJour = CustVendInvoiceJour::lookupCorrectedInvoiceId_RU(_formControl,
                #                                                                           ModuleCustVend::Cust,
                #                                                                           custInvoiceTable.InvoiceAccount);
                #    if (custVendInvoiceJour)
                #    {
                #        custInvoiceTable.CorrectedInvoiceDate_RU = custVendInvoiceJour.InvoiceDate;
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CorrectedInvoiceDate_RU
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    custInvoiceTable_ds.initCorrectedInvoiceLines_RU();
                #    custInvoiceTable_ds.setCorrFacture_RU();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD TDSGroup_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    ;
                #
                #    super();
                #    element.setTaxWithholdEnabled_IN();
                #}
              ENDSOURCE
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    ;
                #
                #    TaxWithholdGroupHeading::lookupTaxComponentGroup_IN(_formControl, TaxWithholdCodeType_IN::TDS);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD TCSGroup_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    ;
                #
                #    super();
                #    element.setTaxWithholdEnabled_IN();
                #}
              ENDSOURCE
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    ;
                #
                #    TaxWithholdGroupHeading::lookupTaxComponentGroup_IN(_formControl, TaxWithholdCodeType_IN::TCS);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD FiscalDocumentType_BR
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookupReference
                #// <GBR>
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    return FiscalDocumentType_BR::lookupReference(custInvoiceTable.fiscalEstablishment().RecId, _formReferenceControl);
                #}
                #// </GBR>
              ENDSOURCE
              SOURCE #resolveReference
                #public Common resolveReference(FormReferenceControl _formReferenceControl)
                #{
                #    Common ret;
                #    FiscalDocumentTypeId_BR fiscalDocumentTypeId;
                #
                #    // Get the text that the user entered into the control to see if there is a match to display
                #    fiscalDocumentTypeId = _formReferenceControl.filterValue(AbsoluteFieldBinding::construct(fieldStr(FiscalDocumentType_BR, FiscalDocumentTypeId), tableStr(FiscalDocumentType_BR))).value();
                #
                #    if (fiscalDocumentTypeId)
                #    {
                #        ret = FiscalDocumentType_BR::find(fiscalDocumentTypeId, custInvoiceTable.fiscalEstablishment().FiscalEstablishmentId);
                #    }
                #    else
                #    {
                #        ret = super(_formReferenceControl);
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD ManualNumbering_W
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    custInvoiceTable.ManualInvoiceID_W      = '';
                #    custInvoiceTable.DocNumberingCode_LT    = '';
                #    element.allowEdit_W();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD DocNumberingCode_LT
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    LtInvoiceAutoNumberingTable::lookup(_formControl, DocNumberingModule_W::Sales, LtInvoiceAutoNumberingType::Invoice);
                #}
              ENDSOURCE
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    Args args = new Args();
                #    args.lookupField(fieldNum(LtInvoiceAutoNumberingTable,NumberingCode));
                #    args.lookupValue(custInvoiceTable.DocNumberingCode_LT);
                #    new MenuFunction(menuitemDisplayStr(LtInvoiceAutonumberingTable),MenuItemType::Display).run(args);
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret = super();
                #
                #    if (ret)
                #    {
                #        if (ret && custInvoiceTable.DocNumberingCode_LT)
                #        {
                #            if (! LtInvoiceAutoNumberingTable::existUserNumbering(custInvoiceTable.DocNumberingCode_LT, DocNumberingModule_W::Sales, LtInvoiceAutoNumberingType::Invoice))
                #            {
                #                ret = checkFailed(strFmt("@GLS110719", custInvoiceTable.DocNumberingCode_LT, curUserId()));
                #            }
                #        }
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD AgreementHeaderExt_RU
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    SalesAgreementHeaderExt_RU::salesAgreementJumpRef(custInvoiceTable.AgreementHeaderExt_RU);
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    Common ret;
                #
                #    ret = SalesAgreementHeaderExt_RU::salesAgreementReferenceLookup(_formReferenceControl,
                #        custInvoiceTable.OrderAccount,
                #        custInvoiceTable.InvoiceDate,
                #        custInvoiceTable.InvoiceAccount);
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD BankAccount_LV
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    if(BankParameters::checkCurrCodeControl_W())
                #    {
                #        BankAccountTable::lookupGiroBank_W(_formControl, CompanyInfo::standardCurrency());
                #    }
                #    else
                #    {
                #        super(_formControl, _filterStr);
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CorrectionType_RU
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    custInvoiceTable_ds.setCorrFacture_RU();
                #
                #    if (custInvoiceTable.CorrectionType_RU == FactureCorrectionType_RU::Unknown)
                #    {
                #        CustInvoiceLineCorrLink_RU::clearLinksByCustInvoiceTable(custInvoiceTable);
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD CurBankAccount_LV
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    if(BankParameters::checkCurrCodeControl_W())
                #    {
                #        BankAccountTable::lookupGiroBank_W(_formControl, custInvoiceTable.CurrencyCode);
                #    }
                #    else
                #    {
                #        super(_formControl, _filterStr);
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD DirectDebitMandate
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #resolveReference
                #public Common resolveReference(FormReferenceControl _formReferenceControl)
                #{
                #    return CustDirectDebitMandate::resolveReference(
                #        custInvoiceTable.InvoiceAccount,
                #        _formReferenceControl);
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    return CustDirectDebitMandate::lookupReference(
                #        custInvoiceTable.InvoiceAccount,
                #        _formReferenceControl);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD FiscalEstablishment_BR
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (custInvoiceLine.RecId)
                #    {
                #        custInvoiceTable.FiscalDocumentType_BR = CustFiscalDocumentType_BR::findFiscalDocumentType(
                #                                                    custInvoiceTable.InvoiceAccount,
                #                                                    custInvoiceTable.fiscalEstablishment(),
                #                                                    custInvoiceLine.ServiceInvoice_BR ? ItemType::Service : ItemType::Item);
                #
                #        custInvoiceTable.modifiedField(fieldNum(CustInvoiceTable, FiscalDocumentType_BR));
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD SalesPurchOperationType_BR
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #validate
                #public boolean validate()
                #{
                #    CFOPAttributesDeterminer_BR cfopAttributesDeterminer;
                #    boolean ret;
                #
                #    cfopAttributesDeterminer    = CFOPAttributesDeterminer_BR::construct(custInvoiceLine);
                #
                #    ret                         = salesPurchOperationTypeController_BR.validate(custInvoiceTable.SalesPurchOperationType_BR, cfopAttributesDeterminer);
                #
                #    return super() && ret;
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    return salesPurchOperationTypeController_BR.lookupReference(_formReferenceControl);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #writing
          #public void writing()
          #{
          #    boolean updateAllDistributions;
          #
          #    ttsbegin;
          #
          #    if (custInvoiceTable.RecId)
          #    {
          #        //record has already been persisted
          #
          #        custInvoiceTable_ds.checkFieldsAreChanged();
          #
          #        if (updateCurrencyCode &&
          #            (CustInvoiceLine::exist(custInvoiceTable.RecId) || MarkupTrans::exist(custInvoiceTable.TableId, custInvoiceTable.RecId)))
          #        {
          #            updateCurrencyCode = false;
          #
          #            if (!isConfigurationkeyEnabled(configurationKeyNum(PublicSector)))
          #            {
          #                if (CustInvoiceTable::promptConvertCurrencyCode())
          #                {
          #                    // Update the currency code on all invoice lines and markups, and update the currency code
          #                    // & adjust the amounts on all associated subLedgerDistribution lines. Removes the associated
          #                    // subLedgerJournal lines which are now invalid.
          #                    custInvoiceTable.convertCurrencyCode(custInvoiceTable.CurrencyCode);
          #                    updateAllDistributions = true;
          #                }
          #                else
          #                {
          #                    ttsabort;
          #                    return;
          #                }
          #            }
          #        }
          #
          #        element.deleteTaxForDocumentHeader();
          #    }
          #
          #    if (custInvoiceTable.Touched)
          #    {
          #        custInvoiceTable.Touched = NoYes::No;
          #    }
          #
          #    // Save delivery location
          #    element.writeDeliveryInfo();
          #
          #    dimensionDefaultingControllerHeader.writing();
          #
          #    super();
          #
          #    ttscommit;
          #}
        ENDSOURCE
        SOURCE #mcrDisplayPaymStatus
          #[SysClientCacheDataMethodAttribute(true)]
          #public display MCRCustPaymStatus mcrDisplayPaymStatus(CustInvoiceTable _custInvoiceTable)
          #{
          #    if (userAllowsPayments)
          #    {
          #        return _custInvoiceTable.mcrGetPaymStatus();
          #    }
          #    else
          #    {
          #        return MCRCustPaymStatus::NotSubmitted;
          #    }
          #
          #}
        ENDSOURCE
        SOURCE #initCorrectedInvoiceLines_RU
          #void initCorrectedInvoiceLines_RU()
          #{
          #    CustInvoiceLine::initCorrectedInvoiceLines_RU(custInvoiceTable);
          #    custInvoiceLine_ds.research();
          #
          #    custInvoiceTable.vatOnPayment_RU = CustInvoiceJour::findFromCustTrans(
          #        custInvoiceTable.CorrectedInvoiceId_RU,
          #        custInvoiceTable.CorrectedInvoiceDate_RU,
          #        custInvoiceTable.InvoiceAccount).custInvoiceJour_RU().vatOnPayment_RU;
          #
          #    custInvoiceTable_ds.refresh();
          #}
        ENDSOURCE
        SOURCE #setCorrFacture_RU
          #void setCorrFacture_RU()
          #{
          #    FactureJour_RU  corrFacture;
          #    CustInvoiceJour origInvoiceJour;
          #
          #    element.allowEdit_RU();
          #
          #    if (buttonCustPostFactureFreeTxtJob_RU.enabled() &&
          #        custInvoiceTable.CorrectedInvoiceId_RU       &&
          #        custInvoiceTable.CorrectedInvoiceDate_RU)
          #    {
          #        origInvoiceJour = CustInvoiceJour::findFromCustTrans(custInvoiceTable.CorrectedInvoiceId_RU,
          #                                                             custInvoiceTable.CorrectedInvoiceDate_RU,
          #                                                             custInvoiceTable.InvoiceAccount);
          #
          #        if (origInvoiceJour)
          #        {
          #            corrFacture = CustVendInvoiceJour::findLastCorrFacture_RU([origInvoiceJour], custInvoiceTable.CorrectionType_RU);
          #
          #            if (corrFacture)
          #            {
          #                custInvoiceTable.CorrectedFactureExternalId_RU = corrFacture.FactureExternalId;
          #                custInvoiceTable.CorrectedFactureDate_RU       = corrFacture.FactureDate;
          #                custInvoiceTable_ds.initCorrFactureDisplay_RU();
          #
          #                if (custInvoiceTable.CorrectedFactureExternalId_RU && custInvoiceTable.CorrectedFactureDate_RU)
          #                {
          #                    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CorrectedFactureExternalId_RU)).allowEdit(false);
          #                    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CorrectedFactureDate_RU)).allowEdit(false);
          #
          #                    return;
          #                }
          #            }
          #        }
          #
          #    }
          #
          #    custInvoiceTable_ds.refresh();
          #}
        ENDSOURCE
        SOURCE #initCorrFactureDisplay_RU
          #void initCorrFactureDisplay_RU(boolean _active = false)
          #{
          #    FactureJour_RU jour;
          #    FactureJour_RU jourRev;
          #    FactureJour_RU jourCurrent;
          #
          #    if (! custInvoiceTable.CorrectedFactureExternalId_RU ||
          #        ! custInvoiceTable.CorrectedFactureDate_RU)
          #    {
          #        lastRevisionNum     = 0;
          #        lastRevisionDate    = dateNull();
          #        return;
          #    }
          #
          #    jour = FactureJour_RU::findCorrectedFacture(FactureModule_RU::Cust,
          #                                                custInvoiceTable.InvoiceAccount,
          #                                                custInvoiceTable.CorrectedFactureExternalId_RU,
          #                                                custInvoiceTable.CorrectedFactureDate_RU);
          #
          #    if (! _active)
          #    {
          #        [custInvoiceTable.CorrectedFactureExternalId_RU,
          #         custInvoiceTable.CorrectedFactureDate_RU] = jour ?
          #                                                     FactureJour_RU::findLastFacture(jour, custInvoiceTable.CorrectionType_RU) :
          #                                                     ['', dateNull()];
          #
          #        if (custInvoiceTable.CorrectionType_RU == FactureCorrectionType_RU::Correction           &&
          #            jour                                                                                 &&
          #           (jour.FactureExternalId             != custInvoiceTable.CorrectedFactureExternalId_RU ||
          #            jour.FactureDate                   != custInvoiceTable.CorrectedFactureDate_RU))
          #        {
          #            warning(strFmt("@SYS4081878", custInvoiceTable.CorrectedFactureExternalId_RU, custInvoiceTable.CorrectedFactureDate_RU));
          #            jour = FactureJour_RU::findCorrectedFacture(FactureModule_RU::Cust,
          #                                                        custInvoiceTable.InvoiceAccount,
          #                                                        custInvoiceTable.CorrectedFactureExternalId_RU,
          #                                                        custInvoiceTable.CorrectedFactureDate_RU);
          #        }
          #    }
          #
          #    if (jour)
          #    {
          #        if (custInvoiceTable.custInvoiceJour().custInvoiceJour_RU().FacturedFully_RU)
          #        {
          #            custInvoiceTable.custInvoiceJour().factureJourSortedList_RU().next(jourCurrent);
          #            select firstonly jourRev
          #                order by CreatedDateTime desc, SeqNumber desc
          #                where (jourRev.RefRevisedFacture == jour.RecId                  ||
          #                       jourRev.RecId             == jour.RecId)                 &&
          #                      (jourRev.CreatedDateTime    < jourCurrent.CreatedDateTime ||
          #                      (jourRev.CreatedDateTime   == jourCurrent.CreatedDateTime &&
          #                       jourRev.SeqNumber          < jourCurrent.SeqNumber));
          #        }
          #        else
          #        {
          #            select firstonly jourRev
          #                where (jourRev.RefRevisedFacture == jour.RecId  ||
          #                       jourRev.RecId             == jour.RecId) &&
          #                       jourRev.Revised           == NoYes::No;
          #        }
          #
          #        lastRevisionNum     = jourRev.RevisionNum;
          #        lastRevisionDate    = jourRev.CorrectionType == FactureCorrectionType_RU::Revision ?
          #                              jourRev.FactureDate                                          :
          #                              dateNull();
          #    }
          #    else
          #    {
          #        lastRevisionNum     = 0;
          #        lastRevisionDate    = dateNull();
          #    }
          #}
        ENDSOURCE
        SOURCE #validateWrite
          #public boolean validateWrite()
          #{
          #    boolean isValid;
          #    boolean updateAllDistributions;
          #
          #    boolean                             convertCurrency = false;
          #    CustInvoiceChangeCurrencyOption     custInvoiceChangeCurrencyOption = CustInvoiceChangeCurrencyOption::CalculateWithNewRate;
          #
          #    isValid = super();
          #
          #    if (isValid && isConfigurationkeyEnabled(configurationKeyNum(PublicSector)) && custInvoiceTable.RecId)
          #    {
          #        //record has already been persisted
          #        custInvoiceTable_ds.checkFieldsAreChanged();
          #
          #        if (updateCurrencyCode &&
          #            (CustInvoiceLine::exist(custInvoiceTable.RecId) || MarkupTrans::exist(custInvoiceTable.TableId, custInvoiceTable.RecId)))
          #        {
          #            [convertCurrency, custInvoiceChangeCurrencyOption] = CustInvoiceTable::promptConvertCurrencyCodeMethodToUse();
          #            if (convertCurrency)
          #            {
          #                ttsbegin;
          #                // Update the currency code on all invoice lines and markups, and update the currency code
          #                // & adjust the amounts on all associated subLedgerDistribution lines. Removes the associated
          #                // subLedgerJournal lines which are now invalid.
          #                custInvoiceTable.convertCurrencyCode(custInvoiceTable.CurrencyCode, custInvoiceChangeCurrencyOption);
          #                updateAllDistributions = true;
          #
          #                if (custInvoiceChangeCurrencyOption == CustInvoiceChangeCurrencyOption::ResetToBillingCodeRate && isBillingClassificationEnabled)
          #                {
          #                    element.rerunBillingCodeScripts();
          #                }
          #                ttscommit;
          #            }
          #            else
          #            {
          #                isValid = false;
          #            }
          #        }
          #    }
          #
          #    return isValid;
          #}
        ENDSOURCE
        SOURCE #initInvoiceNumbering_LT
          #public void initInvoiceNumbering_LT()
          #{
          #    if (countryRegion_LTLV)
          #    {
          #        custInvoiceTable.ManualNumbering_W = LtInvoiceAutoNumberingGroups::autoNumberingForSalesInvoice(custInvoiceTable.InvoiceAccount);
          #        custInvoiceTable_DS.object(fieldNum(CustInvoiceTable, ManualNumbering_W)).modified();
          #    }
          #}
        ENDSOURCE
        SOURCE #rereadReferenceDataSources
          #public void rereadReferenceDataSources()
          #{
          #    LogisticsLocationRecId location;
          #
          #    super();
          #
          #    //LogisticsPostalAddress form calls back to here - detect a change in address and update the delivery info
          #    if(custInvoiceTable.PostalAddress)
          #    {
          #        location = LogisticsPostalAddress::findRecId(custInvoiceTable.PostalAddress).Location;
          #        if (custInvoiceTable.DeliveryLocation != location)
          #        {
          #            custInvoiceTable.DeliveryLocation = location;
          #            element.getDeliveryInfo();
          #        }
          #    }
          #}
        ENDSOURCE
        SOURCE #selectionChanged
          #public void selectionChanged()
          #{
          #    super();
          #    if (CustRelatedInvoice::findByCustInvoice(custInvoiceTable.RecId).InvoiceAssociationType == InvoiceAssociationType::CorrectedInvoice)
          #    {
          #        infoBarGroup.visible(true);
          #
          #        if (custInvoiceTable.Posted)
          #        {
          #            infoBarText.text("@SYS311110");
          #        }
          #        else
          #        {
          #            infoBarText.text("@SYS308706");
          #        }
          #    }
          #    else if (BrazilParameters::isEnabled()
          #        && CustRelatedInvoice::findByCustInvoice(custInvoiceTable.RecId).InvoiceAssociationType == InvoiceAssociationType::AdjustingInvoice)
          #    {
          #        infoBarGroup.visible(true);
          #
          #        if (custInvoiceTable.Posted)
          #        {
          #            infoBarText.text("@GLS63959");
          #        }
          #        else
          #        {
          #            infoBarText.text("@GLS63960");
          #        }
          #    }
          #    else
          #    {
          #        infoBarGroup.visible(false);
          #    }
          #}
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    QueryBuildDataSource custTableDS;
          #    QueryBuildDataSource orderAccountCustTable;
          #
          #    void disableDataSource(QueryBuildDataSource _dataSource)
          #    {
          #        int childCount = _dataSource.childDataSourceCount();
          #        int i;
          #
          #        for (i = 1; i <= childCount; i++)
          #        {
          #            disableDataSource(_dataSource.childDataSourceNo(i));
          #        }
          #
          #        _dataSource.enabled(false);
          #    }
          #
          #    super();
          #
          #    if (BrazilParameters::isEnabled())
          #    {
          #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, cfpsId_BR)).visible(BrazilParameters::isCFPSEnabled_BR());
          #    }
          #
          #    // The CustTable is included in the query if a menu item has the copy caller query set,
          #    // and since the details form doesn't do anything with that datasource the data on the custtable becomes stale
          #    // when the CustInvoiceTable.OrderAccount is updated directly during the lookup operation.
          #    // The unit of work does not properly recognize the changes, and the CustInvoiceTable.OrderAccount
          #    // and CustInvoiceTable.OrderAccountName fields are reverting their values.
          #    // Disabling the CustTable query to avoid this issue.
          #    custTableDS = this.query().dataSourceName('CustTable');
          #    if (custTableDS)
          #    {
          #        custTableDS.enabled(false);
          #    }
          #
          #    orderAccountCustTable = this.query().dataSourceName('OrderAccountCustTable');
          #    if (orderAccountCustTable)
          #    {
          #        disableDataSource(orderAccountCustTable);
          #    }
          #
          #    if (mcrGiftCardFreeTextInvoice)
          #    {
          #        custInvoiceTable_ds.allowEdit(false);
          #        custInvoiceTable_ds.allowDelete(false);
          #        // Add an additional range of only gift cards
          #        this.query().dataSourceName(custInvoiceTable_ds.name()).addRange(fieldNum(CustInvoiceTable, mcrGiftCard)).value(enum2Value(NoYes::Yes));
          #        postedCriteria = this.query().dataSourceName(custInvoiceTable_ds.name()).addRange(fieldNum(CustInvoiceTable, Posted));
          #    }
          #
          #}
        ENDSOURCE
        SOURCE #executeQuery
          #public void executeQuery()
          #{
          #    logisticsPostalAddress_ds.validTimeStateUpdate(ValidTimeStateUpdate::Correction);
          #    logisticsPostalAddress_ds.query().validTimeStateDateTimeRange(DateTimeUtil::minValue(), DateTimeUtil::maxValue());
          #    super();
          #}
        ENDSOURCE
        SOURCE #validateDelete
          #public boolean validateDelete()
          #{
          #    boolean ret;
          #
          #    ret = super();
          #
          #    if (!ret)
          #    {
          #        custInvoiceLine_ds.research();
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #showDimAccount
          #void showDimAccount()
          #{
          #    if (custInvoiceTable.eInvoiceLineSpec == NoYes::No)
          #    {
          #        einvoice_EInvoiceAccountCode.enabled(true);
          #        custInvoiceLine_EInvoiceAccountCode.enabled(false);
          #    }
          #    else
          #    {
          #        einvoice_EInvoiceAccountCode.enabled(false);
          #        custInvoiceLine_EInvoiceAccountCode.enabled(true);
          #    }
          #}
          #
          #
        ENDSOURCE
        SOURCE #setTouched
          #/// <summary>
          #/// Reset some informtaion when the current record is updated.
          #/// </summary>
          #void setTouched()
          #{
          #    custInvoiceTable.Touched = NoYes::Yes;
          #    custInvoiceTouched = custInvoiceTable.SourceDocumentHeader;
          #    custInvoiceTable.SubLedgerJournalStatus = SubLedgerJournalStatus::Required;
          #}
        ENDSOURCE
        SOURCE #initValue
          #public void initValue()
          #{
          #    super();
          #
          #    custInvoiceTable.WorkerSalesTaker = HcmWorker::userId2Worker(curUserId());
          #
          #    // Check if the account is set
          #    if (custInvoiceTable.OrderAccount != '')
          #    {
          #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, OrderAccount)).modified();
          #    }
          #
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoFR]))
          #    {
          #        custInvoiceTable.PrintOverdueFineTxt_FR = NoYes::Yes;
          #    }
          #}
        ENDSOURCE
        SOURCE #setAllowEdit
          #void setAllowEdit()
          #{
          #    element.allowedit();
          #}
        ENDSOURCE
        SOURCE #written
          #// Obsoleting this method and the logic is moved to 'writing' method.
          #void written()
          #{
          #
          #}
        ENDSOURCE
        SOURCE #create
          #void create(boolean append = false)
          #{
          #    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, OneTimeCustomer)).skip(false);
          #    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, OneTimeCustomer)).allowEdit(true);
          #
          #    super(append);
          #
          #    cvHeader_OrderAccount.setFocus();
          #    element.allowEditCustBillingClassification();
          #}
        ENDSOURCE
        SOURCE #active
          #/// <summary>
          #/// Initiate <c>SourceDocumentClass::createTransactionDistributions</c> method and move to the next record.
          #/// </summary>
          #/// <returns>
          #/// An invoice record ID
          #/// </returns>
          #int active()
          #{
          #    boolean                         showProject;
          #    CustInvoiceLine                 custInvLine;
          #    int ret;
          #
          #    if (custInvoiceTouched && custInvoiceTouched != custInvoiceTable.SourceDocumentHeader)
          #    {
          #        custInvoiceTouched = 0;
          #    }
          #
          #    if (custInvoiceTable.SubLedgerJournalStatus == SubLedgerJournalStatus::Required ||
          #        custInvoiceTable.SubLedgerJournalStatus == SubLedgerJournalStatus::Processing)
          #    {
          #        // document may be asynchronously creating distributions/subledgerjournallines, or may have finished this process
          #        // if so, the document status may have changed so reread to get the current status
          #        this.reread();
          #    }
          #    this.setAllowEdit();
          #
          #    if (custInvoiceTable.WorkflowApprovalStatus == CustFreeInvoiceWFApprovalStatus::PendingCompletion)
          #    {
          #        isUserTaskOwner = custInvoiceTable.isUserTaskOwner();
          #    }
          #    else if (custInvoiceTable.WorkflowApprovalStatus == CustFreeInvoiceWFApprovalStatus::ChangeRequested)
          #    {
          #        isUserTaskOwner = custInvoiceTable.isUserTaskOwner();
          #        isUserApprovalOwner = custInvoiceTable.isUserApprovalOwner();
          #    }
          #    else
          #    {
          #        isUserTaskOwner = false;
          #        isUserApprovalOwner = false;
          #    }
          #
          #    if(!custInvoiceTable.WorkflowApprovalStatus && custInvoiceTable.isEditable() && custInvoiceTable.custTable_OrderAccount().RecId)
          #    {
          #        buttonCustPostInvoiceJob.enabled(true);
          #    }
          #    else
          #    {
          #        buttonCustPostInvoiceJob.enabled(custInvoiceTable.WorkflowApprovalStatus == CustFreeInvoiceWFApprovalStatus::Approved
          #                                         && !custInvoiceTable.Posted);
          #    }
          #
          #    if (custInvoiceTable.WorkflowApprovalStatus)
          #    {
          #        custOpenTransButton.enabled(custInvoiceTable.WorkflowApprovalStatus == CustFreeInvoiceWFApprovalStatus::Draft
          #        || custInvoiceTable.WorkflowApprovalStatus == CustFreeInvoiceWFApprovalStatus::Rejected);
          #
          #        custInvoiceTable_ds.allowEdit(isUserTaskOwner || isUserApprovalOwner
          #        || custInvoiceTable.WorkflowApprovalStatus == CustFreeInvoiceWFApprovalStatus::Draft
          #        || custInvoiceTable.WorkflowApprovalStatus == CustFreeInvoiceWFApprovalStatus::Rejected);
          #
          #        custInvoiceLine_ds.allowEdit(isUserTaskOwner || isUserApprovalOwner
          #        || custInvoiceTable.WorkflowApprovalStatus == CustFreeInvoiceWFApprovalStatus::Draft
          #        || custInvoiceTable.WorkflowApprovalStatus == CustFreeInvoiceWFApprovalStatus::Rejected);
          #
          #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, PostalAddress)).allowEdit(isUserTaskOwner || isUserApprovalOwner
          #        || custInvoiceTable.WorkflowApprovalStatus == CustFreeInvoiceWFApprovalStatus::Draft
          #        || custInvoiceTable.WorkflowApprovalStatus == CustFreeInvoiceWFApprovalStatus::Rejected);
          #    }
          #
          #    if (isConfigurationkeyEnabled(configurationKeyNum(FreeTextInvoiceCorrection))
          #    || (BrazilParameters::isEnabled())
          #    )
          #    {
          #        // enable/disable correction tab.
          #        correctionsFastTab.visible(CustRelatedInvoice::doesInvoiceExist(custInvoiceTable.RecId));
          #    }
          #
          #    ret = super();
          #
          #    if (ret && recurrenceInvoice.RecId != 0)
          #    {
          #        buttonCustPostInvoiceJob.enabled(false);
          #        buttonCustPostFactureFreeTxtJob_RU.enabled(false);
          #    }
          #
          #    this.showDimAccount();
          #
          #    // Get delivery info
          #    element.getDeliveryInfo();
          #
          #    dimensionDefaultingControllerHeader.activated();
          #    if (custInvoiceTable.InvoiceDate)
          #    {
          #        dimensionDefaultingControllerHeader.setNonActiveValueTolerance(ErrorTolerance::Warning, custInvoiceTable.InvoiceDate);
          #    }
          #
          #    custInvoiceTable_ds.rereadReferenceDataSources();
          #    LogisticsLocationEntity::showHideEffectiveAddressMessageBar(element, logisticsPostalAddress);
          #    element.setFieldsEditable();
          #
          #    element.enableCreditInvoicingButton();
          #
          #    // Controling the visibility of project group
          #    if (isConfigurationkeyEnabled(configurationKeyNum(ProjBasic)))
          #    {
          #        showProject = custParameters.EnableProject;
          #        if (!showProject)
          #        {
          #            select RecId from custInvLine where custInvLine.ParentRecId == custInvoiceTable.RecId && custInvLine.ProjId != '';
          #                if (custInvLine)
          #                {
          #                    showProject = true;
          #                }
          #        }
          #        cvInvoiceDetailsProjectTabPage.visible(showProject);
          #        custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, ProjId)).visible(showProject);
          #        custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, ProjCategoryId)).visible(showProject);
          #        custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, ProjFundingSource)).visible(showProject);
          #        referenceGroupProjFundingSource.visible(showProject);
          #    }
          #    if (TaxWithholdParameters_IN::checkTaxParameters())
          #    {
          #        element.setTaxWithholdEnabled_IN();
          #    }
          #
          #    element.setTitleText();
          #
          #    if (isUnrealizedVATEnabled)
          #    {
          #        element.noteFormatEdit();
          #    }
          #    if (BrazilParameters::isEnabled())
          #    {
          #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, SalesPurchOperationType_BR)).allowEdit(
          #            !(CustRelatedInvoice::findByCustInvoice(custInvoiceTable.RecId).InvoiceAssociationType == InvoiceAssociationType::AdjustingInvoice));
          #    }
          #
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
          #    {
          #        custInvoiceTable_ds.setCorrFacture_RU();
          #        custInvoiceTable_ds.initCorrFactureDisplay_RU(true);
          #    }
          #
          #    if (custInvoiceLine.ProjId)
          #    {
          #        if (ProjInvoiceTable::isSalesCurrencyLocked(ProjTable::find(custInvoiceLine.ProjId).ProjInvoiceProjId))
          #        {
          #            custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CurrencyCode)).allowEdit(false);
          #        }
          #        else
          #        {
          #            custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CurrencyCode)).allowEdit(true);
          #        }
          #    }
          #
          #    if (custInvoiceTable.ProjIntercompany != '')
          #    {
          #        tabPageLinesProjIntercompany.visible(true);
          #    }
          #    else
          #    {
          #        tabPageLinesProjIntercompany.visible(false);
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #del_paymentModified
          #void del_paymentModified()
          #{
          #}
        ENDSOURCE
        SOURCE #del_cashDiscCodeModified
          #void del_cashDiscCodeModified()
          #{
          #}
        ENDSOURCE
        SOURCE #del_invoiceDateModified
          #void del_invoiceDateModified()
          #{
          #}
        ENDSOURCE
        SOURCE #deleted
          #public void deleted()
          #{
          #    super();
          #
          #    dimensionDefaultingControllerHeader.deleted();
          #}
        ENDSOURCE
        SOURCE #checkFieldsAreChanged
          #/// <summary>
          #/// Sets the boolean variables if the fields are changed.
          #/// </summary>
          #private void checkFieldsAreChanged()
          #{
          #    CustInvoiceTable originalInvoice = custInvoiceTable.orig();
          #
          #    if (custInvoiceTable.RecId == 0)
          #    {
          #        return;
          #    }
          #
          #    recreateTax = custInvoiceTable.hasTaxChanged(originalInvoice, dlvLocationId, origDlvLocationId);
          #
          #    if (TaxWithholdParameters_IN::checkTaxParameters())
          #    {
          #        recreateWithholdTax = custInvoiceTable.hasWithholdTaxChanged_IN(originalInvoice, dlvLocationId, origDlvLocationId);
          #    }
          #
          #    if (custInvoiceTable.CurrencyCode != originalInvoice.CurrencyCode && custInvoiceTable.hasLinesOrCharges())
          #    {
          #        updateCurrencyCode = true;
          #    }
          #
          #    if (countryRegion_EEU)
          #    {
          #        if (custInvoiceTable.InclTax_W != originalInvoice.InclTax_W ||
          #            (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]) &&
          #             custInvoiceTable.vatOnPayment_RU != originalInvoice.vatOnPayment_RU)
          #            )
          #        {
          #            recreateTax              = true;
          #            deleteMarkupDistribution = true;
          #        }
          #    }
          #}
        ENDSOURCE
        SOURCE #rereadExtra_RU
          #void rereadExtra_RU()
          #{
          #    CustInvoiceTable save = CustInvoiceTable::findRecId(custInvoiceTable.RecId);
          #
          #    custInvoiceTable_DS.executeQuery();
          #    custInvoiceTable_DS.findRecord(save);
          #}
        ENDSOURCE
        SOURCE #initCorrectedInvoiceValues_RU
          #void initCorrectedInvoiceValues_RU()
          #{
          #    CustInvoiceLine     custInvoiceLineLocal;
          #    CustInvoiceTrans    custInvoiceTrans;
          #    ;
          #
          #    if (custInvoiceTable.Correct_RU)
          #    {
          #        select firstonly custInvoiceLineLocal
          #            where custInvoiceLineLocal.RefReturnInvoiceTrans_W &&
          #                  custInvoiceLineLocal.ParentRecId == custInvoiceTable.RecId;
          #
          #        if (custInvoiceLineLocal)
          #        {
          #            custInvoiceTrans = CustInvoiceTrans::findRecId(custInvoiceLineLocal.RefReturnInvoiceTrans_W);
          #            custInvoiceTable.CorrectedInvoiceId_RU   = custInvoiceTrans.InvoiceId;
          #            custInvoiceTable.CorrectedInvoiceDate_RU = custInvoiceTrans.InvoiceDate;
          #
          #            custInvoiceTable_ds.initCorrectedInvoiceLines_RU();
          #            this.setCorrFacture_RU();
          #        }
          #    }
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #CustInvoiceLine
          Table               #CustInvoiceLine
          CounterField        #LineNum
          JoinSource          #CustInvoiceTable
          LinkType            #Active
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD AssetId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #/// <summary>
                #/// Defaults the first value model for a valid asset.
                #/// Validates whether the reason code has a Yes mark against Asset on the reason code setup.
                #/// </summary>
                #
                #public void modified()
                #{
                #    AssetBook                       assetBook;
                #    AssetBookTable                  assetBookTable;
                #    AssetBookId                     defaultBookId;
                #    NoYes                           noYes;
                #    LedgerDimensionDefaultAccount   ledgerDimensionDefaultAccount;
                #    PostingProfile                  assetPostingProfile;
                #
                #    defaultBookId = AssetParameters::find().BookIdDefault;
                #
                #    if (custInvoiceLine.AssetId)
                #    {
                #        assetBook = AssetBook::find(custInvoiceLine.AssetId, defaultBookId);
                #
                #        if(assetBook.RecId != 0 &&
                #           (assetBook.Status == AssetStatus::Open || assetBook.Status == AssetStatus::Closed) &&
                #            AssetBookTable::find(defaultBookId).CurrentOperationsTax ==  CurrentOperationsTax::Current)
                #
                #        {
                #            custInvoiceLine.AssetBookId = assetBook.BookId;
                #        }
                #        else
                #        {
                #            select firstonly assetBook
                #            where assetBook.AssetId == custInvoiceLine.AssetId &&
                #                  (assetBook.Status == AssetStatus::Open ||
                #                  assetBook.Status == AssetStatus::Closed)
                #                  join BookId from assetBookTable
                #                  where assetBookTable.BookId == assetBook.BookId &&
                #                        assetBookTable.CurrentOperationsTax == CurrentOperationsTax::Current;
                #
                #            if (assetBook)
                #            {
                #                custInvoiceLine.AssetBookId = assetBook.BookId;
                #            }
                #            else
                #            {
                #                custInvoiceLine.AssetBookId = "";
                #            }
                #        }
                #
                #        distributionTemplateLine.allowEdit(false);
                #
                #        if (isPolishCountryContext && !custInvoiceLine.LedgerDimension)
                #        {
                #            custInvoiceLine.LedgerDimension = AssetParameters::find().AssetDefaultSaleLedgerDimension_PL;
                #        }
                #        else
                #        {
                #            assetPostingProfile = AssetBook::find(custInvoiceLine.AssetId, custInvoiceLine.AssetBookId).PostingProfile;
                #
                #            if (assetPostingProfile)
                #            {
                #                ledgerDimensionDefaultAccount = AssetLedgerAccounts::findAssetLedgerDimension(custInvoiceLine.AssetId, custInvoiceLine.AssetBookId, AssetTransType::DisposalSale, true, assetPostingProfile);
                #            }
                #
                #            if (ledgerDimensionDefaultAccount)
                #            {
                #                custInvoiceLine.LedgerDimension = ledgerDimensionDefaultAccount;
                #            }
                #        }
                #    }
                #    else
                #    {
                #        custInvoiceLine.AssetBookId = "";
                #        distributionTemplateLine.allowEdit(true);
                #    }
                #
                #    super();
                #
                #    if (custInvoiceLine.LedgerDimension == 0)
                #    {
                #        linesDefaultAccountController.clearReference();
                #    }
                #
                #    if (editReasonCode.valueStr() != '')
                #    {
                #        noYes = ReasonTable::find(editReasonCode.valueStr()).Asset;
                #        if (noYes == NoYes::No)
                #        {
                #            custInvoiceLine.editReasonCode(true,'');
                #            element.redraw();
                #        }
                #    }
                #
                #    element.setFieldAccess();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD AssetBookId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    AssetBook::lookupOpenAndClosedBookIdForAsset(_formControl,
                #                                        custInvoiceLine.AssetId,
                #                                        true);
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    LedgerDimensionDefaultAccount   ledgerDimensionDefaultAccount;
                #    PostingProfile                  assetPostingProfile;
                #
                #    super();
                #
                #    assetPostingProfile = AssetBook::find(custInvoiceLine.AssetId, custInvoiceLine.AssetBookId).PostingProfile;
                #
                #    if (assetPostingProfile)
                #    {
                #        ledgerDimensionDefaultAccount = AssetLedgerAccounts::findAssetLedgerDimension(custInvoiceLine.AssetId, custInvoiceLine.AssetBookId, AssetTransType::DisposalSale, true, assetPostingProfile);
                #    }
                #
                #    if (ledgerDimensionDefaultAccount)
                #    {
                #        custInvoiceLine.LedgerDimension = ledgerDimensionDefaultAccount;
                #    }
                #    else
                #    {
                #        custInvoiceLine.LedgerDimension = 0;
                #    }
                #
                #    if (custInvoiceLine.LedgerDimension == 0)
                #    {
                #        linesDefaultAccountController.clearReference();
                #    }
                #
                #    custInvoiceTable_ds.active();
                #
                #    element.setFieldAccess();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD LedgerDimension
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    if (SysCountryRegionCode::isLegalEntityInConsolidatedCountryRegion())
                #    {
                #        element.enableLineChargeButtonByLedgerDimension();
                #    }
                #}
              ENDSOURCE
              SOURCE #resolveReference
                #public Common resolveReference(FormReferenceControl _formReferenceControl)
                #{
                #    return linesDefaultAccountController.resolveReference();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD ProjCategoryId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    custInvoiceLine_ds.rereadReferenceDataSources();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ProjId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    ProjTable   projTable;
                #    CustCurrencyCode currencyCode;
                #
                #    super();
                #
                #    if (!custInvoiceLine.ProjFundingSource)
                #    {
                #        custInvoiceLine.promptCreateFundingSource();
                #    }
                #
                #    //If the project ID has been cleared, clear the category and funding source
                #    if (!custInvoiceLine.ProjId)
                #    {
                #        custInvoiceLine.ProjCategoryId = '';
                #        custInvoiceLine.ProjFundingSource = 0;
                #    }
                #    else
                #    {
                #        custInvoiceLine_ds.rereadReferenceDataSources();
                #        element.setFieldAccess();
                #        custInvoiceLine.write();
                #        projTable = ProjTable::find(custInvoiceLine.ProjId);
                #        if (ProjInvoiceTable::isSalesCurrencyLocked(projTable.ProjInvoiceProjId))
                #        {
                #            currencyCode = ProjInvoiceTable::find(projTable.ProjInvoiceProjId).CurrencyId;
                #            if (currencyCode != custInvoiceTable.CurrencyCode)
                #            {
                #                custInvoiceTable.CurrencyCode = currencyCode;
                #                if (CustInvoiceTable::promptConvertCurrencyCode())
                #                {
                #                    custInvoiceTable.convertCurrencyCode(currencyCode);
                #                }
                #                custInvoiceTable.write();
                #            }
                #            custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CurrencyCode)).allowEdit(false);
                #        }
                #        else
                #        {
                #            custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, CurrencyCode)).allowEdit(true);
                #        }
                #    }
                #
                #    custInvoiceLine_ds.reread();
                #    custInvoiceLine_ds.refresh();
                #    custInvoiceLine_ds.rereadReferenceDataSources();
                #
                #    element.setFieldAccess();
                #}
              ENDSOURCE
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    Args   args = new Args();
                #    Object formRun;
                #
                #    args.name(formStr(ProjTableLookup));
                #    args.caller(_formControl);
                #    args.record(custInvoiceLine);
                #    args.lookupValue(custInvoiceLine.ProjId);
                #
                #    formRun = classfactory.formRunClass(args);
                #    formRun.byProjType(ProjType::TimeMaterial);
                #    formRun.init();
                #
                #    this.performFormLookup(formRun, _formControl);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD ProjFundingSource
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    custInvoiceLine_ds.rereadReferenceDataSources();
                #}
              ENDSOURCE
              SOURCE #resolveReference
                #public Common resolveReference(FormReferenceControl _formReferenceControl)
                #{
                #    return ProjFundingSource::resolveReferenceByContractFSName(_formReferenceControl, ProjTable::find(custInvoiceLine.ProjId).ProjInvoiceProjId);
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    return ProjFundingSource::lookupFundingSourceByContractAndCustomer(_formReferenceControl, ProjTable::find(custInvoiceLine.ProjId).ProjInvoiceProjId, custInvoiceTable.OrderAccount);
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD TaxServiceCode_BR
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    LogisticsPostalAddress  localLogisticsPostalAddress;
                #
                #    localLogisticsPostalAddress = LogisticsPostalAddress::findRecId(custInvoiceTable.PostalAddress);
                #    TaxServiceCode_BR::lookup(_formControl, custInvoiceTable.ServiceCodeOnDlvAddress_BR,
                #                              localLogisticsPostalAddress.CountryRegionId,
                #                              localLogisticsPostalAddress.State,
                #                              localLogisticsPostalAddress.City);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD TDSGroup_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    ;
                #    TaxWithholdGroupHeading::lookupTaxComponentGroup_IN(_formControl, TaxWithholdCodeType_IN::TDS);
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    ;
                #
                #    super();
                #    element.setTaxWithholdEnabled_IN();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD TCSGroup_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    ;
                #
                #    TaxWithholdGroupHeading::lookupTaxComponentGroup_IN(_formControl, TaxWithholdCodeType_IN::TCS);
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    ;
                #
                #    super();
                #    element.setTaxWithholdEnabled_IN();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD CompanyLocation_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxInformation_IN::jumpRefLocationAddressForm(custInvoiceLine.CompanyLocation_IN, this);
                #}
                #
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    custInvoiceLineTaxExtensionIN.TaxInformation_IN =  TaxInformation_IN::findDefaultbyLocation(custInvoiceLine.CompanyLocation_IN).RecId;
                #    custInvoiceLineTaxExtensionIN_ds.object(fieldNum(CustInvoiceLineTaxExtensionIN, TaxInformation_IN)).modified();
                #    element.enableDisableExciseRecordType_IN();
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    return TaxInformation_IN::locationLookup(_formReferenceControl, CompanyInfo::find().RecId);
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD CustomsTariffCodeTable_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #resolveReference
                #public Common resolveReference(FormReferenceControl _formReferenceControl)
                #{
                #    return CustomsTariffCodeTable_IN::resolveCustomsTariffCode(_formReferenceControl, Direction_IN::Export);
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    return CustomsTariffCodeTable_IN::lookupDirectionImportExport(_formReferenceControl, enum2str(Direction_IN::Export));
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD ExciseType_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.enableDisableExciseRecordType_IN();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD CFOPTable_BR
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    Common                      ret;
                #    CFOPAttributesDeterminer_BR cfopAttributes;
                #
                #    if (BrazilParameters::isEnabled())
                #    {
                #        cfopAttributes     = CFOPAttributesDeterminer_BR::construct(custInvoiceLine);
                #
                #        ret = CFOPTable_BR::lookupCFOPTable(_formReferenceControl, cfopAttributes);
                #    }
                #
                #    return ret;
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD AssetId_RU
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    RAssetTable::lookupAccountNum(_formControl, curext(), RAssetTransType::DisposalSale);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD BillingCode
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #/// <summary>
                #/// Adds the 'Go to Main Table Form' link to the billing code context menu.
                #/// </summary>
                #public void jumpRef()
                #{
                #    Args    args;
                #    FormRun formRun;
                #    CustBillingCode custBillingCode;
                #
                #    custBillingCode = CustBillingCode::findBillingCode(custInvoiceLine.BillingCode);
                #    args = new Args(formStr(CustBillingCode));
                #    formRun = classfactory.formRunClass(args);
                #    formRun.init();
                #    formRun.run();
                #    formRun.dataSource(1).findRecord(custBillingCode);
                #    formRun.detach();
                #}
              ENDSOURCE
              SOURCE #lookup
                #/// <summary>
                #/// Perform a custom lookup for the Billing Code based on Billing Classification.
                #/// </summary>
                #/// <param name="_formControl">
                #/// The Calling Form Control
                #/// </param>
                #/// <param name="_filterStr">
                #/// The FilterStr for the Form Control
                #/// </param>
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    SysTableLookup          custBillingCodelookup;
                #    Query                   query = new Query();
                #    QueryBuildDataSource    qbdsCustBillingCode;
                #    QueryBuildDataSource    qbdsCustBillingClassificationCode;
                #    QueryBuildDataSource    qbdsCustBillingCodeVersion;
                #    QueryBuildRange         qbrBillingClassification;
                #
                #    custBillingCodelookup = SysTableLookup::newParameters(tableNum(CustBillingCode), _formControl);
                #
                #    qbdsCustBillingCode = query.addDataSource(tableNum(CustBillingCode));
                #    query.validTimeStateDateRange(dateNull(),dateMax());
                #    qbdsCustBillingCodeVersion = qbdsCustBillingCode.addDataSource(tableNum(CustBillingCodeVersion));
                #    qbdsCustBillingCodeVersion.relations(true);
                #
                #    qbdsCustBillingClassificationCode = qbdsCustBillingCodeVersion.addDataSource(tableNum(CustBillingClassificationCode));
                #    qbdsCustBillingClassificationCode.addLink(fieldNum(CustBillingClassificationCode,CustBillingCode),
                #                                                fieldNum(CustBillingCodeVersion,CustBillingCode));
                #    qbdsCustBillingClassificationCode.relations(true);
                #
                #    qbdsCustBillingCodeVersion.addRange(fieldNum(CustBillingCodeVersion, ValidFrom)).value('..' + SysQuery::value(custInvoiceTable.InvoiceDate));
                #    qbdsCustBillingCodeVersion.addRange(fieldNum(CustBillingCodeVersion, ValidTo)).value(SysQuery::value(custInvoiceTable.InvoiceDate) + '..');
                #
                #    qbrBillingClassification = qbdsCustBillingClassificationCode.addRange(fieldNum(CustBillingClassificationCode, CustBillingClassification));
                #    qbrBillingClassification.value(SysQuery::value(custInvoiceTable.CustBillingClassification));
                #
                #    custBillingCodelookup.parmQuery(query);
                #
                #    custBillingCodelookup.addLookupfield(fieldNum(CustBillingCode, BillingCode));
                #    custBillingCodelookup.addLookupfield(fieldNum(CustBillingCode, Description));
                #
                #    custBillingCodelookup.performFormLookup();
                #}
              ENDSOURCE
              SOURCE #modified
                #/// <summary>
                #/// This event occurs when the Billing Code field is modified.
                #/// </summary>
                #public void modified()
                #{
                #    super();
                #    if (customFieldDialogOpen)
                #    {
                #        return;
                #    }
                #
                #    if (custInvoiceLine.BillingCode != '')
                #    {
                #        //Prompts a dialog for confirmation of change in billing code
                #        if ( custInvoiceLine.promptBillingCodeChanged() == DialogButton::Yes )
                #        {
                #            element.syncBillingCodeLookup();
                #
                #            //Sets the default values for the selected Billing Code
                #            custInvoiceLine.setBillingCodeDefaults( billingCodeLookup );
                #
                #            mapCustCustomFieldElements = null;
                #            if (!element.showCustomFieldDialog())
                #            {
                #                return;
                #            }
                #
                #            if (custBillingCodeVersion.UseScript == UseRateScript::No)
                #            {
                #                //Convert currency based on amount defined in Billing Code
                #                custInvoiceLine.convertCurrencyCode(custInvoiceTable.CurrencyCode,custInvoiceTable.InvoiceDate,
                #                                                  CustInvoiceChangeCurrencyOption::ResetToBillingCodeRate);
                #            }
                #            else
                #            {
                #                //execute script associated with the billing code
                #                element.executeBillingCodeScript();
                #            }
                #        }
                #        else
                #        {
                #            custInvoiceLine.BillingCode = custInvoiceLineBillingCode;
                #        }
                #    }
                #    else
                #    {
                #        // If Billing code is empty clear's Reference ID for Billing Code
                #        custInvoiceLine.CustBillingCode = 0 ;
                #    }
                #
                #    element.enableDistButtonBasedOnAmountCur();
                #
                #    if (custInvoiceLine.BillingCode != '')
                #    {
                #        custInvoiceTable_ds.object(fieldNum(CustInvoiceTable,CustBillingClassification)).allowEdit(false);
                #    }
                #    else
                #    {
                #        element.allowEditCustBillingClassification();
                #    }
                #
                #    //Enable or Disable fields based on billing code
                #    custInvoiceLine_ds.setAllowEdit();
                #    element.setFieldAccess();
                #    element.redraw();
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ServiceInvoice_BR
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    element.setFieldAccess();
                #
                #    custinvoiceLine_ds.refresh();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #editCorrName_RU
          #// BP Deviation documented
          #public edit Description editCorrName_RU(boolean _set, CustInvoiceLine _custInvoiceLine, Description _name)
          #{
          #    if (_set && ! _name)
          #    {
          #        CustInvoiceLineCorrLink_RU::clearLinks(_custInvoiceLine.RecId);
          #
          #        custInvoiceLineCorrLink_RU_DS.reread();
          #        custInvoiceLineCorrLink_RU_DS.active();
          #    }
          #
          #    return custInvoiceTransCorrected_RU.Name;
          #}
        ENDSOURCE
        SOURCE #initTmpCustVendTrans
          #void initTmpCustVendTrans()
          #{
          #    CustInvoiceTrans    custInvoiceTrans;
          #
          #    delete_from tmpCustVendTrans;
          #
          #    if (custInvoiceLine.RefReturnInvoiceTrans_W)
          #    {
          #        select InvoiceId, LedgerDimension, Name, LineAmount from custInvoiceTrans
          #            where custInvoiceTrans.RecId == custInvoiceLine.RefReturnInvoiceTrans_W;
          #
          #        tmpCustVendTrans.Invoice    = custInvoiceTrans.InvoiceId;
          #        tmpCustVendTrans.AccountNum = DimensionAttributeValueCombination::getDisplayValue(custInvoiceTrans.LedgerDimension);
          #        tmpCustVendTrans.Txt        = custInvoiceTrans.Name;
          #        tmpCustVendTrans.AmountCur  = custInvoiceTrans.LineAmount;
          #        tmpCustVendTrans.insert();
          #
          #        tmpCustVendTrans_ds.setRecord(tmpCustVendTrans);
          #    }
          #
          #    tmpCustVendTrans_ds.research();
          #}
        ENDSOURCE
        SOURCE #setCreditNoteTabVisibility
          #void setCreditNoteTabVisibility()
          #{
          #    if (custInvoiceLine.RefReturnInvoiceTrans_W || custInvoiceLine.CreditNoteInternalRef_PL)
          #    {
          #        cvInvoiceDetailsReasonsTabPage.visible(false);
          #        cvInvoiceDetailsCreditNoteTabPage.visible(true);
          #    }
          #    else
          #    {
          #        cvInvoiceDetailsReasonsTabPage.visible(true);
          #        cvInvoiceDetailsCreditNoteTabPage.visible(false);
          #    }
          #}
        ENDSOURCE
        SOURCE #create
          #public void create(boolean _append = true)
          #{
          #    CustInvoiceLine tmpCustInvoiceLine;
          #    int             lineCount;
          #
          #    if (countryRegion_EEU)
          #    {
          #        // Check if there is a credit note corrective line created
          #        select RecId from tmpCustInvoiceLine
          #            where tmpCustInvoiceLine.ParentRecId == custInvoiceTable.RecId &&
          #                tmpCustInvoiceLine.CreditNoteInternalRef_PL != 0;
          #
          #        if (tmpCustInvoiceLine.RecId)
          #        {
          #            // Force the new line to be created at the end
          #            select count (RecId) from tmpCustInvoiceLine
          #                where tmpCustInvoiceLine.ParentRecId == custInvoiceTable.RecId;
          #
          #            lineCount = int642int(tmpCustInvoiceLine.RecId);
          #            super(_append);
          #            custInvoiceLine.LineNum = lineCount + 1;
          #        }
          #        else
          #        {
          #            super(_append);
          #        }
          #    }
          #    else
          #    {
          #        super(_append);
          #    }
          #
          #
          #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)))
          #    {
          #        recreateTax = true;
          #    }
          #
          #}
          #
          #
        ENDSOURCE
        SOURCE #validateWrite
          #/// <summary>
          #/// Determines whether the current record is valid and ready to be written to the database.
          #/// </summary>
          #/// <returns>
          #/// true if the record is valid; otherwise, false.
          #/// </returns>
          #
          #public boolean validateWrite()
          #{
          #    boolean ret;
          #
          #    if (!custInvoiceLine.ParentRecId)
          #    {
          #        custInvoiceLine.ParentRecId = custInvoiceTable.RecId;
          #    }
          #
          #    if (custInvoiceLine.orig().AmountCur != custInvoiceLine.AmountCur)
          #    {
          #        custInvoiceTable_ds.setTouched();
          #    }
          #
          #    ret = super();
          #
          #    if (SysCountryRegionCode::isLegalEntityInConsolidatedCountryRegion())
          #    {
          #        copyTaxGroupToMarkupTrans = DialogButton::No;
          #
          #        if (ret && custInvoiceLine.TaxGroup != custInvoiceLine.orig().TaxGroup)
          #        {
          #            copyTaxGroupToMarkupTrans   = MarkupTrans::promptCopyTaxGroupToMarkupTrans(custInvoiceLine.TableId, custInvoiceLine.RecId);
          #            ret                         = copyTaxGroupToMarkupTrans != DialogButton::Cancel;
          #        }
          #    }
          #
          #    if(BrazilParameters::isEnabled())
          #    {
          #        copyTaxItemGroupToMarkupTrans = DialogButton::No;
          #
          #        if (ret && custInvoiceLine.TaxItemGroup != custInvoiceLine.orig().TaxItemGroup)
          #        {
          #            copyTaxItemGroupToMarkupTrans   = MarkupTrans::promptCopyTaxItemGroupToMarkupTrans_BR(custInvoiceLine.TableId, custInvoiceLine.RecId);
          #            ret                             = copyTaxItemGroupToMarkupTrans != DialogButton::Cancel;
          #        }
          #    }
          #
          #    if (ret)
          #    {
          #        if (editReasonCode.valueStr() == '')
          #        {
          #            if (custInvoiceLine.AssetId && AssetParameters::find().DisposalSale == NoYes::Yes)
          #            {
          #                editReasonCode.mandatory(true);
          #                ret = checkFailed(strFmt("@SYS116347", fieldPName(ReasonTableRef,Reason)));
          #                editReasonCode.setFocus();
          #
          #            }
          #            else
          #            {
          #                editReasonCode.mandatory(false);
          #                editReasonCode.lostFocus();
          #            }
          #        }
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #initValue
          #void initValue()
          #{
          #    super();
          #    custInvoiceLine.initFromCustInvoiceTable(custInvoiceTable);
          #}
        ENDSOURCE
        SOURCE #written
          #public void written()
          #{
          #    CustInvoiceTable                        localCustInvoiceTable;
          #    WorkflowTable                           workflowTableFieldList;
          #    CustInvLineBillCodeCustomFieldBase baseValue;
          #    boolean isBillingCodeModified;
          #
          #    custInvoiceLine_ds.checkFieldsAreChanged();
          #    if (isBillingClassificationEnabled)
          #    {
          #        isBillingCodeModified = custInvoiceLine.orig().CustBillingCode != custInvoiceLine.CustBillingCode ? true : false;
          #    }
          #
          #    // ensure default dimension is set on the line
          #    if (!custInvoiceLine.DefaultDimension)
          #    {
          #        // update the default dimension on the line
          #        custInvoiceLine.DefaultDimension =  custInvoiceTable.DefaultDimension;
          #
          #        if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
          #        {
          #            if (custInvoiceTable.AgreementHeaderExt_RU)
          #            {
          #                custInvoiceLine.DefaultDimension = AgreementHeaderExt_RU::clearAgreementDimension(custInvoiceLine.DefaultDimension);
          #            }
          #        }
          #    }
          #
          #    // force the line dimensions to redraw
          #    dimensionDefaultingControllerLine.activated(true);
          #
          #    if (SysCountryRegionCode::isLegalEntityInConsolidatedCountryRegion())
          #    {
          #        if (copyTaxGroupToMarkupTrans == DialogButton::Yes || copyTaxGroupToMarkupTrans == DialogButton::YesToAll)
          #        {
          #            MarkupTrans::updateTaxGroup(custInvoiceLine.TableId, custInvoiceLine.RecId, custInvoiceLine.TaxGroup, custInvoiceLine.orig().TaxGroup, copyTaxGroupToMarkupTrans);
          #            copyTaxGroupToMarkupTrans = DialogButton::No;
          #        }
          #    }
          #
          #    if(BrazilParameters::isEnabled())
          #    {
          #        if (copyTaxItemGroupToMarkupTrans == DialogButton::Yes || copyTaxItemGroupToMarkupTrans == DialogButton::YesToAll)
          #        {
          #            MarkupTrans::updateTaxItemGroup_BR(custInvoiceLine.TableId, custInvoiceLine.RecId, custInvoiceLine.TaxItemGroup, custInvoiceLine.orig().TaxItemGroup, copyTaxItemGroupToMarkupTrans);
          #            copyTaxItemGroupToMarkupTrans = DialogButton::No;
          #        }
          #    }
          #
          #    super();
          #
          #    if (isPolishCountryContext && !taxServiceTariffLine.ParentRecId)
          #    {
          #        taxServiceTariffLine.ParentRecId = custInvoiceLine.RecId;
          #    }
          #
          #    if (TaxParameters::find().CashDiscOnInvoice)
          #    {
          #        if (custInvoiceLine.AmountCur < 0)
          #        {
          #            select firstonly OrderAccount, RecId from localCustInvoiceTable
          #                where custInvoiceLine.ParentRecId == localCustInvoiceTable.RecId;
          #
          #            if (CustTable::find(localCustInvoiceTable.OrderAccount).CashDisc)
          #            {
          #                info("@SYS99050");
          #            }
          #        }
          #    }
          #
          #    if (isBillingClassificationEnabled && custInvoiceLine.RecId && custInvoiceLine.CustBillingCode)
          #    {
          #        ttsbegin;
          #        if (isBillingCodeModified)
          #        {
          #            delete_from baseValue where baseValue.CustInvoiceLine == custInvoiceLine.RecId;
          #        }
          #        CustInvLineBillCodeCustomFieldBase::writeCustCustomFields(mapCustCustomFieldElements,CustCustomFieldSourceType::CustInvoiceLine, custInvoiceLine);
          #        ttscommit;
          #    }
          #
          #    // delete the taxes if they need to be recreated
          #    element.deleteTaxForDocumentHeader();
          #
          #    // Select the default workflow configuration corresponding to the free text invoice template
          #    select firstOnly DefaultConfiguration from workflowTableFieldList
          #        where workflowTableFieldList.TemplateName == 'CustFreeTextInvoiceTemplate'
          #            && workflowTableFieldList.DefaultConfiguration == NoYes::Yes
          #            && workflowTableFieldList.DataArea == curext();
          #
          #    // If neither active free text invoice template exist nor default workflow configuration exist corresponding to the free text
          #    // invoice template and free text invoice can be edited, then enable the post button
          #
          #    if ((!WorkflowTable::findActiveTemplate('CustFreeTextInvoiceTemplate') || !workflowTableFieldList)
          #        && custInvoiceTable.isEditable())
          #    {
          #        buttonCustPostInvoiceJob.enabled(true);
          #    }
          #    else
          #    {
          #        // Checks to see if workflow approval status is neither 'Rejected' nor 'ChangeRequested', only then change the workflow approval
          #        // status accordingly and enable the post button based on the invoice line amount.
          #        if (custInvoiceTable.WorkflowApprovalStatus != CustFreeInvoiceWFApprovalStatus::Rejected
          #            && custInvoiceTable.WorkflowApprovalStatus != CustFreeInvoiceWFApprovalStatus::ChangeRequested
          #            && custInvoiceTable.WorkflowApprovalStatus != CustFreeInvoiceWFApprovalStatus::PendingCompletion)
          #        {
          #            custInvoiceTable.WorkflowApprovalStatus = CustFreeInvoiceWFApprovalStatus::Draft;
          #            buttonCustPostInvoiceJob.enabled(false);
          #
          #            custInvoiceTable.doUpdate();
          #        }
          #    }
          #
          #    // This form is modified to use Unit of Work and reread() method is not allowed.
          #    this.research(true);
          #
          #    element.updateWorkflowControls();
          #
          #    element.enableCreditInvoicingButton();
          #
          #    if (BrazilParameters::isEnabled())
          #    {
          #        custInvoiceTable_ds.research(true);
          #    }
          #}
        ENDSOURCE
        SOURCE #deleted
          #public void deleted()
          #{
          #    super();
          #
          #    if (custInvoiceLine.CreditNoteInternalRef_PL &&
          #        ! custInvoiceLine_DS.anyMarked())
          #    {
          #        custInvoiceTable_DS.research(true);
          #    }
          #
          #    accountingDistributionsLineButton.enabled(false);
          #    dimensionDefaultingControllerLine.deleted();
          #
          #    if (SysCountryRegionCode::isLegalEntityInConsolidatedCountryRegion())
          #    {
          #        lineChargeButton.enabled(false);
          #    }
          #
          #    // require the taxes to be recreated since existing ones are being deleted
          #    recreateTax = true;
          #    element.deleteTaxForDocumentHeader();
          #
          #    if (TaxWithholdParameters_IN::checkTaxParameters())
          #    {
          #        recreateWithholdTax = true;
          #    }
          #
          #    element.allowEditCustBillingClassification();
          #
          #    element.setFieldsAccessAsset(true);
          #}
        ENDSOURCE
        SOURCE #allowEditLine_W
          #void allowEditLine_W()
          #{
          #    boolean isAllowEdit;
          #
          #    // Verify if corrective line was created
          #    if (custInvoiceLine.CreditNoteInternalRef_PL)
          #    {
          #        // Disable the negative line of the credit note
          #        if (custInvoiceLine.RefReturnInvoiceTrans_W)
          #        {
          #            allowEditFieldsOnFormDS_W(custInvoiceLine_DS, false);
          #            allowEditFieldsOnFormDS_W(custInvoiceLineAsset_DS, false);
          #            editReasonCode.allowEdit(false);
          #            editReasonComment.allowEdit(false);
          #            editReasonCodeCreditNote.allowEdit(false);
          #            editReasonCommentCreditNote.allowEdit(false);
          #            dimensionDefaultingControllerLine.setEditability(false);
          #
          #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, TaxGroup)).allowEdit(custInvoiceTable_DS.allowEdit());
          #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, TaxItemGroup)).allowEdit(custInvoiceTable_DS.allowEdit());
          #        }
          #        else
          #        {
          #            allowEditFieldsOnFormDS_W(custInvoiceLine_DS, custInvoiceTable_DS.allowEdit());
          #            allowEditFieldsOnFormDS_W(custInvoiceLineAsset_DS, custInvoiceTable_DS.allowEdit());
          #            editReasonCode.allowEdit(custInvoiceTable_DS.allowEdit());
          #            editReasonComment.allowEdit(custInvoiceTable_DS.allowEdit());
          #            editReasonCodeCreditNote.allowEdit(custInvoiceTable_DS.allowEdit());
          #            editReasonCommentCreditNote.allowEdit(custInvoiceTable_DS.allowEdit());
          #            dimensionDefaultingControllerLine.setEditability(custInvoiceTable_DS.allowEdit());
          #        }
          #    }
          #    else
          #    {
          #        if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
          #        {
          #            // For Russia a negative credit note line is always disabled irrespective of the corrective line
          #            if (custInvoiceLine.RefReturnInvoiceTrans_W)
          #            {
          #                allowEditFieldsOnFormDS_W(custInvoiceLine_DS, false);
          #                editReasonCode.allowEdit(false);
          #                editReasonComment.allowEdit(false);
          #                editReasonCodeCreditNote.allowEdit(false);
          #                editReasonCommentCreditNote.allowEdit(false);
          #                dimensionDefaultingControllerLine.setEditability(false);
          #
          #                custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, TaxGroup)).allowEdit(custInvoiceTable_DS.allowEdit());
          #                custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, TaxItemGroup)).allowEdit(custInvoiceTable_DS.allowEdit());
          #            }
          #            else
          #            {
          #                allowEditFieldsOnFormDS_W(custInvoiceLine_DS, custInvoiceTable_DS.allowEdit());
          #                editReasonCode.allowEdit(custInvoiceTable_DS.allowEdit());
          #                editReasonComment.allowEdit(custInvoiceTable_DS.allowEdit());
          #                editReasonCodeCreditNote.allowEdit(custInvoiceTable_DS.allowEdit());
          #                editReasonCommentCreditNote.allowEdit(custInvoiceTable_DS.allowEdit());
          #                dimensionDefaultingControllerLine.setEditability(custInvoiceTable_DS.allowEdit());
          #            }
          #            allowEditFieldsOnFormDS_W(custInvoiceLineAsset_DS, false);
          #        }
          #        else
          #        {
          #            isAllowEdit = custInvoiceTable_DS.allowEdit();
          #            if (isAllowEdit
          #                && custInvoiceLine.CorrectedCustInvoiceLine
          #                && custInvoiceLine.AssetId
          #                && custInvoiceLine.AssetBookId
          #                && SysCountryRegionCode::isLegalEntityInCountryRegion([#isoEE, #isoLT]))
          #            {
          #                isAllowEdit = false;
          #            }
          #
          #            allowEditFieldsOnFormDS_W(custInvoiceLine_DS, isAllowEdit);
          #            allowEditFieldsOnFormDS_W(custInvoiceLineAsset_DS, isAllowEdit);
          #            editReasonCode.allowEdit(isAllowEdit);
          #            editReasonComment.allowEdit(isAllowEdit);
          #            editReasonCodeCreditNote.allowEdit(isAllowEdit);
          #            editReasonCommentCreditNote.allowEdit(isAllowEdit);
          #            dimensionDefaultingControllerLine.setEditability(isAllowEdit);
          #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, TaxGroup)).allowEdit(custInvoiceTable_DS.allowEdit());
          #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, TaxItemGroup)).allowEdit(custInvoiceTable_DS.allowEdit());
          #        }
          #    }
          #}
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)))
          #    {
          #        element.setupRecalculateButtonStatus();
          #        element.setupCustomFieldButtonStatus();
          #
          #        if (PublicSectorUtils::isFrenchRegulatoryEnabled())
          #        {
          #            custDirective_PSN_ds.executeQuery();
          #        }
          #    }
          #
          #    dimensionDefaultingControllerLine.activated();
          #
          #    if (custInvoiceTable.InvoiceDate)
          #        dimensionDefaultingControllerLine.setNonActiveValueTolerance(ErrorTolerance::Warning, custInvoiceTable.InvoiceDate);
          #
          #    if (custInvoiceLine.AssetId)
          #    {
          #        distributionTemplateLine.allowEdit(false);
          #    }
          #    else
          #    {
          #        distributionTemplateLine.allowEdit(true);
          #    }
          #    if (isConfigurationkeyEnabled(configurationKeyNum(PublicSector)))
          #    {
          #        this.setAllowEdit();
          #    }
          #
          #    element.setFieldAccess();
          #
          #    element.enableCreditInvoicingButton();
          #
          #    element.updateFormState(custInvoiceLine.SourceDocumentLine);
          #
          #    if (SysCountryRegionCode::isLegalEntityInConsolidatedCountryRegion())
          #    {
          #        element.enableLineChargeButtonByLedgerDimension();
          #    }
          #
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIN]))
          #    {
          #        element.enableDisableExciseRecordType_IN();
          #        if (TaxWithholdParameters_IN::checkTaxParameters())
          #        {
          #            element.setTaxWithholdEnabled_IN();
          #            taxInformation_IN_ds.executeQuery();
          #        }
          #    }
          #
          #    if (countryRegion_EEU)
          #    {
          #        this.allowEditLine_W();
          #        this.setCreditNoteTabVisibility();
          #        this.initTmpCustVendTrans();
          #    }
          #
          #    this.setAssetSaleFactorStatus();
          #
          #    if (BrazilParameters::isEnabled())
          #    {
          #        element.enableLineFiscalDocumentText_BR();
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #setTouched
          #/// <summary>
          #/// Reset some informtaion when the current record is updated.
          #/// </summary>
          #void setTouched()
          #{
          #    custInvoiceTable_ds.setTouched();
          #}
        ENDSOURCE
        SOURCE #checkFieldsAreChanged
          #/// <summary>
          #/// Sets the boolean variables if the fields are changed.
          #/// </summary>
          #private void checkFieldsAreChanged()
          #{
          #    recreateTax = custInvoiceLine.hasTaxChanged(custInvoiceLine.orig());
          #    if (TaxWithholdParameters_IN::checkTaxParameters())
          #    {
          #        recreateWithholdTax = custInvoiceLine.hasWithholdTaxChanged_IN(custInvoiceLine.orig());
          #    }
          #}
        ENDSOURCE
        SOURCE #templateName
          #/// <summary>
          #/// Sets or gets the information of the <c>AccountingDistributionTemplate</c> record for the creation of distributions.
          #/// </summary>
          #/// <param name="_set">
          #/// The indicator whether it is update.
          #/// </param>
          #/// <param name="_templateName">
          #/// The name of the distribution template to be used to create distributions.
          #/// </param>
          #/// <returns>
          #/// The name of the distribution template.
          #/// </returns>
          #// BP Deviation Documented
          #public edit TemplateName templateName(boolean _set, TemplateName _templateName)
          #{
          #    TemplateName                        templateName = "";
          #    AccountingDistributionTemplate      accountingDistributionTemplate;
          #
          #    if (_set)
          #    {
          #        if (_templateName == "")
          #        {
          #            custInvoiceLine.AccountingDistributionTemplate = 0;
          #        }
          #        else
          #        {
          #            accountingDistributionTemplate = AccountingDistributionTemplate::findByName(_templateName);
          #
          #            if (accountingDistributionTemplate)
          #            {
          #                custInvoiceLine.AccountingDistributionTemplate = accountingDistributionTemplate.RecId;
          #            }
          #            else
          #            {
          #                custInvoiceLine.AccountingDistributionTemplate = 0;
          #            }
          #        }
          #    }
          #    else
          #    {
          #        if (custInvoiceLine.AccountingDistributionTemplate != 0)
          #        {
          #            templateName = AccountingDistributionTemplate::find(custInvoiceLine.AccountingDistributionTemplate).Name;
          #        }
          #    }
          #
          #    return templateName;
          #}
        ENDSOURCE
        SOURCE #setAllowEdit
          #/// <summary>
          #/// Sets the editable status of the fields in <c>CustInvoiceLine</c>.
          #/// </summary>
          #/// <remarks>
          #/// Sets the editable status of the AmountCur,AmountDetails,LedgerAccount field.
          #/// </remarks>
          #void setAllowEdit()
          #{
          #    if (isBillingClassificationEnabled)
          #    {
          #        element.syncBillingCodeLookup();
          #        if (billingCodeLookup)
          #        {
          #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, AmountCur)).allowEdit(custBillingCodeVersion.AllowChangeAmount);
          #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, AmountDetails)).allowEdit(custBillingCodeVersion.AllowChangeAmount);
          #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, LedgerDimension)).allowEdit(custBillingCodeVersion.AllowChangeLedgerAccount);
          #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, UnitPrice)).allowEdit(custBillingCodeVersion.AllowChangeAmount);
          #            custInvoiceLine_ds.rereadReferenceDataSources();
          #        }
          #        else
          #        {
          #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, AmountCur)).allowEdit(true);
          #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, LedgerDimension)).allowEdit(true);
          #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, AmountDetails)).allowEdit(true);
          #            custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, UnitPrice)).allowEdit(true);
          #        }
          #    }
          #}
        ENDSOURCE
        SOURCE #setAssetSaleFactorStatus
          #public void setAssetSaleFactorStatus()
          #{
          #    boolean enableField;
          #
          #    if (isPolishCountryContext)
          #    {
          #        if (custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, AssetId)).allowEdit()
          #            && custInvoiceLine_ds.object(fieldNum(CustInvoiceLine, AssetBookId)).allowEdit()
          #            && custInvoiceLine.AssetId != ''
          #            && custInvoiceLine.AssetBookId != '')
          #        {
          #            enableField = true;
          #        }
          #
          #        custInvoiceLineAsset_ds.object(fieldNum(CustInvoiceLineAsset, AssetSaleFactor)).allowEdit(enableField);
          #    }
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #CustRelatedInvoice
          Table               #CustRelatedInvoice
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #public void init()
          #{
          #    super();
          #
          #    this.cacheAddMethod(tableMethodStr(CustRelatedInvoice, displayInvoiceDate));
          #    this.cacheAddMethod(tableMethodStr(CustRelatedInvoice, displayInvoiceAmount));
          #    this.cacheAddMethod(tableMethodStr(CustRelatedInvoice, displayInvoiceId));
          #}
        ENDSOURCE
        SOURCE #executeQuery
          #public void executeQuery()
          #{
          #    QueryBuildDataSource custRealtedInvoiceDS;
          #
          #    custRealtedInvoiceDS = this.query().dataSourceTable(tableNum(CustRelatedInvoice));
          #
          #    custRealtedInvoiceDS.clearRanges();
          #    custRealtedInvoiceDS.clearDynalinks();
          #
          #    custRealtedInvoiceDS.addRange(
          #        fieldNum(CustRelatedInvoice, OriginalCustInvoice)).value(
          #        queryValue(CustRelatedInvoice::findByCustInvoice(custInvoiceTable.RecId).OriginalCustInvoice));
          #
          #    custRealtedInvoiceDS.addOrderByField(fieldNum(CustRelatedInvoice, RecId), SortOrder::Ascending);
          #
          #    super();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #RecurrenceInvoice
          Table               #RecurrenceInvoice
          JoinSource          #CustInvoiceTable
          LinkType            #Active
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #TaxInformation_IN
          Table               #TaxInformation_IN
          AllowCheck          #No
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #CustInvoiceLineTaxExtensionIN
        ENDPROPERTIES
        
        FIELDLIST
          REFERENCEFIELD SalesTaxRegistrationNumber
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxRegistrationNumbers_IN::jumpRef(
                #        TaxRegistrationNumbers_IN::find(taxInformation_IN.SalesTaxRegistrationNumber).RegistrationNumber,
                #        TaxType_IN::SalesTax,
                #        custInvoiceLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD TIN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxRegistrationNumbers_IN::jumpRef(
                #        TaxRegistrationNumbers_IN::find(taxInformation_IN.tin).RegistrationNumber,
                #        TaxType_IN::VAT,
                #        custInvoiceLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD TAN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxWithholdRegNumbers_IN::jumpRef(
                #        TaxWithholdRegNumbers_IN::find(taxInformation_IN.tan).RegistrationNumber,
                #        custInvoiceLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD ManECCRegistrationNumberTable
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxRegistrationNumbers_IN::jumpRef(
                #        TaxRegistrationNumbers_IN::find(taxInformation_IN.ManECCRegistrationNumberTable).RegistrationNumber,
                #        TaxType_IN::Excise,
                #        custInvoiceLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD TraderECCRegistrationNumberTable
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxRegistrationNumbers_IN::jumpRef(
                #        TaxRegistrationNumbers_IN::find(taxInformation_IN.TraderECCRegistrationNumberTable).RegistrationNumber,
                #        TaxType_IN::Excise,
                #        custInvoiceLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD IECRegistrationNumberTable
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxRegistrationNumbers_IN::jumpRef(
                #        TaxRegistrationNumbers_IN::find(taxInformation_IN.iecRegistrationNumberTable).RegistrationNumber,
                #        TaxType_IN::Customs,
                #        custInvoiceLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD STCRegistrationNumberTable
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxRegistrationNumbers_IN::jumpRef(
                #        TaxRegistrationNumbers_IN::find(taxInformation_IN.stcRegistrationNumberTable).RegistrationNumber,
                #        TaxType_IN::ServiceTax,
                #        custInvoiceLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD ECCNumber
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxRegistrationNumbers_IN::jumpRef(
                #        TaxRegistrationNumbers_IN::find(taxInformation_IN.eccNumber).RegistrationNumber,
                #        TaxType_IN::Excise,
                #        custInvoiceLine);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #TmpCustVendTrans
          Table               #TmpCustVendTrans
          AllowEdit           #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #CustInvoiceLineTaxExtensionIN
          Table               #CustInvoiceLineTaxExtensionIN
          JoinSource          #CustInvoiceLine
          LinkType            #Passive
        ENDPROPERTIES
        
        FIELDLIST
          REFERENCEFIELD TaxInformation_IN
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    TaxInformation_IN::jumpRef(custInvoiceLineTaxExtensionIN.TaxInformation_IN, this);
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    taxInformation_IN_DS.linkActive();
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    return TaxInformation_IN::lookup(_formReferenceControl, custInvoiceLine.CompanyLocation_IN);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #public void init()
          #{
          #    if (this.isNeeded())
          #    {
          #        this.linkType(FormLinkType::InnerJoin);
          #    }
          #    super();
          #}
        ENDSOURCE
        SOURCE #isNeeded
          #public boolean isNeeded()
          #{
          #    return SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIN]);
          #}
        ENDSOURCE
        SOURCE #initValue
          #public void initValue()
          #{
          #    super();
          #    custInvoiceLineTaxExtensionIN.TaxModelDocLineExtensionIN::init(custInvoiceLine);
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #CustInvoiceTableExtensionCN
          Table               #CustInvoiceTableExtension_CN
          JoinSource          #CustInvoiceTable
          LinkType            #Passive
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #public void init()
          #{
          #    if (CustParameters::isTaxIntegrationSystem_CN())
          #    {
          #        custInvoiceTableExtensionCN_ds.linkType(FormLinkType::OuterJoin);
          #        custInvoiceTableExtensionCN_ds.optionalRecordMode(OptionalRecordMode::None);
          #    }
          #    super();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #CustInvoiceLineAsset
          Table               #CustInvoiceLineAsset
          JoinSource          #CustInvoiceLine
          LinkType            #Passive
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #public void init()
          #{
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoPL]))
          #    {
          #        custInvoiceLineAsset_ds.linkType(FormLinkType::OuterJoin);
          #        custInvoiceLineAsset_ds.optionalRecordMode(OptionalRecordMode::None);
          #    }
          #    super();
          #}
          #
        ENDSOURCE
        SOURCE #deleted
          #public void deleted()
          #{
          #    super();
          #    element.setFieldsAccessAsset(true);
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #CustInvoiceTableSymbol
          Table               #CustInvoiceTableSymbol
          JoinSource          #CustInvoiceTable
          LinkType            #Passive
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #public void init()
          #{
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoCZ]))
          #    {
          #        // Only enable the symbol datasource if the country context is correct
          #        custInvoiceTableSymbol_DS.linkType(FormLinkType::OuterJoin);
          #    }
          #
          #    super();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #TaxServiceTariffHeader
          Table               #TaxServiceTariff
          OnlyFetchActive     #Yes
          JoinSource          #CustInvoiceTable
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #writing
          #public void writing()
          #{
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoPL]))
          #    {
          #        taxServiceTariffHeader.ParentRecId = custInvoiceTable.RecId;
          #        taxServiceTariffHeader.ParentTableId = custInvoiceTable.TableId;
          #    }
          #
          #    super();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #TaxServiceTariffLine
          Table               #TaxServiceTariff
          OnlyFetchActive     #Yes
          JoinSource          #CustInvoiceLine
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #writing
          #public void writing()
          #{
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoPL]))
          #    {
          #        if (!taxServiceTariffLine.ParentRecId)
          #        {
          #            taxServiceTariffLine.ParentRecId = custInvoiceLine.RecId;
          #        }
          #
          #        if (!taxServiceTariffLine.ParentTableId)
          #        {
          #            taxServiceTariffLine.ParentTableId = custInvoiceLine.TableId;
          #        }
          #    }
          #
          #    super();
          #}
        ENDSOURCE
        SOURCE #create
          #public void create(boolean _append = false)
          #{
          #    super(_append);
          #
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoPL]))
          #    {
          #        if (taxServiceTariffHeader.ServiceTariffNumber && !custInvoiceLine.RecId)
          #        {
          #            // Set the service tariff number
          #            taxServiceTariffLine.ServiceTariffNumber = taxServiceTariffHeader.ServiceTariffNumber;
          #        }
          #    }
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #CustDirective_PSN
          Table               #CustDirective_PSN
          AllowCheck          #No
          JoinSource          #CustInvoiceLine
          LinkType            #Passive
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #active
          #/// <summary>
          #/// Performs any processing that needs to occur when the CustDirective_PSN datasource changes records.
          #/// </summary>
          #/// <returns>
          #/// a non-zero <c>integer</c> value if the record changes successfully; otherwise, zero.
          #/// </returns>
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #
          #    element.setFieldsEditableForDirective();
          #
          #    return ret;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #CustInvoiceTableExtensionTH
          Table               #CustInvoiceTableExtensionTH
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #CustInvoiceTable
          LinkType            #Passive
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD NoteFormat
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    element.noteFormatEdit();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #public void init()
          #{
          #    isCustInvoiceTableExtensionTHEnabled = CustInvoiceTableExtensionTH::isExtensionEnabled();
          #
          #    if (isCustInvoiceTableExtensionTHEnabled)
          #    {
          #        this.linkType(FormLinkType::OuterJoin);
          #        this.optionalRecordMode(OptionalRecordMode::None);
          #    }
          #
          #    super();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #CustInvoiceLineCorrLink_RU
          Table               #CustInvoiceLineCorrLink_RU
          JoinSource          #CustInvoiceLine
          LinkType            #Passive
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #writing
          #public void writing()
          #{
          #    if (custInvoiceLineCorrLink_RU.CorrTransRecId)
          #    {
          #        super();
          #    }
          #}
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
          #    {
          #        custInvoiceTransCorrected_RU_DS.executeQuery();
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #validateWrite
          #public boolean validateWrite()
          #{
          #    if (!custInvoiceLineCorrLink_RU.CustInvoiceLineRecId)
          #    {
          #        if (!custInvoiceLine.RecId)
          #        {
          #            custInvoiceLine_DS.writing();
          #        }
          #        custInvoiceLineCorrLink_RU.CustInvoiceLineRecId = custInvoiceLine.RecId;
          #    }
          #
          #    return true;
          #}
          #
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
          #    {
          #        this.linkType(FormLinkType::Active);
          #    }
          #
          #    super();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #CustInvoiceTransCorrected_RU
          Table               #CustInvoiceTrans
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #CustInvoiceLineCorrLink_RU
          LinkType            #Passive
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #writing
          #public void writing()
          #{
          #    //super();
          #}
        ENDSOURCE
        SOURCE #validateWrite
          #public boolean validateWrite()
          #{
          #    return true;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #CustInvoiceLineInterProj
          Table               #CustInvoiceLineInterProj
          AllowCheck          #No
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #CustInvoiceLine
          LinkType            #Passive
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #executeQuery
          #public void executeQuery()
          #{
          #    // To avoid unnecessary queries, only retrieve records if the current header
          #    // is for an intercompany project invoice.
          #    if (custInvoiceTable.ProjIntercompany)
          #    {
          #        super();
          #    }
          #}
        ENDSOURCE
        SOURCE #isNeeded
          #private boolean isNeeded()
          #{
          #    return (isConfigurationkeyEnabled(configurationKeyNum(ProjTimesheet)));
          #}
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    if (this.isNeeded())
          #    {
          #        this.linkType(DataSourceLinkTypePropertyValues::Active);
          #    }
          #    super();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #CustInvoiceTable_W
          Table               #CustInvoiceTable_W
          JoinSource          #CustInvoiceTable
          LinkType            #Passive
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #// <GMY>
          #public void init()
          #{
          #    if (isCustInvoiceTable_WEnabled)
          #    {
          #        this.linkType(FormLinkType::OuterJoin);
          #        this.optionalRecordMode(OptionalRecordMode::None);
          #    }
          #
          #    super();
          #}
          #// </GMY>
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #CustInvoiceLine_W
          Table               #CustInvoiceLine_W
          JoinSource          #CustInvoiceLine
          LinkType            #Passive
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #validateWrite
          #public boolean validateWrite()
          #{
          #    boolean             ret;
          #
          #    ret = true;
          #    if (!CustInvoiceLine_W.CustInvoiceLine)
          #    {
          #        if (!custInvoiceLine.RecId)
          #        {
          #            custInvoiceLine.write();
          #        }
          #        CustInvoiceLine_W.CustInvoiceLine = custInvoiceLine.RecId;
          #    }
          #
          #    // <GMY>
          #    if(ret && isISOMY)
          #    {
          #        if (CustInvoiceLine_W.RefInvoiceId_MY && CustInvoiceLine_W.RefInvoiceDate_MY)
          #        {
          #            if (!CustInvoiceJourLookupController_MY::validateRefInvoiceInfo([CustInvoiceLine_W.RefInvoiceId_MY, CustInvoiceLine_W.RefInvoiceDate_MY, RefNum::Cust]))
          #            {
          #                ret = checkFailed("@SYP4860680");
          #            }
          #        }
          #        else if ((CustInvoiceLine_W.RefInvoiceId_MY && !CustInvoiceLine_W.RefInvoiceDate_MY) || (!CustInvoiceLine_W.RefInvoiceId_MY && CustInvoiceLine_W.RefInvoiceDate_MY))
          #        {
          #            ret = checkFailed("@SYP4860689");
          #        }
          #    }
          #    // <GMY>
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #written
          #public void written()
          #{
          #    super();
          #
          #    // <GMY>
          #    if (isIsoMY)
          #    {
          #        if (CustInvoiceTable.hasLinesWithRefrence_MY() && CustInvoiceTable.hasLinesWithoutRefrence_MY())
          #        {
          #            if (!isWrnOutMY)
          #            {
          #                warning("@SYP4860678");
          #                isWrnOutMY = true;
          #            }
          #        }
          #        else
          #        {
          #            isWrnOutMY = false;
          #        }
          #    }
          #    // <GMY>
          #}
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    isCustInvoiceLine_WEnabled = SysExtensionSerializerExtensionMap::isExtensionEnabled(tableNum(CustInvoiceLine_W));
          #    if (isCustInvoiceLine_WEnabled)
          #    {
          #        this.linkType(FormLinkType::OuterJoin);
          #        this.optionalRecordMode(OptionalRecordMode::None);
          #    }
          #
          #    super();
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
  ENDOBJECTBANK
  
  REFERENCEDATASOURCES
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #LogisticsPostalAddress
          Table               #LogisticsPostalAddress
          JoinSource          #CustInvoiceTable
          JoinRelation        #PostalAddress
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjFundingSource_custInvoiceLine
          Table               #ProjFundingSource
          JoinSource          #CustInvoiceLine
          JoinRelation        #ProjFundingSource
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #CustRecurrenceInvoiceGroup
          Table               #CustRecurrenceInvoiceGroup
          JoinSource          #RecurrenceInvoice
          JoinRelation        #CustRecurrenceInvoiceGroup
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ServiceCodeTable_IN
          Table               #ServiceCodeTable_IN
          JoinSource          #CustInvoiceLine
          JoinRelation        #ServiceCodeTable_IN
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
  ENDREFERENCEDATASOURCES
  
  JOINS
    CustInvoiceLine CustInvoiceTable
    RecurrenceInvoice CustInvoiceTable
    TaxInformation_IN CustInvoiceLineTaxExtensionIN
    CustInvoiceLineTaxExtensionIN CustInvoiceLine
    CustInvoiceTableExtensionCN CustInvoiceTable
    CustInvoiceLineAsset CustInvoiceLine
    CustInvoiceTableSymbol CustInvoiceTable
    TaxServiceTariffHeader CustInvoiceTable
    TaxServiceTariffLine CustInvoiceLine
    CustDirective_PSN CustInvoiceLine
    CustInvoiceTableExtensionTH CustInvoiceTable
    CustInvoiceLineCorrLink_RU CustInvoiceLine
    CustInvoiceTransCorrected_RU CustInvoiceLineCorrLink_RU
    CustInvoiceLineInterProj CustInvoiceLine
    CustInvoiceTable_W CustInvoiceTable
    CustInvoiceLine_W CustInvoiceLine
    LogisticsPostalAddress CustInvoiceTable
    ProjFundingSource_custInvoiceLine CustInvoiceLine
    CustRecurrenceInvoiceGroup RecurrenceInvoice
    ServiceCodeTable_IN CustInvoiceLine
  ENDJOINS
  
  PARTREFERENCES
    PARTREFERENCE #ContactPersonContactFor
      PROPERTIES
        Name                #ContactPersonContactFor
        MenuItemName        #ContactPersonContactFor
        DataSource          #CustInvoiceTable
        DataSourceRelation  #CustInvoiceTable.ContactPerson
        ElementPosition     #536870911
      ENDPROPERTIES
      
    ENDPARTREFERENCE
    
    PARTREFERENCE #CustStatisticsRecentActivity
      PROPERTIES
        Name                #CustStatisticsRecentActivity
        MenuItemName        #CustStatisticsRecentActivity
        DataSource          #CustInvoiceTable
        DataSourceRelation  #CustInvoiceTable.CustTable_OrderAmount
        ElementPosition     #1073741822
      ENDPROPERTIES
      
    ENDPARTREFERENCE
    
    PARTREFERENCE #CustStatisticsStatistics
      PROPERTIES
        Name                #CustStatisticsStatistics
        MenuItemName        #CustStatisticsStatistics
        DataSource          #CustInvoiceTable
        DataSourceRelation  #CustInvoiceTable.CustTable_OrderAmount
        ElementPosition     #1610612733
      ENDPROPERTIES
      
    ENDPARTREFERENCE
    
  ENDPARTREFERENCES
  
  DESIGN
    PROPERTIES
      Caption             #@SYS23028
      TitleDatasource     #CustInvoiceTable
      DataSource          #CustInvoiceTable
      HideIfEmpty         #No
      WorkflowEnabled     #Yes
      WorkflowDatasource  #CustInvoiceTable
      WorkflowType        #CustFreeTextInvoiceTemplate
      Style               #DetailsFormTransaction
    ENDPROPERTIES
    
    CONTAINER
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #ActionPane
          VerticalSpacing     #0
          ElementPosition     #447392426
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #ActionPaneAddress
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #AddressFastTab
          Style               #Strip
          DataSource          #CustInvoiceTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #CVLinesActionStrip
          ElementPosition     #1073741822
          HierarchyParent     #CVLinesFastTab
          Style               #Strip
          DataSource          #CustInvoiceLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #RelatedInvoiceActionStrip
          VerticalSpacing     #0
          ElementPosition     #1073741822
          HierarchyParent     #RelatedInvoice
          Style               #Strip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #ActionPaneTab1
          ElementPosition     #1431655764
          HierarchyParent     #ActionPaneAddress
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #ActionPaneTab2
          ElementPosition     #1431655764
          HierarchyParent     #CVLinesActionStrip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #InvoiceActionsTab
          ElementPosition     #1431655764
          HierarchyParent     #ActionPane
          Caption             #@SYS114667
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #Manage
          ElementPosition     #1789569705
          HierarchyParent     #ActionPane
          Caption             #@SYS115306
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #RelatedInvoiceActionTab
          ElementPosition     #1431655764
          HierarchyParent     #RelatedInvoiceActionStrip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #Accounting
          ElementPosition     #920350134
          HierarchyParent     #InvoiceActionsTab
          Caption             #@SYS314071
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #AdjustmentAction
          AutoDeclaration     #Yes
          ElementPosition     #1687308579
          HierarchyParent     #InvoiceActionsTab
          Caption             #@SYS18750
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #Attachments
          ElementPosition     #1994091957
          HierarchyParent     #InvoiceActionsTab
          Caption             #@SYS316708
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #Attachments_IN
          ElementPosition     #2093796554
          HierarchyParent     #ActionPaneTab2
          Caption             #@SYS316708
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroup
          ElementPosition     #1431655764
          HierarchyParent     #ActionPaneTab1
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #CustomFieldsButtons
          AutoDeclaration     #Yes
          ConfigurationKey    #PublicSector
          ElementPosition     #1073741822
          HierarchyParent     #ActionPaneTab2
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #CVInvoiceLinesButtons
          Left                #Auto (left)
          VerticalSpacing     #0
          ElementPosition     #858993458
          HierarchyParent     #ActionPaneTab2
          ArrangeMethod       #Horizontal, flush right
          Columnspace         #0
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #CVInvoiceLinesExtraButtons
          ElementPosition     #1717986916
          HierarchyParent     #ActionPaneTab2
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #Delivery
          ElementPosition     #1150437667
          HierarchyParent     #InvoiceActionsTab
          Caption             #@SYS4508
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #DetailsAction
          ElementPosition     #1035393900
          HierarchyParent     #InvoiceActionsTab
          Caption             #@SYS8811
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #InvoiceLinesAccDistButtons
          ElementPosition     #1288490187
          HierarchyParent     #ActionPaneTab2
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #InvoiceLinesChargeButtons
          CountryRegionCodes  #BR,CN,CZ,EE,HU,IN,JP,LT,LV,PL,RU
          ElementPosition     #1503238551
          HierarchyParent     #ActionPaneTab2
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #LineAttachments_BR
          CountryRegionCodes  #BR
          ElementPosition     #2040109463
          HierarchyParent     #ActionPaneTab2
          Caption             #@SYS316708
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ListAction
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1533916890
          HierarchyParent     #InvoiceActionsTab
          Caption             #@SYS118440
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #MaintainAction
          AutoDeclaration     #Yes
          ElementPosition     #306783378
          HierarchyParent     #InvoiceActionsTab
          Caption             #@SYS316703
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ManageCreditCard
          ElementPosition     #1431655764
          HierarchyParent     #Manage
          Caption             #@ACC1423
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #NewInvoiceAction
          ElementPosition     #460175067
          HierarchyParent     #InvoiceActionsTab
          Caption             #@SYS2055
          DataSource          #CustInvoiceTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PostAction
          ElementPosition     #766958445
          HierarchyParent     #InvoiceActionsTab
          Caption             #@SYS41360
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #PrintManagement
          ElementPosition     #1840700268
          HierarchyParent     #InvoiceActionsTab
          Caption             #@SYS114627
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #RelatedInformationAction
          ElementPosition     #1227133512
          HierarchyParent     #InvoiceActionsTab
          Caption             #@SYS310012
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #RelatedInvoiceButtons
          Left                #Auto (left)
          VerticalSpacing     #0
          ElementPosition     #1431655764
          HierarchyParent     #RelatedInvoiceActionTab
          ArrangeMethod       #Horizontal, flush right
          Columnspace         #0
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #SetupAction
          ElementPosition     #1380525201
          HierarchyParent     #InvoiceActionsTab
          Caption             #@SYS342635
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ShowAction
          AutoDeclaration     #Yes
          ElementPosition     #613566756
          HierarchyParent     #InvoiceActionsTab
          Caption             #@SYS317437
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #TaxRegister_IN
          CountryRegionCodes  #IN
          ElementPosition     #2066953008
          HierarchyParent     #ActionPaneTab2
          Caption             #@GLS94552
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #WithholdingTax_IN
          AutoDeclaration     #Yes
          ElementPosition     #1932735281
          HierarchyParent     #ActionPaneTab2
          Caption             #@SYS333997
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #CorrectionGrid
          AutoDeclaration     #Yes
          AllowEdit           #No
          Width               #Column width
          Height              #Column height
          VerticalSpacing     #0
          ElementPosition     #1610612733
          HierarchyParent     #RelatedInvoice
          MultiSelect         #No
          DataSource          #CustRelatedInvoice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #LinesGrid
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612734
          HierarchyParent     #CVLinesFastTab
          VisibleRows         #5
          DataSource          #CustInvoiceLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #OverviewGrid
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #GroupGrid
          DataSource          #CustInvoiceTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Address
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #1610612733
          HierarchyParent     #AddressFastTab
          FrameType           #None
          Caption             #@SYS9362
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Agreement_RU
          CountryRegionCodes  #RU
          ElementPosition     #1659419181
          HierarchyParent     #InvoiceFastTab
          DataSource          #CustInvoiceTable
          DataGroup           #Agreement_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Amount_IN
          AutoDeclaration     #Yes
          ElementPosition     #536870910
          HierarchyParent     #CVInvoiceDetailsForeignTradeTabPage
          DataSource          #CustInvoiceLine
          DataGroup           #Amount_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #AmountDetails
          AutoDeclaration     #Yes
          ElementPosition     #1889114518
          HierarchyParent     #CVInvoiceDetailsGeneralTabPage
          FrameType           #None
          Font                #Courier New
          FontSize            #8
          Bold                #Normal
          DataSource          #CustInvoiceLine
          DataGroup           #AmountDetails
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #BankAccounts_LV
          ElementPosition     #2113929214
          HierarchyParent     #PaymentFastTab
          DataSource          #CustInvoiceTable
          DataGroup           #BankAccounts_LV
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Codes
          ElementPosition     #1610612734
          HierarchyParent     #CVInvoiceDetailsForeignTradeTabPage
          DataSource          #CustInvoiceLine
          Columns             #Auto
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CompanyInfo
          ElementPosition     #477218588
          HierarchyParent     #TabTaxInformation_IN
          Caption             #@SYS81121
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CorrectedLine_RU
          AutoDeclaration     #Yes
          CountryRegionCodes  #RU
          ElementPosition     #2080374782
          HierarchyParent     #CVInvoiceDetailsGeneralTabPage
          Caption             #@SYS4081837
          DataSource          #CustInvoiceLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Correction_RU
          CountryRegionCodes  #RU
          ElementPosition     #2092385743
          HierarchyParent     #InvoiceFastTab
          Caption             #@SYS13069
          DataSource          #CustInvoiceTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CorrectionReason
          ElementPosition     #1073741822
          HierarchyParent     #CorrectionsFastTab
          Caption             #@SYS23845
          DataSource          #CustInvoiceTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CreditNoteOriginalInvoice
          ElementPosition     #1610612733
          HierarchyParent     #CVInvoiceDetailsCreditNoteTabPage
          Caption             #@SYS300088
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CreditNoteReason
          ElementPosition     #1073741822
          HierarchyParent     #CVInvoiceDetailsCreditNoteTabPage
          Caption             #@GLS220480
          DataSource          #CustInvoiceLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Currency
          ElementPosition     #715827882
          HierarchyParent     #PaymentFastTab
          DataSource          #CustInvoiceTable
          DataGroup           #Currency
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CustInvoiceLineWithholdingTax_IN
          ElementPosition     #805306365
          HierarchyParent     #CVInvoiceDetailsForeignTradeTabPage
          DataSource          #CustInvoiceLine
          DataGroup           #WithholdingTax_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CustomDeclId_RU
          ElementPosition     #1946157053
          HierarchyParent     #CVInvoiceDetailsGeneralTabPage
          DataSource          #CustInvoiceLine
          DataGroup           #CustomDeclId_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CustomerAccountAndName
          ElementPosition     #1073741822
          HierarchyParent     #GroupCustomer
          Style               #MarginlessContainer
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Customs_IN
          AutoDeclaration     #Yes
          ElementPosition     #1908874352
          HierarchyParent     #TabTaxInformation_IN
          DataSource          #TaxInformation_IN
          DataGroup           #Customs
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CVAgreement_RU
          CountryRegionCodes  #RU
          ElementPosition     #2013265918
          HierarchyParent     #CVHeaderFastTab
          DataSource          #CustInvoiceTable
          DataGroup           #Agreement_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CVHeaderAccountNamesGroup
          Width               #Column width
          ElementPosition     #858993458
          HierarchyParent     #CVHeaderCustomerGroup
          Style               #MarginlessContainer
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CVHeaderCustomerGroup
          Width               #Column width
          ElementPosition     #1073741822
          HierarchyParent     #CVHeaderFastTab
          Caption             #@SYS302
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CVHeaderInvoiceGroup
          Width               #Column width
          ElementPosition     #1476395006
          HierarchyParent     #CVHeaderFastTab
          Caption             #@SYS12128
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CVLineDetailsFixedAssetsGroup
          ElementPosition     #1288490187
          HierarchyParent     #CVInvoiceDetailsGeneralTabPage
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Data
          ElementPosition     #1073741822
          HierarchyParent     #CVInvoiceDetailsForeignTradeTabPage
          DataSource          #CustInvoiceLine
          DataGroup           #Data
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #DirectiveGroup_PSN
          ElementPosition     #858993458
          HierarchyParent     #DirectiveTabPage_PSN
          Caption             #@GLS223147
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #DirectiveMemoGroup_PSN
          ElementPosition     #1717986916
          HierarchyParent     #DirectiveTabPage_PSN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #DirectiveStatusGroup_PSN
          ElementPosition     #1288490187
          HierarchyParent     #DirectiveTabPage_PSN
          Caption             #@GLS223220
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Document
          ElementPosition     #1561806288
          HierarchyParent     #InvoiceFastTab
          Caption             #@SYS101280
          DataSource          #CustInvoiceTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Einvoice
          AutoDeclaration     #Yes
          ElementPosition     #1952257860
          HierarchyParent     #InvoiceFastTab
          DataSource          #CustInvoiceTable
          DataGroup           #Einvoice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Excise_IN
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #TabTaxInformation_IN
          Caption             #@GLS5005
          DataSource          #CustInvoiceLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #FiscalDocType_PL
          ElementPosition     #2141192190
          HierarchyParent     #InvoiceFastTab
          DataSource          #CustInvoiceTable
          DataGroup           #FiscalDocType_PL
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #FiscalEstablishmentBRGroup
          CountryRegionCodes  #BR
          ElementPosition     #715827880
          HierarchyParent     #CVHeaderFastTab
          Caption             #@GLS220103
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #FiscalInformation_BR
          ElementPosition     #715827880
          HierarchyParent     #TabPageFiscalInformation_BR
          Caption             #@GLS56
          DataSource          #CustInvoiceTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #FixedAssets_RU
          CountryRegionCodes  #RU
          ElementPosition     #1832071984
          HierarchyParent     #CVInvoiceDetailsGeneralTabPage
          Caption             #@GLS106645
          DataSource          #CustInvoiceLine
          DataGroup           #FixedAssets_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ForeignTrade
          ElementPosition     #1757032074
          HierarchyParent     #InvoiceFastTab
          Caption             #@SYS27650
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Format_MY
          ElementPosition     #1805838520
          HierarchyParent     #InvoiceFastTab
          DataSource          #CustInvoiceTable_W
          DataGroup           #Format_MY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Giromoneytransferslip
          ElementPosition     #1431655764
          HierarchyParent     #PaymentFastTab
          DataSource          #CustInvoiceTable
          DataGroup           #GiroMoneyTransferSlip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupAdministration
          ElementPosition     #1288490187
          HierarchyParent     #CustomerFastTab
          DataSource          #CustInvoiceTable
          DataGroup           #Administration
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupBillingClassification
          ConfigurationKey    #PublicSector
          ElementPosition     #2049870753
          HierarchyParent     #InvoiceFastTab
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupCustomer
          ElementPosition     #858993458
          HierarchyParent     #CustomerFastTab
          Caption             #@SYS302
          Style               #MarginlessContainer
          DataSource          #CustInvoiceTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupDistributionTemplateHeader
          ElementPosition     #1073741822
          HierarchyParent     #DimensionsFastTab
          FrameType           #None
          DataSource          #CustInvoiceTable
          LeftMargin          #10
          HideIfEmpty         #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupDistributionTemplateLine
          ElementPosition     #1073741822
          HierarchyParent     #CVInvoiceDetailsDimensionLinesTabPage
          FrameType           #None
          DataSource          #CustInvoiceLine
          LeftMargin          #10
          HideIfEmpty         #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupFinancialDimensionHeader
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          ElementPosition     #1610612733
          HierarchyParent     #DimensionsFastTab
          FrameType           #None
          DataSource          #CustInvoiceTable
          HideIfEmpty         #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupFinancialDimensionLine
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          ElementPosition     #1610612733
          HierarchyParent     #CVInvoiceDetailsDimensionLinesTabPage
          FrameType           #None
          DataSource          #CustInvoiceLine
          HideIfEmpty         #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupForeignTrade_MY
          ElementPosition     #2087831322
          HierarchyParent     #ForeignTrade
          FrameType           #None
          DataSource          #CustInvoiceTable_W
          DataGroup           #ForeignTrade_MY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupGrid
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #TabPageGrid
          Style               #BorderlessGridContainer
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupInvoice
          Visible             #No
          ElementPosition     #1171354716
          HierarchyParent     #InvoiceFastTab
          DataSource          #CustInvoiceTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupNotificationToTheCentralBank
          AutoDeclaration     #Yes
          ElementPosition     #1789569705
          HierarchyParent     #PaymentFastTab
          DataSource          #CustInvoiceTable
          DataGroup           #NotificationToTheCentralBank
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupPayment
          ElementPosition     #1073741823
          HierarchyParent     #PaymentFastTab
          DataSource          #CustInvoiceTable
          DataGroup           #Payment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupPosting
          ElementPosition     #585677358
          HierarchyParent     #InvoiceFastTab
          DataSource          #CustInvoiceTable
          DataGroup           #Posting
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupPostRelease
          ElementPosition     #780903144
          HierarchyParent     #InvoiceFastTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupRecurrenceInvoice
          ElementPosition     #976128930
          HierarchyParent     #InvoiceFastTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupReference
          ElementPosition     #1717986916
          HierarchyParent     #CustomerFastTab
          Caption             #@SYS14018
          DataSource          #CustInvoiceTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupTax
          ElementPosition     #1366580502
          HierarchyParent     #InvoiceFastTab
          DataSource          #CustInvoiceTable
          DataGroup           #SalesTax
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupTax_IN
          ElementPosition     #2013265918
          HierarchyParent     #CVInvoiceDetailsGeneralTabPage
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupWithholdingTax_IN
          AutoDeclaration     #Yes
          ElementPosition     #2134900734
          HierarchyParent     #InvoiceFastTab
          DataSource          #CustInvoiceTable
          DataGroup           #WithholdingTax_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeaderFiscalEstablishmentBRGroup
          CountryRegionCodes  #BR
          ElementPosition     #260301048
          HierarchyParent     #InvoiceFastTab
          Caption             #@GLS220103
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeaderInfo
          ElementPosition     #1073741822
          HierarchyParent     #TabPageDetails
          Style               #DetailTitleContainer
          Columns             #Auto
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeaderInvoiceGroup
          ElementPosition     #422989203
          HierarchyParent     #InvoiceFastTab
          Caption             #@SYS328202
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeadVAT
          AutoDeclaration     #Yes
          CountryRegionCodes  #CN
          ElementPosition     #1879048190
          HierarchyParent     #CVHeaderFastTab
          Caption             #@GLS221099
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #InfoBar
          AutoDeclaration     #Yes
          AllowEdit           #No
          Width               #Column width
          ElementPosition     #1431655764
          HierarchyParent     #InfoBarBorder
          FrameType           #None
          ColorScheme         #RGB
          BackgroundColor     #254 250 164
          TopMargin           #4
          LeftMargin          #4
          RightMargin         #3
          Columns             #2
          Columnspace         #7
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #InfoBarBorder
          AllowEdit           #No
          Width               #Column width
          ElementPosition     #1431655764
          HierarchyParent     #InfobarGroup
          FrameType           #None
          ColorScheme         #RGB
          BackgroundColor     #154 154 154
          TopMargin           #1
          BottomMargin        #1
          LeftMargin          #1
          RightMargin         #1
          HideIfEmpty         #No
          AlignChildren       #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #InfobarGroup
          AutoDeclaration     #Yes
          Visible             #No
          AllowEdit           #No
          Width               #Column width
          ElementPosition     #894784852
          FrameType           #None
          HideIfEmpty         #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #InvoiceAccountAndName
          ElementPosition     #1610612733
          HierarchyParent     #GroupCustomer
          Style               #MarginlessContainer
          Columns             #Auto
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #LineFiscalInformation_BR
          ElementPosition     #1431655764
          HierarchyParent     #TabPageLinesFiscalInformation_BR
          DataSource          #CustInvoiceLine
          DataGroup           #FiscalInformation_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #LineVAT
          AutoDeclaration     #Yes
          CountryRegionCodes  #CN
          ElementPosition     #1854644967
          HierarchyParent     #InvoiceFastTab
          Caption             #@GLS221099
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #NoteFormat
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #2017333122
          HierarchyParent     #InvoiceFastTab
          DataSource          #CustInvoiceTableExtensionTH
          DataGroup           #NoteFormat
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ProjIntercompanyAmounts
          ElementPosition     #1431655764
          HierarchyParent     #TabPageLinesProjIntercompany
          DataSource          #CustInvoiceLineInterProj
          DataGroup           #IntercompanyProject
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ProjIntercompanyOrigTransDetails
          ElementPosition     #715827882
          HierarchyParent     #TabPageLinesProjIntercompany
          DataSource          #CustInvoiceLineInterProj
          DataGroup           #Transaction
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ProjIntercompanyWorker
          ElementPosition     #1789569705
          HierarchyParent     #TabPageLinesProjIntercompany
          DataSource          #CustInvoiceLineInterProj
          DataGroup           #Worker
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Reference
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #2082408384
          HierarchyParent     #InvoiceFastTab
          Caption             #@SYS81755
          DataSource          #CustInvoiceTableExtensionTH
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #RelatedInvoice
          ElementPosition     #1610612733
          HierarchyParent     #CorrectionsFastTab
          Caption             #@SYS300076
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #SalesTax
          AutoDeclaration     #Yes
          ElementPosition     #1133394146
          HierarchyParent     #TabTaxInformation_IN
          DataSource          #TaxInformation_IN
          DataGroup           #SalesTax
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #SalesTax_IN
          Visible             #No
          ElementPosition     #1073741823
          HierarchyParent     #TabTaxInformation_IN
          DataSource          #CustInvoiceLine
          DataGroup           #SalesTax_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Services_BR
          ElementPosition     #1431655763
          HierarchyParent     #TabPageFiscalInformation_BR
          DataSource          #CustInvoiceTable
          DataGroup           #Services_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ServiceTax_IN
          AutoDeclaration     #Yes
          ElementPosition     #1670265058
          HierarchyParent     #TabTaxInformation_IN
          Caption             #@GLS5006
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Symbol
          CountryRegionCodes  #CZ
          ElementPosition     #1252698793
          HierarchyParent     #PaymentFastTab
          Caption             #@GLS107997
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #VAT
          AutoDeclaration     #Yes
          ElementPosition     #715827882
          HierarchyParent     #TabTaxInformation_IN
          DataSource          #TaxInformation_IN
          DataGroup           #VAT
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #WithholdingTax
          AutoDeclaration     #Yes
          ElementPosition     #1282524955
          HierarchyParent     #TabTaxInformation_IN
          Caption             #@SYS7372
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #WithholdingTax_BR
          ElementPosition     #2113929214
          HierarchyParent     #CVInvoiceDetailsGeneralTabPage
          DataSource          #CustInvoiceLine
          DataGroup           #WithholdingTax_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #Codes_NGPCodesTable_FR
          ElementPosition     #1670265058
          HierarchyParent     #Codes
          DataSource          #CustInvoiceLine
          ReferenceField      #NGPCodesTable_FR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustDirective_PSN_CustRoutingSlip_PSN
          AllowEdit           #No
          ElementPosition     #1073741823
          HierarchyParent     #DirectiveGroup_PSN
          DataSource          #CustDirective_PSN
          ReferenceField      #CustRoutingSlip_PSN
          HideIfEmpty         #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustInvoiceLine_CFOPTable_BR
          ElementPosition     #805306362
          HierarchyParent     #LinesGrid
          DataSource          #CustInvoiceLine
          ReferenceField      #CFOPTable_BR
          Label               #@GLS200
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustInvoiceLine_CompanyLocation_IN
          HelpText            #@GLS222760
          ElementPosition     #961893714
          HierarchyParent     #CompanyInfo
          DataSource          #CustInvoiceLine
          ReferenceField      #CompanyLocation_IN
          Label               #@SYS123914
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustInvoiceLine_CustomsTariffCodeTable_IN
          ElementPosition     #1288490187
          HierarchyParent     #GroupTax_IN
          DataSource          #CustInvoiceLine
          ReferenceField      #CustomsTariffCodeTable_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustInvoiceLine_ExciseTariffCodes_IN
          ElementPosition     #858993458
          HierarchyParent     #GroupTax_IN
          DataSource          #CustInvoiceLine
          ReferenceField      #ExciseTariffCodes_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustInvoiceLine_SalesTaxFormTypes_IN1
          ElementPosition     #1717986916
          HierarchyParent     #GroupTax_IN
          DataSource          #CustInvoiceLine
          ReferenceField      #SalesTaxFormTypes_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustInvoiceLineTaxExtensionIN_TaxInformation_IN
          ElementPosition     #1811939325
          HierarchyParent     #CompanyInfo
          DataSource          #CustInvoiceLineTaxExtensionIN
          ReferenceField      #TaxInformation_IN
          Label               #@SYS33652
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustInvoiceLineTaxExtensionIN_TaxWithholdCountryRegionToRemittance
          ElementPosition     #1789569705
          HierarchyParent     #WithholdingTax
          DataSource          #CustInvoiceLineTaxExtensionIN
          ReferenceField      #TaxWithholdCountryRegionToRemittance
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustInvoiceLineTaxExtensionIN_TaxWithholdNatureOfRemittance
          ElementPosition     #1073741823
          HierarchyParent     #WithholdingTax
          DataSource          #CustInvoiceLineTaxExtensionIN
          ReferenceField      #TaxWithholdNatureOfRemittance
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustInvoiceTable_CustBillingClass
          AutoDeclaration     #Yes
          HelpText            #@SPS532
          ElementPosition     #572662304
          HierarchyParent     #HeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          ReferenceField      #CustBillingClassification
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustInvoiceTable_FiscalEstablishment_BR
          ElementPosition     #1431655764
          HierarchyParent     #FiscalEstablishmentBRGroup
          DataSource          #CustInvoiceTable
          ReferenceField      #FiscalEstablishment_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustInvoiceTable_FiscalEstablishment_BRHeader
          ElementPosition     #1431655764
          HierarchyParent     #HeaderFiscalEstablishmentBRGroup
          DataSource          #CustInvoiceTable
          ReferenceField      #FiscalEstablishment_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustInvoiceTable_PostalAddress
          ElementPosition     #1288490187
          HierarchyParent     #Address
          DataSource          #CustInvoiceTable
          ReferenceField      #PostalAddress
          ReplacementFieldGroup #LocationReference
          Label               #@SYS58074
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret = super();
            #    custInvoiceTable.DeliveryLocation = LogisticsPostalAddress::findRecId(custInvoiceTable.PostalAddress).Location;
            #    element.getDeliveryInfo();
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustInvoiceTable_SalesPurchOperationType_BR
          ElementPosition     #1073741823
          HierarchyParent     #FiscalInformation_BR
          DataSource          #CustInvoiceTable
          ReferenceField      #SalesPurchOperationType_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustInvoiceTableExtensionCN_VATInvoiceDesc
          ElementPosition     #858993458
          HierarchyParent     #HeadVAT
          DataSource          #CustInvoiceTableExtensionCN
          ReferenceField      #VATInvoiceDescTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustInvoiceTableExtensionCN_VATInvoiceDescTable
          ElementPosition     #858993458
          HierarchyParent     #LineVAT
          DataSource          #CustInvoiceTableExtensionCN
          ReferenceField      #VATInvoiceDescTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #CustInvoiceTableSymbol_BankConstantSymbol
          ElementPosition     #1431655764
          HierarchyParent     #Symbol
          DataSource          #CustInvoiceTableSymbol
          ReferenceField      #BankConstantSymbol
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #Customs_IECRegistrationNumberTable
          ElementPosition     #1431655764
          HierarchyParent     #Customs_IN
          DataSource          #TaxInformation_IN
          ReferenceField      #IECRegistrationNumberTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #FiscalDocumentType
          ElementPosition     #715827882
          HierarchyParent     #FiscalInformation_BR
          DataSource          #CustInvoiceTable
          ReferenceField      #FiscalDocumentType_BR
          ReplacementFieldGroup #FiscalDocumentTypeReference
          Label               #@GLS108
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #LineCustInvoiceTable_CustBillingClass
          AutoDeclaration     #Yes
          HelpText            #@SPS532
          ElementPosition     #143165576
          HierarchyParent     #CVHeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          ReferenceField      #CustBillingClassification
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookupReference
            #
            #public Common lookupReference()
            #{
            #    Common ret;
            #
            #    if(custInvoiceLine.BillingCode == '')
            #    {
            #        ret = super();
            #    }
            #
            #    return ret;
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #LineFiscalInformation_BR_CFOPTable_BR
          ElementPosition     #858993458
          HierarchyParent     #LineFiscalInformation_BR
          DataSource          #CustInvoiceLine
          ReferenceField      #CFOPTable_BR
          Label               #@GLS200
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #Reference_TaxAgent
          ElementPosition     #1789569705
          HierarchyParent     #Reference
          DataSource          #CustInvoiceTableExtensionTH
          ReferenceField      #TaxAgent
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #ReferenceGroupProjFundingSource
          AutoDeclaration     #Yes
          ElementPosition     #1717986916
          HierarchyParent     #CVInvoiceDetailsProjectTabPage
          DataSource          #CustInvoiceLine
          ReferenceField      #ProjFundingSource
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #ServiceTariffNumberLine
          HelpText            #@GLS115894
          ElementPosition     #1908874352
          HierarchyParent     #Codes
          DataSource          #TaxServiceTariffLine
          ReferenceField      #ServiceTariffNumber
          ReplacementFieldGroup #ServiceTariffId
          Label               #@GLS115893
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    taxServiceTariffLine.ParentRecId = custInvoiceLine.RecId;
            #    taxServiceTariffLine.ParentTableId = custInvoiceLine.TableId;
            #    ret = super();
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #ServiceTax_IN_ServiceCodeTable_IN
          ElementPosition     #1610612734
          HierarchyParent     #ServiceTax_IN
          DataSource          #CustInvoiceLine
          ReferenceField      #ServiceCodeTable_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #TaxInformation_IN_ECCNumber
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1022611260
          HierarchyParent     #Excise_IN
          DataSource          #TaxInformation_IN
          ReferenceField      #ECCNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #TaxInformation_IN_ManECCRegistrationNumberTable
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #766958445
          HierarchyParent     #Excise_IN
          DataSource          #TaxInformation_IN
          ReferenceField      #ManECCRegistrationNumberTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #TaxInformation_IN_STCRegistrationNumberTable
          ElementPosition     #1073741822
          HierarchyParent     #ServiceTax_IN
          DataSource          #TaxInformation_IN
          ReferenceField      #STCRegistrationNumberTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #TaxInformation_IN_TraderECCRegistrationNumberTable
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1278264075
          HierarchyParent     #Excise_IN
          DataSource          #TaxInformation_IN
          ReferenceField      #TraderECCRegistrationNumberTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #TaxServiceTariffNumberHeader
          HelpText            #@GLS115894
          ElementPosition     #2028178999
          HierarchyParent     #ForeignTrade
          DataSource          #TaxServiceTariffHeader
          ReferenceField      #ServiceTariffNumber
          ReplacementFieldGroup #ServiceTariffId
          Label               #@GLS115893
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #WithholdingTax_TAN
          ElementPosition     #715827882
          HierarchyParent     #WithholdingTax
          DataSource          #TaxInformation_IN
          ReferenceField      #TAN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #CVFastTab
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #CombinedViewTabPage
          Tabs                #3
          Style               #FastTabs
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #CVInvoiceDetailsTab
          Width               #Column width
          ElementPosition     #1431655764
          HierarchyParent     #CVLineDetailsFastTab
          Tabs                #4
          Style               #IndexTabs
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #FastTab
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #HeaderViewTabPage
          Tabs                #8
          Style               #FastTabs
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #TabDetails
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612734
          HierarchyParent     #TabPageDetails
          Tabs                #2
          ShowTabs            #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #TabMain
          Width               #Column width
          Height              #Column height
          ElementPosition     #1521134249
          ShowTabs            #No
        ENDPROPERTIES
        
        METHODS
          SOURCE #tabChanged
            #public void tabChanged(int _fromTab, int _toTab)
            #{
            #    super(_fromTab, _toTab);
            #
            #    //Show when in Grid mode
            #    listAction.visible(tabPageGrid.isActivePage());
            #
            #    //Show when in Details mode
            #    editButton.visible(!tabPageGrid.isActivePage());
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #AddressFastTab
          Width               #Column width
          ElementPosition     #1104420156
          HierarchyParent     #FastTab
          Caption             #@SYS9362
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #CombinedViewTabPage
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #TabDetails
          LeftMargin          #0
          RightMargin         #0
          Style               #DetailsFormDetails
          PanelStyle          #DetailsLine
          Scrollbars          #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #CorrectionsFastTab
          AutoDeclaration     #Yes
          Visible             #No
          Width               #Column width
          ElementPosition     #1902056940
          HierarchyParent     #FastTab
          Caption             #@SYS23845
          Columns             #Auto
        ENDPROPERTIES
        
        METHODS
          SOURCE #pageActivated
            #public void pageActivated()
            #{
            #    custRelatedInvoice_ds.executeQuery();
            #    custRelatedInvoice_ds.findRecord(CustRelatedInvoice::findByCustInvoice(custInvoiceTable.RecId));
            #
            #    if (!custInvoiceTable.isEditable())
            #    {
            #        correctionReasonCode.mandatory(false);
            #    }
            #    else
            #    {
            #        correctionReasonCode.mandatory(true);
            #    }
            #
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #CustomerFastTab
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #828315117
          HierarchyParent     #FastTab
          Caption             #@SYS302
          DataSource          #CustInvoiceTable
          Columns             #Auto
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #CVHeaderFastTab
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #858993458
          HierarchyParent     #CVFastTab
          Caption             #@SYS333592
          DataSource          #CustInvoiceTable
          Columns             #Auto
          FastTabExpanded     #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #CVInvoiceDetailsCFDTabPage_MX
          AutoDeclaration     #Yes
          CountryRegionCodes  #MX
          Width               #Column width
          HelpText            #@SYS341124
          ElementPosition     #805306366
          HierarchyParent     #CVInvoiceDetailsTab
          Caption             #@SYS341961
          Columns             #Auto
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #CVInvoiceDetailsCreditNoteTabPage
          AutoDeclaration     #Yes
          CountryRegionCodes  #RU,PL,HU,CZ,LT,LV,EE
          Width               #Column width
          ElementPosition     #2087831321
          HierarchyParent     #CVInvoiceDetailsTab
          Caption             #@SYS8125
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #CVInvoiceDetailsDimensionLinesTabPage
          Width               #Column width
          ElementPosition     #1789569705
          HierarchyParent     #CVInvoiceDetailsTab
          Caption             #@SYS300043
          Columns             #Auto
        ENDPROPERTIES
        
        METHODS
          SOURCE #pageActivated
            #public void pageActivated()
            #{
            #    int position = custInvoiceLine_ds.getPosition();
            #    dimensionDefaultingControllerLine.pageActivated();
            #
            #    super();
            #
            #    custInvoiceLine_ds.setPosition(position);
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #CVInvoiceDetailsForeignTradeTabPage
          Width               #Column width
          ElementPosition     #1431655764
          HierarchyParent     #CVInvoiceDetailsTab
          Caption             #@SYS27650
          Columns             #Auto
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #CVInvoiceDetailsGeneralTabPage
          Width               #Column width
          ElementPosition     #536870910
          HierarchyParent     #CVInvoiceDetailsTab
          Caption             #@SYS2952
          Columns             #Auto
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #CVInvoiceDetailsProjectTabPage
          AutoDeclaration     #Yes
          ElementPosition     #1968526675
          HierarchyParent     #CVInvoiceDetailsTab
          Caption             #@SYS105983
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #CVInvoiceDetailsReasonsTabPage
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #1118481065
          HierarchyParent     #CVInvoiceDetailsTab
          Caption             #@SYS111245
          Columns             #Auto
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #CVLineDetailsFastTab
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #1717986916
          HierarchyParent     #CVFastTab
          Caption             #@SYS23823
          DataSource          #CustInvoiceLine
          TopMargin           #0
          BottomMargin        #0
          LeftMargin          #0
          RightMargin         #0
          FastTabExpanded     #No
          Scrollbars          #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #CVLinesFastTab
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1288490187
          HierarchyParent     #CVFastTab
          Caption             #@SYS2166
          DataSource          #CustInvoiceLine
          FastTabExpanded     #Always
          Scrollbars          #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #DimensionsFastTab
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #1641291067
          HierarchyParent     #FastTab
          Caption             #@SYS101181
        ENDPROPERTIES
        
        METHODS
          SOURCE #pageActivated
            #public void pageActivated()
            #{
            #    dimensionDefaultingControllerHeader.pageActivated();
            #    super();
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #DirectiveTabPage_PSN
          AutoDeclaration     #Yes
          ConfigurationKey    #PurchFrenchRegulatory_PSN
          ElementPosition     #2107715429
          HierarchyParent     #CVInvoiceDetailsTab
          Caption             #@GLS223147
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
          HideIfEmpty         #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #HeaderViewTabPage
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612734
          HierarchyParent     #TabDetails
          LeftMargin          #0
          RightMargin         #0
          Style               #DetailsFormDetails
          PanelStyle          #DetailsHeader
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #InvoiceFastTab
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #552210078
          HierarchyParent     #FastTab
          Caption             #@SYS2952
          DataSource          #CustInvoiceTable
          Columns             #Auto
          FastTabExpanded     #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #PaymentFastTab
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #1372855611
          HierarchyParent     #FastTab
          Caption             #@SYS828
          Columns             #Auto
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageDetails
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1073741822
          HierarchyParent     #TabMain
          Style               #DetailsFormDetails
          PanelStyle          #Details
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageFiscalInformation_BR
          CountryRegionCodes  #BR
          ElementPosition     #2024770293
          HierarchyParent     #FastTab
          Caption             #@GLS56
          DataSource          #CustInvoiceTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageGrid
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612734
          HierarchyParent     #TabMain
          ViewEditMode        #Edit
          Style               #DetailsFormGrid
          PanelStyle          #Grid
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageLinesFiscalInformation_BR
          CountryRegionCodes  #BR
          ElementPosition     #1968526675
          HierarchyParent     #CVInvoiceDetailsTab
          Caption             #@GLS1350
          DataSource          #CustInvoiceLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageLinesProjIntercompany
          AutoDeclaration     #Yes
          ConfigurationKey    #ProjTimesheet
          ElementPosition     #2127599537
          HierarchyParent     #CVInvoiceDetailsTab
          Caption             #@SYS4005075
          DataSource          #CustInvoiceLineInterProj
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabTaxInformation_IN
          AutoDeclaration     #Yes
          CountryRegionCodes  #IN
          ElementPosition     #2028178998
          HierarchyParent     #CVInvoiceDetailsTab
          Caption             #@SYS33652
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #buttonCustomField
          AutoDeclaration     #Yes
          Enabled             #No
          HelpText            #@SPS497
          ConfigurationKey    #PublicSector
          ElementPosition     #1073741822
          HierarchyParent     #CustomFieldsButtons
          Text                #@SPS325
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #    if (element.showCustomFieldDialog())
            #    {
            #        element.syncBillingCodeLookup();
            #        if (custBillingCodeVersion.UseScript == UseRateScript::Yes)
            #        {
            #            if (Box::yesNo("@SPS495", DialogButton::No, "@SPS221"))
            #            {
            #                element.executeBillingCodeScript();
            #            }
            #        }
            #    }
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonErrorMessage
          AutoDeclaration     #Yes
          HelpText            #@SYS331271
          ElementPosition     #1789569705
          HierarchyParent     #RelatedInformationAction
          Text                #@SYS118003
          NormalImage         #10563
          ImageLocation       #EmbeddedResource
          Primary             #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #    if (custInvoiceTable.Log)
            #    {
            #        infolog.view(Info::infoStr2Con(custInvoiceTable.Log));
            #    }
            #    else
            #    {
            #        info(strFmt("@SYS19186"));
            #    }
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonSetupPaymFormat
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          HelpText            #@SYS83557
          ElementPosition     #1840700268
          HierarchyParent     #DetailsAction
          Text                #@SYS118000
          NormalImage         #10671
          ImageLocation       #EmbeddedResource
          Primary             #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #
            #    CustVendPaymInvoiceWithJournal::promptOutPaym(ModuleCustVend::Cust, custInvoiceTable.PaymMode);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #PrintMgmt
          NeededPermission    #Manual
          HelpText            #@SYS68918
          ConfigurationKey    #LedgerBasic
          SecurityKey         #CustMisc
          ElementPosition     #1431655764
          HierarchyParent     #PrintManagement
          Text                #@SYS114627
          NormalImage         #10698
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          Primary             #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    PrintMgmtSetupContext setupContext = new PrintMgmtSetupContext();
            #
            #    if (custInvoiceTable_ds.cursor() == null)
            #    {
            #        return;
            #    }
            #
            #    super();
            #
            #    setupContext.addHierarchyContext(PrintMgmtHierarchyType::Sales, PrintMgmtNodeType::CustInvoiceTable);
            #    setupContext.parmCaller(element);
            #    setupContext.parmReferencedTableBuffer(custInvoiceTable_ds.cursor());
            #    setupContext.parmCountryRegionId(LogisticsPostalAddress::findRecId(custInvoiceTable.PostalAddress).CountryRegionId);
            #    PrintMgmt::launchSetup(setupContext);
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ViewRelatedInvoice
          HelpText            #@SYS310059
          ElementPosition     #1431655764
          HierarchyParent     #RelatedInvoiceButtons
          Text                #@SYS112322
          ButtonDisplay       #Image only
          NormalImage         #2628
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    Args args;
            #
            #    args = new Args(formStr(CustFreeInvoice));
            #    args.caller(element);
            #    args.record(CustInvoiceTable::findRecId(custRelatedInvoice.CustInvoice));
            #
            #    new MenuFunction(menuitemDisplayStr(CustFreeInvoiceDetails), MenuItemType::Display).run(args);
            #
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #CustInvoiceTable_ManualNumbering_W
          ElementPosition     #429496728
          HierarchyParent     #CVHeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #ManualNumbering_W
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #CustInvoiceTable_OneTimeCustomer
          ElementPosition     #1073741820
          HierarchyParent     #OverviewGrid
          BackgroundColor     #Window background
          DataSource          #CustInvoiceTable
          DataField           #OneTimeCustomer
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            # public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #    if (mcrCallCenterEnabled)
            #    {
            #        custInvoiceTable_OrderAccount.setFocus();
            #    }
            #    return ret;
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #CustInvoiceTable_Posted
          ElementPosition     #1982292588
          HierarchyParent     #OverviewGrid
          BackgroundColor     #Window background
          DataSource          #CustInvoiceTable
          DataField           #Posted
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #CustInvoiceTable_PostponeVAT
          ElementPosition     #1932735281
          HierarchyParent     #CVHeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #PostponeVAT
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #CustInvoiceTable_PrintOverdueFineTxt_FR
          ElementPosition     #2058005160
          HierarchyParent     #HeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #PrintOverdueFineTxt_FR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #CVHeader_OneTimeCustomer
          ElementPosition     #1288490187
          HierarchyParent     #CVHeaderCustomerGroup
          DataSource          #CustInvoiceTable
          DataField           #OneTimeCustomer
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #CVHeader_PrintOverdueFineTxt_FR
          ElementPosition     #2040109463
          HierarchyParent     #CVHeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #PrintOverdueFineTxt_FR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #Einvoice_EInvoiceLineSpec
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #Einvoice
          DataSource          #CustInvoiceTable
          DataField           #EInvoiceLineSpec
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #FiscalInformation_BR_CustFinalUser_BR
          ElementPosition     #1789569705
          HierarchyParent     #FiscalInformation_BR
          DataSource          #CustInvoiceTable
          DataField           #CustFinalUser_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #GroupTax_InclTax_W
          ElementPosition     #715827882
          HierarchyParent     #GroupTax
          DataSource          #CustInvoiceTable
          DataField           #InclTax_W
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #GroupTax_UnitedVATInvoice_LT
          HelpText            #@GLS220217
          ElementPosition     #1968526675
          HierarchyParent     #GroupTax
          DataSource          #CustInvoiceTable
          DataField           #UnitedVATInvoice_LT
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #LineFiscalInformation_BR_ServiceInvoice_BR
          ElementPosition     #1288490187
          HierarchyParent     #LineFiscalInformation_BR
          DataSource          #CustInvoiceLine
          DataField           #ServiceInvoice_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #OneTimeCustomer
          ElementPosition     #1431655764
          HierarchyParent     #CustomerAccountAndName
          DataSource          #CustInvoiceTable
          DataField           #OneTimeCustomer
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #Correction_RU_CorrectionType_RU
          ElementPosition     #483183818
          HierarchyParent     #Correction_RU
          DataSource          #CustInvoiceTable
          DataField           #CorrectionType_RU
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    custInvoiceTable.Correct_RU = custInvoiceTable.CorrectionType_RU != FactureCorrectionType_RU::Unknown;
            #    custInvoiceTable_ds.object(fieldNum(CustInvoiceTable, Correct_RU)).modified();
            #
            #    custInvoiceTable_ds.initCorrFactureDisplay_RU();
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #CustDirective_PSN_AccountantApprovalStatus
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          ElementPosition     #1342177275
          HierarchyParent     #DirectiveStatusGroup_PSN
          DataSource          #CustDirective_PSN
          DataField           #AccountantApprovalStatus
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #CustDirective_PSN_DirectorApprovalStatus
          NeededPermission    #Manual
          ElementPosition     #536870910
          HierarchyParent     #DirectiveStatusGroup_PSN
          DataSource          #CustDirective_PSN
          DataField           #DirectorApprovalStatus
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #CustInvoiceTable_MCRGetPaymStatus
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1957513932
          HierarchyParent     #OverviewGrid
          Label               #@MCR10565
          LabelAlignment      #Right
          DataSource          #CustInvoiceTable
          DataMethod          #mcrDisplayPaymStatus
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #CustInvoiceTable_PresenceType_BR
          ElementPosition     #477218588
          HierarchyParent     #FiscalInformation_BR
          DataSource          #CustInvoiceTable
          DataField           #PresenceType_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #Excise_IN_ExciseType_IN
          AutoDeclaration     #Yes
          ElementPosition     #511305630
          HierarchyParent     #Excise_IN
          Label               #@GLS5244
          DataSource          #CustInvoiceLine
          DataField           #ExciseType_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #ExciseManufacture_IN
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1687308579
          HierarchyParent     #Excise_IN
          DataSource          #CustInvoiceLine
          DataMethod          #exciseManufacture_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #ExciseNone_IN
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1482786327
          HierarchyParent     #Excise_IN
          DataSource          #CustInvoiceLine
          DataMethod          #exciseNone_IN
        ENDPROPERTIES
        
        METHODS
          SOURCE #enter
            #public void enter()
            #{
            #    if (ExciseRecordTypeTable_IN::existForceBatchValidation(ExciseRecordType_IN::RG23D))
            #    {
            #        this.delete(enum2str(ExciseNone_IN::RG23D));
            #    }
            #
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #ExciseTraders_IN
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1840700268
          HierarchyParent     #Excise_IN
          DataSource          #CustInvoiceLine
          DataMethod          #exciseTraders_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #ForeignTrade_Listcode
          ElementPosition     #450706444
          HierarchyParent     #ForeignTrade
          DataSource          #CustInvoiceTable
          DataField           #Listcode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #Grid_InvoiceAssociationType
          HelpText            #@SYS302166
          ElementPosition     #715827882
          HierarchyParent     #CorrectionGrid
          Label               #@SYS50025
          DataSource          #CustRelatedInvoice
          DataField           #InvoiceAssociationType
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #isRealizedVAT
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1207959543
          HierarchyParent     #LinesGrid
          DataSource          #CustInvoiceLine
          DataMethod          #isRealizedVAT
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #SourceDocumentHeader_Status
          AllowEdit           #No
          ElementPosition     #1932735276
          HierarchyParent     #OverviewGrid
          Label               #@SYS333842
          DataSource          #CustInvoiceTable
          DataMethod          #sourceDocumentStatus
          ViewEditMode        #View
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #AttachmentsAction
          HelpText            #@SYS333597
          ElementPosition     #1431655764
          HierarchyParent     #Attachments
          Text                #@SYS316708
          ButtonDisplay       #Text & Image below
          NormalImage         #10442
          ImageLocation       #EmbeddedResource
          MultiSelect         #No
          Big                 #Yes
          Primary             #Yes
          Command             #2853
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #DeleteButton
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          HelpText            #@SYS333594
          ElementPosition     #1610612733
          HierarchyParent     #MaintainAction
          Text                #@SYS14425
          ButtonDisplay       #Text & Image below
          NormalImage         #10121
          ImageLocation       #EmbeddedResource
          SaveRecord          #No
          MultiSelect         #Yes
          Primary             #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #DeleteInvoiceLine
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          ElementPosition     #1610612733
          HierarchyParent     #CVInvoiceLinesButtons
          Text                #@SYS135131
          ButtonDisplay       #Text & Image left
          NormalImage         #11400
          ImageLocation       #EmbeddedResource
          SaveRecord          #No
          MultiSelect         #Yes
          Big                 #Yes
          Primary             #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #EditButton
          AutoDeclaration     #Yes
          HelpText            #@SYS333593
          ElementPosition     #1073741822
          HierarchyParent     #MaintainAction
          Text                #@SYS317438
          ButtonDisplay       #Text & Image below
          NormalImage         #10040
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          Primary             #Yes
          Command             #4471
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #/// <summary>
            #/// This button appears when free text invoice is an active workflow and approved status, and allows the user to edit/view the free text invoice
            #/// </summary>
            #void clicked()
            #{
            #    DialogButton    button;
            #
            #    if (custInvoiceTable.WorkflowApprovalStatus == CustFreeInvoiceWFApprovalStatus::Approved)
            #    {
            #        // If the free text invoice is approved, the user can choose to either:
            #        // edit the "approved" invoice by selecting the yes button, open the details form in read-only mode
            #        // by clicking the No button, or cancel it by clicking the cancel button.
            #        button = Box::yesNoCancel(strFmt("@SYP4882620", custInvoiceTable.InvoiceAccount), DialogButton::Cancel, "@SYS328754");
            #        switch (button)
            #        {
            #            case DialogButton::Yes :
            #                CustInvoiceTable::setWorkflowState(custInvoiceTable.RecId, CustFreeInvoiceWFApprovalState::NotSubmitted);
            #                break;
            #
            #            case DialogButton::No :
            #                element.inViewMode();
            #                break;
            #
            #            case DialogButton::Cancel :
            #                return;
            #        }
            #    }
            #
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #ExportToExcel
          AllowEdit           #No
          ElementPosition     #1610612733
          HierarchyParent     #ListAction
          NormalImage         #10156
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #Yes
          Big                 #Yes
          Command             #4436
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #HeaderViewButton
          ElementPosition     #1073741822
          HierarchyParent     #ShowAction
          NormalImage         #12133
          ImageLocation       #EmbeddedResource
          SaveRecord          #No
          Big                 #Yes
          Primary             #Yes
          Command             #1320
          ToggleButton        #Radio
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #
            #    // Since the client doesn't reactivate the controls that were previously hidden we must force update to default dimensions
            #    dimensionDefaultingControllerHeader.activated(true);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #LineViewButton
          ElementPosition     #1610612733
          HierarchyParent     #ShowAction
          NormalImage         #12134
          ImageLocation       #EmbeddedResource
          SaveRecord          #No
          Big                 #Yes
          Primary             #Yes
          Command             #1321
          ToggleButton        #Radio
          ToggleValue         #On
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #ListRefresh
          HelpText            #@SYS315818
          ElementPosition     #1073741822
          HierarchyParent     #ListAction
          NormalImage         #11437
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Command             #2875
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #NewFreeTextinvoiceAction
          NeededPermission    #Create
          HelpText            #@SYS19718
          ConfigurationKey    #LedgerBasic
          SecurityKey         #CustMisc
          ElementPosition     #1431655764
          HierarchyParent     #NewInvoiceAction
          Text                #@SYS98630
          ButtonDisplay       #Text & Image above
          NormalImage         #10583
          ImageLocation       #EmbeddedResource
          MultiSelect         #Yes
          Big                 #Yes
          Primary             #Yes
          Command             #260
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #NewInvoiceLine
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          ElementPosition     #1073741822
          HierarchyParent     #CVInvoiceLinesButtons
          Text                #@SYS319116
          ButtonDisplay       #Text & Image left
          NormalImage         #10009
          ImageLocation       #EmbeddedResource
          MultiSelect         #Yes
          Big                 #Yes
          Primary             #Yes
          Command             #260
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #recalculateLineAmount
          AutoDeclaration     #Yes
          Enabled             #No
          HelpText            #@SPS222
          ConfigurationKey    #PublicSector
          ElementPosition     #1610612733
          HierarchyParent     #CustomFieldsButtons
          Text                #@SPS221
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #/// <summary>
            #/// Handles the click event of the 'Recalculate line amount' menu item.
            #/// </summary>
            #/// <remarks>
            #/// Executes the billing code script for the current invoice line.
            #/// </remarks>
            #void clicked()
            #{
            #    super();
            #    element.recalculateClicked();
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #CorrectedInvoiceDate_RU
          CountryRegionCodes  #RU
          ElementPosition     #954437174
          HierarchyParent     #CorrectedLine_RU
          DataSource          #CustInvoiceTransCorrected_RU
          DataField           #InvoiceDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #Correction_RU_CorrectedFactureDate_RU
          ElementPosition     #1449551454
          HierarchyParent     #Correction_RU
          DataSource          #CustInvoiceTable
          DataField           #CorrectedFactureDate_RU
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    custInvoiceTable_ds.initCorrFactureDisplay_RU();
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #Correction_RU_CorrectedInvoiceDate_RU
          ElementPosition     #966367636
          HierarchyParent     #Correction_RU
          DataSource          #CustInvoiceTable
          DataField           #CorrectedInvoiceDate_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #Correction_RU_CorrectedPeriod_RU
          ElementPosition     #1691143363
          HierarchyParent     #Correction_RU
          DataSource          #CustInvoiceTable
          DataField           #CorrectedPeriod_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #CustInvoiceLine_W_RefInvoiceDate_MY
          ElementPosition     #2013265905
          HierarchyParent     #LinesGrid
          DataSource          #CustInvoiceLine_W
          DataField           #RefInvoiceDate_MY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #CustInvoiceTable_CashDiscBaseDate
          ElementPosition     #894784852
          HierarchyParent     #HeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #CashDiscBaseDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #CustInvoiceTable_DeliveryDate_ES
          ElementPosition     #1968526675
          HierarchyParent     #HeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #DeliveryDate_ES
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #CustInvoiceTable_DueDate
          ElementPosition     #1163220308
          HierarchyParent     #HeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #DueDate
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #enter
            #public void enter()
            #{
            #    super();
            #
            #    priorDueDate = this.dateValue();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #CustInvoiceTable_IntrastatFulfillmentDate_HU
          ElementPosition     #1014089499
          HierarchyParent     #ForeignTrade
          DataSource          #CustInvoiceTable
          DataField           #IntrastatFulfillmentDate_HU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #CustInvoiceTable_InvoiceDate
          ElementPosition     #1288490184
          HierarchyParent     #OverviewGrid
          DataSource          #CustInvoiceTable
          DataField           #InvoiceDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #CustInvoiceTable_SalesDate_W
          ElementPosition     #1610612734
          HierarchyParent     #HeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #SalesDate_W
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #CustInvoiceTable_SalesDate_W1
          ElementPosition     #1145324610
          HierarchyParent     #CVHeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #SalesDate_W
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #CustInvoiceTable_VatDueDate
          ElementPosition     #1395864366
          HierarchyParent     #OverviewGrid
          DataSource          #CustInvoiceTable
          DataField           #VatDueDate_W
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #CustInvoiceTable_VatDueDate_W
          ElementPosition     #894784852
          HierarchyParent     #HeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #VatDueDate_W
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #CustInvoiceTable_VatDueDate_W1
          ElementPosition     #1002159034
          HierarchyParent     #CVHeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #VatDueDate_W
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #CVHeader_InvoiceDate
          ElementPosition     #858993458
          HierarchyParent     #CVHeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #InvoiceDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #DetailsHeader_InvoiceDate
          ElementPosition     #858993458
          HierarchyParent     #GroupInvoice
          DataSource          #CustInvoiceTable
          DataField           #InvoiceDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #Document_DocumentDate
          ElementPosition     #1503238551
          HierarchyParent     #Document
          DataSource          #CustInvoiceTable
          DataField           #DocumentDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #GroupInvoice_CashDiscDate
          ElementPosition     #1431655764
          HierarchyParent     #HeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #CashDiscDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #GroupInvoice_DueDate
          ElementPosition     #1717986916
          HierarchyParent     #GroupInvoice
          DataSource          #CustInvoiceTable
          DataField           #DueDate
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #enter
            #public void enter()
            #{
            #    super();
            #
            #    priorDueDate = this.dateValue();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #GroupInvoice_InvoiceDate
          ElementPosition     #715827882
          HierarchyParent     #HeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #InvoiceDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #GroupTax_VatDueDate_W
          ElementPosition     #1879048190
          HierarchyParent     #GroupTax
          DataSource          #CustInvoiceTable
          DataField           #VatDueDate_W
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #InvoiceDate
          HelpText            #@SYS302168
          ElementPosition     #1431655764
          HierarchyParent     #CorrectionGrid
          Label               #@SYS57610
          DataSource          #CustRelatedInvoice
          DataMethod          #displayInvoiceDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #lastRevisionDate_RU
          ElementPosition     #2040109461
          HierarchyParent     #Correction_RU
          DataMethod          #lastRevisionDate_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DROPDIALOGBUTTON
        PROPERTIES
          Name                #Correction
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          HelpText            #@SYS300087
          ElementPosition     #1431655764
          HierarchyParent     #AdjustmentAction
          Text                #@SYS300085
          NormalImage         #10015
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          MenuItemName        #custcreateCorrectedInvoice
        ENDPROPERTIES
        
        METHODS
          SOURCE #dialogClosed
            #/// <summary>
            #/// Refresh the form for recently added corrected invoice.
            #/// </summary>
            #/// <param name="_formRun">
            #/// The object of dialog form.
            #/// </param>
            #public void dialogClosed(FormRun _formRun)
            #{
            #    Object  formRunObj;
            #    CustFreeInvoiceCorrectionPost   custFreeInvoiceCorrectionPost;
            #    CustInvoiceTable                adjustCustInvoiceTable;
            #    boolean                         invoiceExists;
            #
            #    super(_formRun);
            #
            #    formRunObj = _formRun;
            #
            #    if (_formRun.closedOk())
            #    {
            #        custInvoiceTable_ds.research(true);
            #
            #        if (formHasMethod(_formRun,'parmCorrectedInvoiceRecId') && (formHasMethod(_formRun,'parmReasonCode')))
            #        {
            #            custInvoiceTable.CorrectionReasonCode = formRunObj.parmReasonCode();
            #            custInvoiceTable.update();
            #            invoiceExists = custInvoiceTable_ds.findValue(fieldNum(CustInvoiceTable, RecId), int642str(formRunObj.parmCorrectedInvoiceRecId()));
            #
            #            if (invoiceExists)
            #            {
            #                if (countryRegion_EEU && formHasMethod(_formRun,'parmCreateCancellingInvoiceOnly'))
            #                {
            #                    if (!formRunObj.parmCreateCancellingInvoiceOnly())
            #                    {
            #                        editButton.clicked();
            #                    }
            #                    else
            #                    {
            #                        adjustCustInvoiceTable = CustInvoiceTable::findRecId(formRunObj.parmCorrectedInvoiceRecId());
            #
            #                        custFreeInvoiceCorrectionPost = CustFreeInvoiceCorrectionPost::newCorrectedInvoice(adjustCustInvoiceTable);
            #
            #                        custFreeInvoiceCorrectionPost.post();
            #
            #                        custInvoiceTable_ds.research(true);
            #                    }
            #                }
            #                else
            #                {
            #                    editButton.clicked();
            #                }
            #            }
            #        }
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DROPDIALOGBUTTON
        PROPERTIES
          Name                #DropdialogCustFreeInvoiceCancel_BR
          AutoDeclaration     #Yes
          CountryRegionCodes  #BR
          HelpText            #@GLS63957
          ElementPosition     #1908874352
          HierarchyParent     #AdjustmentAction
          Text                #@SYS4000606
          NormalImage         #10015
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          MenuItemName        #CustFreeInvoiceCancel_BR
        ENDPROPERTIES
        
        METHODS
          SOURCE #dialogClosed
            #/// <summary>
            #/// Refresh the form for recently added corrected invoice.
            #/// </summary>
            #/// <param name="_formRun">
            #/// The object of dialog form.
            #/// </param>
            #public void dialogClosed(FormRun _formRun)
            #{
            #    Object  formRunObj;
            #
            #    super(_formRun);
            #
            #    formRunObj = _formRun;
            #
            #    if (_formRun.closedOk())
            #    {
            #        custInvoiceTable_ds.research(true);
            #
            #        if (formHasMethod(_formRun,'parmCorrectedInvoiceRecId') && (formHasMethod(_formRun,'parmReasonCode')))
            #        {
            #            custInvoiceTable.CorrectionReasonCode = formRunObj.parmReasonCode();
            #            custInvoiceTable.update();
            #            custInvoiceTable_ds.findValue(fieldNum(CustInvoiceTable, RecId), int642str(formRunObj.parmCorrectedInvoiceRecId()));
            #        }
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL INTEDIT
        PROPERTIES
          Name                #lastRevisionNum_RU
          ElementPosition     #1932735276
          HierarchyParent     #Correction_RU
          DataMethod          #lastRevisionNum_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #AccountingDistributionsDocumentView
          AutoDeclaration     #Yes
          ElementPosition     #1288490187
          HierarchyParent     #Accounting
          Text                #@SYS323891
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #AccountingDistributionsDocumentView
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #AccountingDistributionsLineButton
          AutoDeclaration     #Yes
          Enabled             #No
          ElementPosition     #1431655764
          HierarchyParent     #InvoiceLinesAccDistButtons
          Text                #@SYS304290
          ButtonDisplay       #Text & Image right
          NormalImage         #10091
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          DataSource          #CustInvoiceLine
          MenuItemName        #AccountingDistCustFreeInvoice
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    if(!custInvoiceLine.RecId)
            #    {
            #        throw error("@SYS136802");
            #    }
            #
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonCustInvoiceJournal
          ElementPosition     #1073741823
          HierarchyParent     #RelatedInformationAction
          NormalImage         #10473
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #CustInvoiceJournal
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonCustPostFactureFreeTxtJob_RU
          AutoDeclaration     #Yes
          ElementPosition     #536870910
          HierarchyParent     #PostAction
          ButtonDisplay       #Text & Image left
          NormalImage         #10731
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemType        #Action
          MenuItemName        #CustPostFactureFreeTxtJob_RU
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void  clicked()
            #{
            #    super();
            #
            #    custInvoiceTable_DS.rereadExtra_RU();
            #    element.allowEdit();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonCustPostInvoice4PaymJob_RU
          AutoDeclaration     #Yes
          ElementPosition     #805306365
          HierarchyParent     #PostAction
          ButtonDisplay       #Text & Image left
          NormalImage         #12519
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          MenuItemType        #Action
          MenuItemName        #CustPostInvoice4Paym_RU
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void  clicked()
            #{
            #    super();
            #
            #    custInvoiceTable_DS.rereadExtra_RU();
            #    element.allowEdit();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonCustPostInvoiceJob
          AutoDeclaration     #Yes
          HelpText            #@SYS333595
          ElementPosition     #1073741822
          HierarchyParent     #PostAction
          Text                #@SYS41360
          NormalImage         #10285
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemType        #Action
          MenuItemName        #CustPostInvoiceJob
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #
            #    if (custInvoiceLine.validateProjectStatus())
            #    {
            #        if (WorkflowTable::findActiveTemplate('CustFreeTextInvoiceTemplate') && element.getActiveWorkflowConfiguration())
            #        {
            #            if (custInvoiceLine.AmountCur == 0 || custInvoiceTable.WorkflowApprovalStatus == CustFreeInvoiceWFApprovalStatus::Approved)
            #            {
            #                super();
            #            }
            #            else
            #            {
            #                buttonCustPostInvoiceJob.enabled(false);
            #            }
            #        }
            #        else
            #        {
            #            super();
            #        }
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonPaymentSched
          AutoDeclaration     #Yes
          HelpText            #@SYS333247
          ElementPosition     #1533916890
          HierarchyParent     #DetailsAction
          Text                #@SYS114669
          NormalImage         #10673
          ImageLocation       #EmbeddedResource
          SaveRecord          #No
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #CustPaymSchedule
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    if (!CustPaymSched::exist(custInvoiceTable.TableId,custInvoiceTable.RecId))
            #    {
            #        custInvoiceTable.createPaymentSched();
            #    }
            #
            #    super();
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonWithholdTax_IN
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #WithholdingTax_IN
          MenuItemName        #TaxWithholdTmpWorkTrans_IN
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    CustFreeInvoiceCalcTotals custFreeInvoiceCalcTotals;
            #
            #    if (!custInvoiceTable.Posted)
            #    {
            #        custFreeInvoiceCalcTotals = new CustFreeInvoiceCalcTotals(custInvoiceTable);
            #    }
            #    else
            #    {
            #        custFreeInvoiceCalcTotals = new CustFreeInvoiceCalcTotals(null);
            #    }
            #    custFreeInvoiceCalcTotals.calc();
            #    TaxWithhold_IN::showWithholdTaxes(custFreeInvoiceCalcTotals.taxWithhold_IN(), custInvoiceLine);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #Cov
          HelpText            #@SYS333248
          ElementPosition     #1431655764
          HierarchyParent     #RelatedInformationAction
          Text                #@SYS114911
          NormalImage         #10473
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #LedgerCoverage
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CreditCardTable
          AutoDeclaration     #Yes
          ElementPosition     #1288490187
          HierarchyParent     #ManageCreditCard
          ButtonDisplay       #Text & Image left
          ShowShortCut        #No
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #CreditCardTableAdd
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CreditCardTrans
          ElementPosition     #1717986916
          HierarchyParent     #ManageCreditCard
          Text                #@SYS1084
          DataSource          #CustInvoiceTable
          MenuItemName        #CreditCardTRans
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CustAdvanceInvoice_CZ
          HelpText            #@GLS220282
          ElementPosition     #1968526675
          HierarchyParent     #NewInvoiceAction
          Text                #@GLS107927
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #CzCustAdvanceInvoiceCreate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CustFreeCreditNote_W
          AutoDeclaration     #Yes
          ElementPosition     #954437176
          HierarchyParent     #AdjustmentAction
          ButtonDisplay       #Text & Image left
          NormalImage         #10534
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #CustFreeCreditNote_W
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CustFreeInvoiceCC
          AutoDeclaration     #Yes
          ElementPosition     #858993458
          HierarchyParent     #ManageCreditCard
          Text                #@ACC1514
          ButtonDisplay       #Text & Image above
          NormalImage         #12464
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #CustFreeInvoiceCC
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CustInvoice4PaymJournal_RU
          AutoDeclaration     #Yes
          ElementPosition     #894784852
          HierarchyParent     #RelatedInformationAction
          ButtonDisplay       #Text & Image left
          NormalImage         #10498
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #CustInvoice4PaymJournal_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CustInvoiceTableTotals
          HelpText            #@SYS333596
          ElementPosition     #613566756
          HierarchyParent     #DetailsAction
          Text                #@SYS114611
          NormalImage         #10832
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #CustInvoiceTableTotals
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CustOpenTransButton
          AutoDeclaration     #Yes
          HelpText            #@SYS114671
          ElementPosition     #715827882
          HierarchyParent     #RelatedInformationAction
          Text                #@SYS114671
          NormalImage         #10793
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #CustOpenTrans
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    if (TaxWithholdParameters_IN::checkTaxParameters())
            #    {
            #        recreateWithholdTax = true;
            #        TaxWithholdUncommitted_IN::deleteForDocumentHeader(custInvoiceTable.TableId, custInvoiceTable.RecId);
            #    }
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CVSetupCustVendCreditInvoicingAction
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #CVInvoiceLinesExtraButtons
          ButtonDisplay       #Text & Image left
          NormalImage         #10613
          ImageLocation       #EmbeddedResource
          NeedsRecord         #Yes
          DataSource          #CustInvoiceLine
          MenuItemName        #CustVendCreditInvoicing
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #DirPartyPostalAddressNew
          ElementPosition     #1073741822
          HierarchyParent     #ButtonGroup
          Text                #@SYS111834
          ButtonDisplay       #Text & Image left
          ImageLocation       #EmbeddedResource
          MenuItemName        #CustDirPartyPostalAddressNew
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #DistributeAmounts
          AutoDeclaration     #Yes
          ElementPosition     #858993458
          HierarchyParent     #Accounting
          Text                #@SYS135311
          ButtonDisplay       #Text & Image left
          NormalImage         #10091
          ImageLocation       #EmbeddedResource
          DataSource          #CustInvoiceTable
          MenuItemName        #AccountingDistCustFreeInvoice
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    CustFreeInvoiceCalcTotals   custFreeInvoiceCalcTotals;
            #
            #    if (custInvoiceLine.RecId != 0.0)
            #    {
            #        custFreeInvoiceCalcTotals = new CustFreeInvoiceCalcTotals(custInvoiceTable);
            #        custFreeInvoiceCalcTotals.calc();
            #    }
            #
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #FactureJournalCust_RU
          AutoDeclaration     #Yes
          ElementPosition     #1252698793
          HierarchyParent     #RelatedInformationAction
          ButtonDisplay       #Text & Image left
          NormalImage         #10733
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #FactureJournalCust_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #FiscalDocumentText_BR
          AllowEdit           #No
          CountryRegionCodes  #BR
          ElementPosition     #1789569705
          HierarchyParent     #Attachments
          NormalImage         #10099
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #FiscalDocumentText_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #HeaderTaxForms_IN
          ElementPosition     #1968526675
          HierarchyParent     #Attachments
          ButtonDisplay       #Text & Image above
          NormalImage         #10837
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #No
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #TransitDocumentSalesTaxForm_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #LineChargeButton
          AutoDeclaration     #Yes
          CountryRegionCodes  #BR,CN,CZ,EE,HU,IN,JP,LT,LV,PL,RU
          HelpText            #@SYS68929
          ElementPosition     #1431655764
          HierarchyParent     #InvoiceLinesChargeButtons
          Text                #@SYS117387
          ButtonDisplay       #Text & Image right
          NormalImage         #10639
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          DataSource          #CustInvoiceLine
          MenuItemName        #markuptrans_linesales
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #LineFiscalDocumentText_BR
          AutoDeclaration     #Yes
          AllowEdit           #No
          CountryRegionCodes  #BR
          ElementPosition     #1431655764
          HierarchyParent     #LineAttachments_BR
          NormalImage         #10099
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #CustInvoiceLine
          MenuItemName        #FiscalDocumentText_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MaintainTitre_PSN
          AutoDeclaration     #Yes
          HelpText            #@GLS223341
          ConfigurationKey    #PurchFrenchRegulatory_PSN
          ElementPosition     #572662304
          HierarchyParent     #Accounting
          Text                #@GLS223340
          ButtonDisplay       #Text & Image above
          NormalImage         #10724
          ImageLocation       #EmbeddedResource
          MultiSelect         #No
          Big                 #Yes
          Primary             #Yes
          MenuItemName        #CustDirective_PSN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MarkupTrans
          AutoDeclaration     #Yes
          HelpText            #@SYS333246
          ElementPosition     #920350134
          HierarchyParent     #DetailsAction
          Text                #@SYS117387
          NormalImage         #10639
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #MarkupTrans_HeadingSales
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MCRCustPaymTableButton
          AutoDeclaration     #Yes
          ElementPosition     #1073741823
          HierarchyParent     #DetailsAction
          ButtonDisplay       #Text & Image left
          NormalImage         #12405
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #MCRCustPaymTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MenuItemButton
          ElementPosition     #1610612733
          HierarchyParent     #ButtonGroup
          ButtonDisplay       #Text & Image left
          DataSource          #CustInvoiceTable
          MenuItemName        #LogisticsLocationSelect
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PaymentJournal
          AllowEdit           #No
          HelpText            #@SYS332297
          ConfigurationKey    #LedgerBasic
          ElementPosition     #1789569705
          HierarchyParent     #NewInvoiceAction
          NormalImage         #10672
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          MenuItemName        #LedgerJournalTable_CustPaymNew
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    MenuFunction menuFunction;
            #
            #    menuFunction = new MenuFunction(#LedgerJournalTable_CustPaym, MenuItemType::Display);
            #    menuFunction.parameters(#FormOpenModeForNew);
            #    menuFunction.run();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SetupCustVendCreditInvoicingAction
          AutoDeclaration     #Yes
          ElementPosition     #1879048188
          HierarchyParent     #SetupAction
          NormalImage         #10613
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #CustVendCreditInvoicing
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SubLedgerJournal
          AutoDeclaration     #Yes
          HelpText            #@SYS135733
          ElementPosition     #1717986916
          HierarchyParent     #Accounting
          Text                #@SYS135346
          NormalImage         #10097
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #SubledgerJournalAccountEntries
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    CustFreeInvoiceCalcTotals custFreeInvoiceCalcTotals;
            #
            #    if (cvLinesFastTab.isActivePage() && custInvoiceLine.RecId == 0)
            #    {
            #        throw error("@SYS136802");
            #    }
            #
            #    // calculate taxes - if TaxUncommitted record already exist then this will do nothing
            #    custFreeInvoiceCalcTotals = new CustFreeInvoiceCalcTotals(custInvoiceTable);
            #
            #    if (custInvoiceTable.Posted == NoYes::Yes)
            #    {
            #        custFreeInvoiceCalcTotals.calc(0, true);
            #    }
            #    else
            #    {
            #       custFreeInvoiceCalcTotals.calc();
            #    }
            #
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TaxRegisterBalance_IN
          CountryRegionCodes  #IN
          ElementPosition     #1431655764
          HierarchyParent     #TaxRegister_IN
          MenuItemName        #TaxRegisterBalance_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TaxTransSource
          AutoDeclaration     #Yes
          HelpText            #@SYS149147
          ElementPosition     #1227133512
          HierarchyParent     #DetailsAction
          Text                #@SYS309491
          NormalImage         #10777
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          MenuItemName        #TaxTransSourceCustFreeText
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    CustFreeInvoiceCalcTotals   custFreeInvoiceCalcTotals;
            #    Args                        args;
            #    FormRun                     formRun;
            #
            #    if (custInvoiceTable.Posted)
            #    {
            #        args = new Args();
            #        args.caller(this);
            #        args.record(custInvoiceTable.custInvoiceJour());
            #
            #        formRun = new MenuFunction(menuitemDisplayStr(TaxTrans), MenuItemType::Display).create(args);
            #        formRun.run();
            #    }
            #    else
            #    {
            #        custFreeInvoiceCalcTotals = new CustFreeInvoiceCalcTotals(custInvoiceTable);
            #        custFreeInvoiceCalcTotals.calc();
            #        Tax::showTaxes(menuitemDisplayStr(TaxTmpWorkCustFreeText), custFreeInvoiceCalcTotals.tax(), custInvoiceTable
            #        , this.formRun()
            #        , (custInvoiceTable.isWorkflowEditable() ? OpenMode::Auto : OpenMode::View)
            #        );
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TradeBLWIChangeCode
          ElementPosition     #1610612730
          HierarchyParent     #SetupAction
          Text                #@SYS114960
          NormalImage         #10478
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          DataSource          #CustInvoiceTable
          MenuItemType        #Action
          MenuItemName        #TradeBLWIChangeCustFreeInvoice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TransportationDocument
          ElementPosition     #1431655764
          HierarchyParent     #Delivery
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #CustInvoiceTable
          MenuItemName        #TransportationDocument
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Amount
          ElementPosition     #1789569705
          HierarchyParent     #CreditNoteOriginalInvoice
          Label               #@SYS62867
          DataSource          #TmpCustVendTrans
          DataField           #AmountCur
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #CorrectedLineNum_RU
          CountryRegionCodes  #RU
          ElementPosition     #1849222025
          HierarchyParent     #CorrectedLine_RU
          DataSource          #CustInvoiceTransCorrected_RU
          DataField           #LineNum
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #CorrectedQty_RU
          CountryRegionCodes  #RU
          ElementPosition     #1252698791
          HierarchyParent     #CorrectedLine_RU
          DataSource          #CustInvoiceTransCorrected_RU
          DataField           #Qty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #CorrectedSalesPrice_RU
          CountryRegionCodes  #RU
          ElementPosition     #1550960408
          HierarchyParent     #CorrectedLine_RU
          DataSource          #CustInvoiceTransCorrected_RU
          DataField           #SalesPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Currency_M_displayExchRate
          AutoDeclaration     #Yes
          AllowEdit           #No
          NeededPermission    #Manual
          HelpText            #@SYS324259
          ElementPosition     #1073741823
          HierarchyParent     #Currency
          DataSource          #CustInvoiceTable
          DataMethod          #displayExchRate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Currency_M_displayExchRateSecondary
          AutoDeclaration     #Yes
          AllowEdit           #No
          NeededPermission    #Manual
          HelpText            #@SYS324259
          ElementPosition     #1431655764
          HierarchyParent     #Currency
          DataSource          #CustInvoiceTable
          DataMethod          #displayExchRateSecondary
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Currency_M_editExchRate_W
          AutoDeclaration     #Yes
          CountryRegionCodes  #CZ,EE,HU,LT,LV,PL,RU
          ElementPosition     #1934972243
          HierarchyParent     #Currency
          DataSource          #CustInvoiceTable
          DataMethod          #editExchRate_W
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #CustInvoiceLine_AmountCur
          AutoDeclaration     #Yes
          ElementPosition     #1610612724
          HierarchyParent     #LinesGrid
          DataSource          #CustInvoiceLine
          DataField           #AmountCur
        ENDPROPERTIES
        
        METHODS
          SOURCE #textChange
            #public void textChange()
            #{
            #    super();
            #
            #    element.enableDistButtonBasedOnAmountCur();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #CustInvoiceLine_Quantity
          AutoDeclaration     #Yes
          ElementPosition     #1342177270
          HierarchyParent     #LinesGrid
          DataSource          #CustInvoiceLine
          DataField           #Quantity
        ENDPROPERTIES
        
        METHODS
          SOURCE #textChange
            #public void textChange()
            #{
            #    super();
            #
            #    element.enableDistButtonBasedOnAmountCur();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #CustInvoiceLine_UnitPrice
          AutoDeclaration     #Yes
          ElementPosition     #1476394997
          HierarchyParent     #LinesGrid
          DataSource          #CustInvoiceLine
          DataField           #UnitPrice
        ENDPROPERTIES
        
        METHODS
          SOURCE #textChange
            #public void textChange()
            #{
            #    super();
            #
            #    element.enableDistButtonBasedOnAmountCur();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #CustInvoiceLineAsset_AssetSaleFactor
          AutoDeclaration     #Yes
          ElementPosition     #1879048189
          HierarchyParent     #CVLineDetailsFixedAssetsGroup
          DataSource          #CustInvoiceLineAsset
          DataField           #AssetSaleFactor
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #InvoiceAmount
          HelpText            #@SYS302160
          ElementPosition     #1789569705
          HierarchyParent     #CorrectionGrid
          Label               #@SYS9458
          DataSource          #CustRelatedInvoice
          DataMethod          #displayInvoiceAmount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #Reference_RefInvoiceAmountCur
          ElementPosition     #1073741823
          HierarchyParent     #Reference
          DataSource          #CustInvoiceTableExtensionTH
          DataField           #RefInvoiceAmountCur
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEGMENTEDENTRY
        PROPERTIES
          Name                #CustInvoiceLine_LedgerAccount
          AutoDeclaration     #Yes
          ElementPosition     #671088635
          HierarchyParent     #LinesGrid
          DataSource          #CustInvoiceLine
          ReferenceField      #LedgerDimension
        ENDPROPERTIES
        
        METHODS
          SOURCE #jumpRef
            #public void jumpRef()
            #{
            #    linesDefaultAccountController.jumpRef();
            #}
          ENDSOURCE
          SOURCE #loadAutoCompleteData
            #public void loadAutoCompleteData(LoadAutoCompleteDataEventArgs _e)
            #{
            #    linesDefaultAccountController.loadAutoCompleteData(_e);
            #    super(_e);
            #}
          ENDSOURCE
          SOURCE #loadSegments
            #public void loadSegments()
            #{
            #    super();
            #    linesDefaultAccountController.loadSegments();
            #}
          ENDSOURCE
          SOURCE #segmentValueChanged
            #public void segmentValueChanged(SegmentValueChangedEventArgs _e)
            #{
            #    super(_e);
            #    linesDefaultAccountController.segmentValueChanged(_e);
            #}
          ENDSOURCE
          SOURCE #validate
            #public boolean validate()
            #{
            #    boolean isValid;
            #
            #    isValid = super();
            #    isValid = linesDefaultAccountController.validate() && isValid;
            #
            #    return isValid;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #Separator
          ElementPosition     #1670265058
          HierarchyParent     #AdjustmentAction
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STATICTEXT
        PROPERTIES
          Name                #InfoBarText
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #InfoBar
          Text                #@SYS308706
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Address_Name
          ElementPosition     #858993458
          HierarchyParent     #Address
          MultiLine           #Yes
          DataSource          #CustInvoiceTable
          DataField           #Name
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Codes_ItemCodeId
          ElementPosition     #477218588
          HierarchyParent     #Codes
          DataSource          #CustInvoiceLine
          DataField           #ItemCodeId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Codes_Port
          ElementPosition     #1193046470
          HierarchyParent     #Codes
          DataSource          #CustInvoiceLine
          DataField           #Port
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Codes_StatProcId
          ElementPosition     #1431655764
          HierarchyParent     #Codes
          DataSource          #CustInvoiceLine
          DataField           #StatProcId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Codes_TransactionCode
          ElementPosition     #954437176
          HierarchyParent     #Codes
          DataSource          #CustInvoiceLine
          DataField           #TransactionCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Codes_Transport
          ElementPosition     #715827882
          HierarchyParent     #Codes
          DataSource          #CustInvoiceLine
          DataField           #Transport
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CompanyAddress
          ElementPosition     #1442840573
          HierarchyParent     #CompanyInfo
          Label               #@SYS36203
          DataSource          #CustInvoiceLine
          DataMethod          #displayAddress_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ContactPersonId
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1789569705
          HierarchyParent     #GroupReference
          DataSource          #CustInvoiceTable
          DataField           #ContactPersonId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #contactPersonName
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #GroupReference
          LookupButton        #Always
          DataSource          #CustInvoiceTable
          DataMethod          #editContactPersonName
          PresenceDataSource  #CustInvoiceTable
          PresenceDataField   #ContactPersonId
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #void lookup()
            #{
            #    ContactPerson::lookupCustContactPerson(contactPersonId,
            #                                           custInvoiceTable.OrderAccount,
            #                                           this,
            #                                           custInvoiceTable.ContactPersonId);
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CorrectedInvoiceId_RU
          CountryRegionCodes  #RU
          ElementPosition     #656175557
          HierarchyParent     #CorrectedLine_RU
          DataSource          #CustInvoiceTransCorrected_RU
          DataField           #InvoiceId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CorrectedLineName_RU
          CountryRegionCodes  #RU
          ElementPosition     #357913940
          HierarchyParent     #CorrectedLine_RU
          LookupButton        #Always
          DataSource          #CustInvoiceLine
          DataMethod          #editCorrName_RU
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    CustVendInvoiceTrans custVendInvoiceTrans;
            #    ;
            #
            #    custVendInvoiceTrans = CustVendInvoiceTrans::lookupCorrectedTrans_RU(this,
            #                                                                         custInvoiceTable.CorrectedInvoiceId_RU,
            #                                                                         custInvoiceTable.CorrectedInvoiceDate_RU,
            #                                                                         custInvoiceTable.InvoiceAccount,
            #                                                                         custInvoiceTable.CurrencyCode,
            #                                                                         custInvoiceLine);
            #
            #    if (custVendInvoiceTrans.RecId)
            #    {
            #        custInvoiceLineCorrLink_RU.CorrTransRecId = custVendInvoiceTrans.RecId;
            #
            #        if (custInvoiceLineCorrLink_RU_DS.validateWrite())
            #        {
            #            custInvoiceLineCorrLink_RU.write();
            #            custInvoiceLineCorrLink_RU_DS.active();
            #        }
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Correction_RU_CorrectedFactureExternalId_RU
          ElementPosition     #1207959545
          HierarchyParent     #Correction_RU
          DataSource          #CustInvoiceTable
          DataField           #CorrectedFactureExternalId_RU
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    FactureJour_RU factureJour;
            #    Set             invoiceJourSet = new Set(Types::Int64);
            #    CustInvoiceJour custInvoiceJour = CustInvoiceJour::findFromCustTrans(custInvoiceTable.CorrectedInvoiceId_RU,
            #                                                                         custInvoiceTable.CorrectedInvoiceDate_RU,
            #                                                                         custInvoiceTable.InvoiceAccount);
            #
            #    invoiceJourSet.add(custInvoiceJour.RecId);
            #
            #    factureJour = FactureJour_RU::lookupCorrectedFactureExternalId(this,
            #                                                                   custInvoiceTable.InvoiceAccount,
            #                                                                   FactureTaxCorrectionContragentType_RU::Customer,
            #                                                                   invoiceJourSet,
            #                                                                   false);
            #
            #    if (factureJour)
            #    {
            #        custInvoiceTable.CorrectedFactureDate_RU = factureJour.FactureDate;
            #    }
            #}
          ENDSOURCE
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    custInvoiceTable_ds.initCorrFactureDisplay_RU();
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Correction_RU_CorrectedInvoiceId_RU
          ElementPosition     #724775727
          HierarchyParent     #Correction_RU
          DataSource          #CustInvoiceTable
          DataField           #CorrectedInvoiceId_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CorrectionReasonCode
          AutoDeclaration     #Yes
          HelpText            #@SYS300080
          ElementPosition     #1073741822
          HierarchyParent     #CorrectionReason
          DataSource          #CustInvoiceTable
          Mandatory           #Yes
          DataMethod          #editReasonCode
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    ReasonFormTable::reasonCodeLookup(
            #                                    this,
            #                                    LedgerJournalACType::FixedAssets,
            #                                    LedgerJournalACType::Cust,
            #                                    true,
            #                                    false,
            #                                    LedgerJournalACType::Ledger,
            #                                    true);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CorrectionReasonComment
          AutoDeclaration     #Yes
          HelpText            #@SYS300081
          ElementPosition     #1610612733
          HierarchyParent     #CorrectionReason
          Label               #@SYS71295
          DataSource          #CustInvoiceTable
          DataMethod          #editReasonComment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Currency_CurrencyCode
          ElementPosition     #715827882
          HierarchyParent     #Currency
          DataSource          #CustInvoiceTable
          DataField           #CurrencyCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Currency_M_exchRateTxt
          AllowEdit           #No
          ElementPosition     #1722460841
          HierarchyParent     #Currency
          DataSource          #CustInvoiceTable
          DataMethod          #exchRateTxt
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustBankAccountId
          ElementPosition     #1717986916
          HierarchyParent     #LineVAT
          DataSource          #CustInvoiceTable
          DataField           #CustBankAccountId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustDirective_PSN_AccountantUserId
          AllowEdit           #No
          ElementPosition     #1610612730
          HierarchyParent     #DirectiveStatusGroup_PSN
          DataSource          #CustDirective_PSN
          DataField           #AccountantUserId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustDirective_PSN_CustDirectiveBudgetaryAccount
          ElementPosition     #1789569705
          HierarchyParent     #DirectiveGroup_PSN
          DataSource          #CustDirective_PSN
          DataField           #CustDirectiveBudgetaryAccount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustDirective_PSN_CustDirectiveId
          AllowEdit           #No
          ElementPosition     #715827882
          HierarchyParent     #DirectiveGroup_PSN
          DataSource          #CustDirective_PSN
          DataField           #CustDirectiveId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustDirective_PSN_DirectorUserId
          AllowEdit           #No
          ElementPosition     #805306365
          HierarchyParent     #DirectiveStatusGroup_PSN
          DataSource          #CustDirective_PSN
          DataField           #DirectorUserId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustDirective_PSN_Memo
          HelpText            #@GLS223338
          ElementPosition     #1431655764
          HierarchyParent     #DirectiveMemoGroup_PSN
          DataSource          #CustDirective_PSN
          DataField           #Memo
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceLine_AssetId_ru
          ElementPosition     #715827882
          HierarchyParent     #FixedAssets_RU
          DataSource          #CustInvoiceLine
          DataField           #AssetId_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceLine_BillingCodeString
          AutoDeclaration     #Yes
          ElementPosition     #268435454
          HierarchyParent     #LinesGrid
          DataSource          #CustInvoiceLine
          DataField           #BillingCode
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    custInvoiceLineBillingCode = this.valueStr();
            #
            #    ret = super();
            #
            #    return ret;
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceLine_Description
          AutoDeclaration     #Yes
          ElementPosition     #402653181
          HierarchyParent     #LinesGrid
          DataSource          #CustInvoiceLine
          DataField           #Description
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceLine_EInvoiceAccountCode
          AutoDeclaration     #Yes
          ElementPosition     #1717986916
          HierarchyParent     #CVInvoiceDetailsGeneralTabPage
          DataSource          #CustInvoiceLine
          DataField           #EInvoiceAccountCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceLine_InvoiceTxt
          ElementPosition     #858993458
          HierarchyParent     #CVInvoiceDetailsGeneralTabPage
          DataSource          #CustInvoiceLine
          DataField           #InvoiceTxt
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceLine_PKWiUCode_PL
          ElementPosition     #536870908
          HierarchyParent     #LinesGrid
          DataSource          #CustInvoiceLine
          DataField           #PKWiUCode_PL
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceLine_PropertyNumber_MX
          CountryRegionCodes  #MX
          ElementPosition     #1431655764
          HierarchyParent     #CVInvoiceDetailsCFDTabPage_MX
          DataSource          #CustInvoiceLine
          DataField           #PropertyNumber_MX
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceLine_SalesUnit_RU
          ElementPosition     #1744830451
          HierarchyParent     #LinesGrid
          DataSource          #CustInvoiceLine
          DataField           #SalesUnit_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceLine_TaxGroup
          AutoDeclaration     #Yes
          ElementPosition     #939524089
          HierarchyParent     #LinesGrid
          DataSource          #CustInvoiceLine
          DataField           #TaxGroup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceLine_TaxItemGroup
          AutoDeclaration     #Yes
          ElementPosition     #1073741816
          HierarchyParent     #LinesGrid
          DataSource          #CustInvoiceLine
          DataField           #TaxItemGroup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceLine_W_RefInvoiceID_MY
          ElementPosition     #1879048178
          HierarchyParent     #LinesGrid
          DataSource          #CustInvoiceLine_W
          DataField           #RefInvoiceID_MY
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    element.performCustInvoiceJourLookup_MY(
            #        this,
            #        queryValue(RefNum::Cust),
            #        custInvoiceTable.OrderAccount);
            #}
          ENDSOURCE
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    if (ret)
            #    {
            #        if(this.text())
            #        {
            #            element.updateSourceRefControlsAfterLookup_MY();
            #        }
            #    }
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceLineTaxExtensionIN_TaxWithholdAcknowledgementNumber
          ElementPosition     #1431655764
          HierarchyParent     #WithholdingTax
          DataSource          #CustInvoiceLineTaxExtensionIN
          DataField           #TaxWithholdAcknowledgementNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceTable_CFPSId_BR
          ElementPosition     #1610612734
          HierarchyParent     #FiscalInformation_BR
          DataSource          #CustInvoiceTable
          DataField           #CFPSId_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceTable_CurrencyCode
          ElementPosition     #1556925639
          HierarchyParent     #OverviewGrid
          DataSource          #CustInvoiceTable
          DataField           #CurrencyCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceTable_CustBankAccountId
          ElementPosition     #1717986916
          HierarchyParent     #HeadVAT
          DataSource          #CustInvoiceTable
          DataField           #CustBankAccountId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceTable_DocNumberingCode_LT
          ElementPosition     #572662304
          HierarchyParent     #CVHeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #DocNumberingCode_LT
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceTable_InvoiceAccount
          PreviewPartRef      #CustFreeInvoiceCustAccountPreview
          ElementPosition     #858993456
          HierarchyParent     #OverviewGrid
          DataSource          #CustInvoiceTable
          DataField           #InvoiceAccount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceTable_InvoiceId
          ElementPosition     #1717986912
          HierarchyParent     #OverviewGrid
          DataSource          #CustInvoiceTable
          DataField           #InvoiceId
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceTable_ManualInvoiceID_W
          ElementPosition     #715827880
          HierarchyParent     #CVHeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #ManualInvoiceID_W
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceTable_OrderAccount
          AutoDeclaration     #Yes
          PreviewPartRef      #CustFreeInvoiceCustAccountPreview
          ElementPosition     #429496728
          HierarchyParent     #OverviewGrid
          DataSource          #CustInvoiceTable
          DataField           #OrderAccount
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #/// <summary>
            #/// Calls the <c>MCRCustLookup</c> form.
            #/// </summary>
            #public void lookup()
            #{
            #    Args    args;
            #    FormRun formRun;
            #
            #    if (mcrCallCenterEnabled)
            #    {
            #        args = new Args(formStr(MCRCustLookup));
            #        formRun = ClassFactory::formRunClassOnClient(args);
            #        formRun.init();
            #        this.performFormLookup(formRun);
            #    }
            #    else
            #    {
            #        super();
            #    }
            #}
            #
          ENDSOURCE
          SOURCE #modified
            #public boolean modified()
            #{
            #    DimensionDefault dimensionDefault;
            #    boolean ret;
            #
            #    ret = super();
            #
            #    dimensionDefaultingControllerHeader.activated(true);
            #
            #    if (custInvoiceLine)
            #    {
            #        if (custInvoiceLine.DefaultDimension)
            #        {
            #            dimensionDefault = custInvoiceLine.DefaultDimension;
            #        }
            #        else
            #        {
            #            dimensionDefault = custInvoiceTable.DefaultDimension;
            #        }
            #
            #        // update the default dimension on the line
            #        custInvoiceLine.DefaultDimension = dimensionDefault;
            #        dimensionDefaultingControllerLine.activated(true);
            #    }
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustInvoiceTable_OrderAccount_Name
          AutoDeclaration     #Yes
          AllowEdit           #No
          ElementPosition     #644245092
          HierarchyParent     #OverviewGrid
          Label               #@SYS137153
          DataSource          #CustInvoiceTable
          DataMethod          #editOrderAccountName
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustomerRef
          ElementPosition     #1073741823
          HierarchyParent     #GroupReference
          DataSource          #CustInvoiceTable
          DataField           #CustomerRef
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CustRecurrenceInvoiceGroup_RecurrenceInvoiceId
          HelpText            #@SYS321878
          ElementPosition     #1431655764
          HierarchyParent     #GroupRecurrenceInvoice
          DataSource          #CustRecurrenceInvoiceGroup
          DataField           #RecurrenceInvoiceId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CVHeader_Address
          ElementPosition     #1717986916
          HierarchyParent     #CVHeaderCustomerGroup
          DataSource          #LogisticsPostalAddress
          DataField           #Address
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CVHeader_CurrencyCode
          ElementPosition     #1717986916
          HierarchyParent     #CVHeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #CurrencyCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CVHeader_InvoiceAccount
          ElementPosition     #1431655764
          HierarchyParent     #CVHeaderAccountNamesGroup
          DataSource          #CustInvoiceTable
          DataField           #InvoiceAccount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CVHeader_InvoiceAccountName
          ElementPosition     #1789569705
          HierarchyParent     #CVHeaderAccountNamesGroup
          Label               #@SYS92116
          DataSource          #CustInvoiceTable
          DataMethod          #displayInvoiceAccountName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CVHeader_InvoiceId
          ElementPosition     #1288490187
          HierarchyParent     #CVHeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #InvoiceId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CVHeader_OrderAccount
          AutoDeclaration     #Yes
          ElementPosition     #715827882
          HierarchyParent     #CVHeaderAccountNamesGroup
          DataSource          #CustInvoiceTable
          DataField           #OrderAccount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CVHeader_OrderAccountName
          AutoDeclaration     #Yes
          AllowEdit           #No
          ElementPosition     #1073741823
          HierarchyParent     #CVHeaderAccountNamesGroup
          Label               #@SYS92116
          DataSource          #CustInvoiceTable
          DataMethod          #editOrderAccountName
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret = super();
            #
            #    element.setFieldsEditable();
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Description
          ElementPosition     #1431655764
          HierarchyParent     #CreditNoteOriginalInvoice
          DataSource          #TmpCustVendTrans
          DataField           #Txt
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #DetailsHeader_Address
          ElementPosition     #1789569705
          HierarchyParent     #CustomerAccountAndName
          DataSource          #LogisticsPostalAddress
          DataField           #Address
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #DetailsHeader_CurrencyCode
          ElementPosition     #1789569705
          HierarchyParent     #HeaderInvoiceGroup
          DataSource          #CustInvoiceTable
          DataField           #CurrencyCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #DetailsHeader_InvoiceId
          ElementPosition     #1288490187
          HierarchyParent     #GroupInvoice
          DataSource          #CustInvoiceTable
          DataField           #InvoiceId
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #displayVATRegistration
          ElementPosition     #1288490187
          HierarchyParent     #LineVAT
          DataSource          #CustInvoiceTable
          DataMethod          #dispVATRegistrationNum
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #displayVATRegistrationNum
          ElementPosition     #1288490187
          HierarchyParent     #HeadVAT
          DataSource          #CustInvoiceTable
          DataMethod          #dispVATRegistrationNum
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #DistributionTemplateHeader
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #GroupDistributionTemplateHeader
          Label               #@sys30829
          DataSource          #CustInvoiceTable
          DataMethod          #templateName
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    AccountingDistributionTemplate::lookupTemplateName(distributionTemplateHeader);
            #}
          ENDSOURCE
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean                             ret;
            #    AccountingDistributionTemplate      accountingDistributionTemplate;
            #
            #    if (this.text())
            #    {
            #        accountingDistributionTemplate = AccountingDistributionTemplate::findByName(this.text());
            #
            #        if (accountingDistributionTemplate)
            #        {
            #            ret = super();
            #        }
            #        else
            #        {
            #            ret = checkFailed(strFmt("@SYS302773", this.text()));
            #            this.text('');
            #        }
            #    }
            #    else
            #    {
            #        ret = super();
            #    }
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #DistributionTemplateLine
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #GroupDistributionTemplateLine
          Label               #@sys30829
          DataSource          #CustInvoiceLine
          DataMethod          #templateName
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    AccountingDistributionTemplate::lookupTemplateName(distributionTemplateLine);
            #}
          ENDSOURCE
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean                             ret;
            #    AccountingDistributionTemplate      accountingDistributionTemplate;
            #
            #    if (this.text())
            #    {
            #        accountingDistributionTemplate = AccountingDistributionTemplate::findByName(this.text());
            #
            #        if (accountingDistributionTemplate)
            #        {
            #            ret = super();
            #        }
            #        else
            #        {
            #            ret = checkFailed(strFmt("@SYS302773", this.text()));
            #            this.text('');
            #        }
            #    }
            #    else
            #    {
            #        ret = super();
            #    }
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #editReasonCode
          AutoDeclaration     #Yes
          ElementPosition     #858993458
          HierarchyParent     #CVInvoiceDetailsReasonsTabPage
          DataSource          #CustInvoiceLine
          DataMethod          #editReasonCode
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #/// <summary>
            #/// Opens fitered reason code lookup.
            #/// </summary>
            #public void lookup()
            #{
            #    LedgerJournalACType   offsetacttype;
            #    LedgerJournalACType   acttype;
            #    LedgerJournalACType   ledgerAccountType;
            #    boolean               useLedgerAccount;
            #    boolean               useOffsetAccount;
            #    boolean               useMainAccount;
            #
            #    if (!custInvoiceLine.AssetId)
            #    {
            #        useOffsetAccount=false;
            #    }
            #    else
            #    {
            #        useOffsetAccount=true;
            #    }
            #    useMainAccount      = true;
            #    useLedgerAccount    = true;
            #    offsetacttype=LedgerJournalACType::FixedAssets;
            #    acttype=LedgerJournalACType::Cust;
            #    ledgerAccountType       = LedgerJournalACType::Ledger;
            #
            #    ReasonFormTable::reasonCodeLookup(this,offsetacttype,acttype,useMainAccount,useOffsetAccount,ledgerAccountType,useLedgerAccount);
            #}
          ENDSOURCE
          SOURCE #modified
            #/// <summary>
            #/// Redraws the form as the reason code field is modified.
            #/// </summary>
            #/// <returns>
            #/// A boolean indidcating whther the field is modified or not.
            #/// </returns>
            #public boolean modified()
            #{
            #    boolean ret;
            #    ret = super();
            #    element.redraw();
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #editReasonCodeCreditNote
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #CreditNoteReason
          DataSource          #CustInvoiceLine
          DataMethod          #editReasonCode
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #/// <summary>
            #/// Opens fitered reason code lookup.
            #/// </summary>
            #public void lookup()
            #{
            #    LedgerJournalACType   offsetacttype;
            #    LedgerJournalACType   acttype;
            #    LedgerJournalACType   ledgerAccountType;
            #    boolean               useLedgerAccount;
            #    boolean               useOffsetAccount;
            #    boolean               useMainAccount;
            #
            #    if (!custInvoiceLine.AssetId)
            #    {
            #        useOffsetAccount=false;
            #    }
            #    else
            #    {
            #        useOffsetAccount=true;
            #    }
            #    useMainAccount      = true;
            #    useLedgerAccount    = true;
            #    offsetacttype=LedgerJournalACType::FixedAssets;
            #    acttype=LedgerJournalACType::Cust;
            #    ledgerAccountType       = LedgerJournalACType::Ledger;
            #
            #    ReasonFormTable::reasonCodeLookup(this,offsetacttype,acttype,useMainAccount,useOffsetAccount,ledgerAccountType,useLedgerAccount);
            #}
          ENDSOURCE
          SOURCE #modified
            #/// <summary>
            #/// Redraws the form as the reason code field is modified.
            #/// </summary>
            #/// <returns>
            #/// A boolean indidcating whther the field is modified or not.
            #/// </returns>
            #public boolean modified()
            #{
            #    boolean ret;
            #    ret = super();
            #    element.redraw();
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #editReasonCodeForUnrealizedVAT
          AutoDeclaration     #Yes
          HelpText            #@SYS4082946
          ElementPosition     #1431655764
          HierarchyParent     #Reference
          DataSource          #CustInvoiceTable
          DataMethod          #editReasonCodeForUnrealizedVAT
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #editReasonCodeHeader
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@SYS300080
          ElementPosition     #1717986916
          HierarchyParent     #Document
          Label               #@SYS300079
          DataSource          #CustInvoiceTable
          DataMethod          #editReasonCode
        ENDPROPERTIES
        
        METHODS
          SOURCE #jumpRef
            #public void jumpRef()
            #{
            #    ReasonTable::jumpRef(ReasonCodeAccountTypeAll::AllValues);
            #}
          ENDSOURCE
          SOURCE #lookup
            #public void lookup()
            #{
            #    ReasonFormTable::reasonCodeLookup(
            #        this,
            #        LedgerJournalACType::FixedAssets,
            #        LedgerJournalACType::Cust,
            #        true,
            #        false,
            #        LedgerJournalACType::Ledger,
            #        true);
            #}
          ENDSOURCE
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret = super();
            #
            #    if (custInvoiceLine.RecId)
            #    {
            #        if (Box::yesNo(strFmt("@GLS220468","@GLS104580"), DialogButton::Yes) == DialogButton::Yes)
            #        {
            #            custInvoiceTable.updateLineReasonCode();
            #        }
            #        element.redraw();
            #        custInvoiceLine_ds.reread();
            #        editReasonCommentHeader.modified();
            #    }
            #    else
            #    {
            #        element.redraw();
            #    }
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #editReasonComment
          AutoDeclaration     #Yes
          ElementPosition     #1288490187
          HierarchyParent     #CVInvoiceDetailsReasonsTabPage
          DataSource          #CustInvoiceLine
          DataMethod          #editReasonComment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #editReasonCommentCreditNote
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #CreditNoteReason
          DataSource          #CustInvoiceLine
          DataMethod          #editReasonComment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #editReasonCommentHeader
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@SYS300081
          ElementPosition     #1932735281
          HierarchyParent     #Document
          DataSource          #CustInvoiceTable
          DataMethod          #editReasonComment
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret = super();
            #
            #    if (custInvoiceLine.RecId)
            #    {
            #        if (Box::yesNo(strFmt("@GLS220468","@SYS114149"), DialogButton::Yes) == DialogButton::Yes)
            #        {
            #            custInvoiceTable.updateLineReasonComment();
            #        }
            #
            #        custInvoiceLine_ds.reread();
            #    }
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Einvoice_EInvoiceAccountCode
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #Einvoice
          DataSource          #CustInvoiceTable
          DataField           #EInvoiceAccountCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #FixedAssets_AssetBookId
          ElementPosition     #1610612733
          HierarchyParent     #CVLineDetailsFixedAssetsGroup
          DataSource          #CustInvoiceLine
          DataField           #AssetBookId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #FixedAssets_AssetId
          ElementPosition     #1073741822
          HierarchyParent     #CVLineDetailsFixedAssetsGroup
          DataSource          #CustInvoiceLine
          DataField           #AssetId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForeignTrade_DlvAddress
          AutoDeclaration     #Yes
          Enabled             #No
          ElementPosition     #1802825776
          HierarchyParent     #ForeignTrade
          DisplayHeight       #5
          Label               #@SYS9362
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForeignTrade_DlvCountry
          AutoDeclaration     #Yes
          Enabled             #No
          ElementPosition     #1126766110
          HierarchyParent     #ForeignTrade
          Label               #@SYS17952
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForeignTrade_DlvCounty
          AutoDeclaration     #Yes
          Enabled             #No
          ElementPosition     #1577472554
          HierarchyParent     #ForeignTrade
          Label               #@SYS58611
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForeignTrade_DlvLocationId
          AutoDeclaration     #Yes
          ElementPosition     #901412888
          HierarchyParent     #ForeignTrade
          DataMethod          #DlvLocationId
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    LogisticsLocation::locationLookup(this, custInvoiceTable.custTable_OrderAccount().Party);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForeignTrade_DlvState
          AutoDeclaration     #Yes
          Enabled             #No
          ElementPosition     #1352119332
          HierarchyParent     #ForeignTrade
          Label               #@SYS22063
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ForeignTrade_DlvTerm
          ElementPosition     #676059666
          HierarchyParent     #ForeignTrade
          DataSource          #CustInvoiceTable
          DataField           #DlvTerm
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Format_MY_M_editInvoiceType_MY
          HelpText            #@SYP4860684
          ElementPosition     #1431655764
          HierarchyParent     #Format_MY
          DataSource          #CustInvoiceTable_W
          DataMethod          #editInvoiceType_MY
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #// <GMY>
            #public void lookup()
            #{
            #    TaxGSTDocInvoiceType_MY::construct(tableNum(CustInvoiceTable_W)).lookup(this);
            #}
            #// </GMY>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #FreeTextInvoiceId
          AutoDeclaration     #Yes
          Width               #Column width
          Skip                #Yes
          ElementPosition     #1431655764
          HierarchyParent     #HeaderInfo
          Style               #TitleField
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #GroupInvoiceAccount_InvoiceAccount
          PreviewPartRef      #CustFreeInvoiceInvoiceAccountPreview
          ElementPosition     #1073741822
          HierarchyParent     #InvoiceAccountAndName
          DataSource          #CustInvoiceTable
          DataField           #InvoiceAccount
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #GroupPayment_CashDiscCode
          PreviewPartRef      #CustFreeInvoiceCashDiscountPreview
          ElementPosition     #1717986912
          HierarchyParent     #GroupPayment
          DataSource          #CustInvoiceTable
          DataField           #CashDiscCode
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #GroupPayment_CustBankAccountId
          PreviewPartRef      #CustFreeInvoiceBankAccountPreview
          ElementPosition     #1288490184
          HierarchyParent     #GroupPayment
          DataSource          #CustInvoiceTable
          DataField           #CustBankAccountId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #GroupPayment_Payment
          PreviewPartRef      #CustFreeInvoiceTermsOfPaymentPreview
          ElementPosition     #644245092
          HierarchyParent     #GroupPayment
          DataSource          #CustInvoiceTable
          DataField           #Payment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #GroupPayment_PaymentSched
          PreviewPartRef      #CustFreeInvoicePaymentSchedulePreview
          ElementPosition     #1503238548
          HierarchyParent     #GroupPayment
          DataSource          #CustInvoiceTable
          DataField           #PaymentSched
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #GroupPayment_PaymMode
          PreviewPartRef      #CustFreeInvoiceMethodOfPaymentPreview
          ElementPosition     #858993456
          HierarchyParent     #GroupPayment
          DataSource          #CustInvoiceTable
          DataField           #PaymMode
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #GroupPayment_PaymSpec
          PreviewPartRef      #CustFreeInvoicePaymentSpecPreview
          ElementPosition     #1073741820
          HierarchyParent     #GroupPayment
          DataSource          #CustInvoiceTable
          DataField           #PaymSpec
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #GroupPosting_InvoiceId
          PreviewPartRef      #CustFreeInvoicePostingInvoicePreview
          ElementPosition     #1789569705
          HierarchyParent     #GroupPosting
          DataSource          #CustInvoiceTable
          DataField           #InvoiceId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #GroupPosting_PostingProfile
          PreviewPartRef      #CustFreeInvoicePostingProfilePreview
          ElementPosition     #715827882
          HierarchyParent     #GroupPosting
          DataSource          #CustInvoiceTable
          DataField           #PostingProfile
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #GroupTax_EnterpriseNumber
          ElementPosition     #572662304
          HierarchyParent     #GroupTax
          DataSource          #CustInvoiceTable
          DataField           #EnterpriseNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #GroupTax_TaxPeriodPaymentCode_PL
          ElementPosition     #2058005160
          HierarchyParent     #GroupTax
          DataSource          #CustInvoiceTable
          DataField           #TaxPeriodPaymentCode_PL
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Invoice
          ElementPosition     #715827882
          HierarchyParent     #CreditNoteOriginalInvoice
          DataSource          #TmpCustVendTrans
          DataField           #Invoice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InvoiceAccount_Name
          ElementPosition     #1610612733
          HierarchyParent     #InvoiceAccountAndName
          Label               #@SYS92116
          DataSource          #CustInvoiceTable
          DataMethod          #displayInvoiceAccountName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InvoiceId
          HelpText            #@SYS302167
          ElementPosition     #1073741823
          HierarchyParent     #CorrectionGrid
          Label               #@SYS14204
          DataSource          #CustRelatedInvoice
          DataMethod          #displayInvoiceId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LineFiscalInformation_BR_TaxServiceCode_BR
          ElementPosition     #1717986916
          HierarchyParent     #LineFiscalInformation_BR
          DataSource          #CustInvoiceLine
          DataField           #TaxServiceCode_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LogisticsPostalAddress_Address
          ElementPosition     #1717986916
          HierarchyParent     #Address
          DataSource          #LogisticsPostalAddress
          DataField           #Address
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #MainAccount
          ElementPosition     #1073741823
          HierarchyParent     #CreditNoteOriginalInvoice
          Label               #@SYS135766
          DataSource          #TmpCustVendTrans
          DataField           #AccountNum
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #OrderAccount
          AutoDeclaration     #Yes
          PreviewPartRef      #CustFreeInvoiceCustAccountPreview
          ElementPosition     #715827882
          HierarchyParent     #CustomerAccountAndName
          DataSource          #CustInvoiceTable
          DataField           #OrderAccount
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #OrderAccount_Name
          AutoDeclaration     #Yes
          AllowEdit           #No
          ElementPosition     #1073741823
          HierarchyParent     #CustomerAccountAndName
          Label               #@SYS137153
          DataSource          #CustInvoiceTable
          DataMethod          #editOrderAccountName
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Project_ProjCategoryId
          ElementPosition     #1288490187
          HierarchyParent     #CVInvoiceDetailsProjectTabPage
          DataSource          #CustInvoiceLine
          DataField           #ProjCategoryId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Project_ProjId
          ElementPosition     #858993458
          HierarchyParent     #CVInvoiceDetailsProjectTabPage
          DataSource          #CustInvoiceLine
          DataField           #ProjId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PurchOrderFormNum
          ElementPosition     #715827882
          HierarchyParent     #GroupReference
          DataSource          #CustInvoiceTable
          DataField           #PurchOrderFormNum
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Reference_RefInvoiceId
          ElementPosition     #715827882
          HierarchyParent     #Reference
          DataSource          #CustInvoiceTableExtensionTH
          DataField           #RefInvoiceId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ServiceCodeTable_IN_ServiceAccountingCode
          ElementPosition     #1879048190
          HierarchyParent     #ServiceTax_IN
          DataSource          #ServiceCodeTable_IN
          DataField           #ServiceAccountingCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #TaxGroup
          PreviewPartRef      #CustFreeInvoiceSalesTaxGroupPreview
          ElementPosition     #858993457
          HierarchyParent     #GroupTax
          DataSource          #CustInvoiceTable
          DataField           #TaxGroup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #TaxItemGroup
          PreviewPartRef      #CustFreeInvoiceItemSalesTaxGroupPreview
          ElementPosition     #1145324610
          HierarchyParent     #GroupTax
          DataSource          #CustInvoiceTable
          DataField           #TaxItemGroup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #VATNum
          AutoDeclaration     #Yes
          PreviewPartRef      #CustFreeInvoiceTaxExemptNumberPreview
          ElementPosition     #1431655764
          HierarchyParent     #GroupTax
          DataSource          #CustInvoiceTable
          DataField           #VATNum
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL UTCDATETIMEEDIT
        PROPERTIES
          Name                #CustDirective_PSN_AccountantApprovalDate
          AllowEdit           #No
          ElementPosition     #1879048185
          HierarchyParent     #DirectiveStatusGroup_PSN
          DataSource          #CustDirective_PSN
          DataField           #AccountantApprovalDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL UTCDATETIMEEDIT
        PROPERTIES
          Name                #CustDirective_PSN_DirectorApprovalDate
          AllowEdit           #No
          ElementPosition     #1073741820
          HierarchyParent     #DirectiveStatusGroup_PSN
          DataSource          #CustDirective_PSN
          DataField           #DirectorApprovalDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL UTCDATETIMEEDIT
        PROPERTIES
          Name                #CustDirective_PSN_IssueDate
          NeededPermission    #Manual
          HelpText            #@GLS223336
          ElementPosition     #1431655764
          HierarchyParent     #DirectiveGroup_PSN
          DisplayOption       #Date
          DataSource          #CustDirective_PSN
          DataField           #IssueDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL UTCDATETIMEEDIT
        PROPERTIES
          Name                #GroupPostRelease_ReleaseDate
          ElementPosition     #1431655764
          HierarchyParent     #GroupPostRelease
          DataSource          #CustInvoiceTable
          DataField           #ReleaseDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL WINDOW
        PROPERTIES
          Name                #InfoBarIcon
          ElementPosition     #1073741822
          HierarchyParent     #InfoBar
          ImageResource       #928
          BackStyle           #Transparent
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
    ENDCONTAINER
    
  ENDDESIGN
  
  PERMISSIONS #Permissions
    PROPERTIES
    ENDPROPERTIES
    
    PERMISSIONSET #Read
      PROPERTIES
      ENDPROPERTIES
      
      FORM #Controls
      ENDFORM
      
    TABLES #Tables
    ENDTABLES
    
  SERVERMETHODS #Server Methods
  ENDSERVERMETHODS
  
ASSOCIATEDFORMS #Associated Forms
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Update
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
  ENDFORM
  
TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Create
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
  ENDFORM
  
TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Delete
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
  ENDFORM
  
TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

ENDPERMISSIONS

ENDFORM


***Element: END
