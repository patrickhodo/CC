Exportfile for AOT version 1.0 or later
Formatversion: 1

***Element: FRM

; 
; --------------------------------------------------------------------------------
FRMVERSION 12

FORM #ProjInvoiceProposalDetail
  PROPERTIES
    Name                #ProjInvoiceProposalDetail
    Origin              #{219AF81D-2FA4-4C87-9312-695B4E047A8D}
  ENDPROPERTIES
  
  METHODS
    SOURCE #classDeclaration
      #class FormRun extends ObjectRun
      #{
      #    ProjInvoiceTable        projInvoiceTable;
      #
      #    PSAContractLineNum      contractLineNum;
      #
      #    Map                     closeLine;
      #    ProjType                projType;
      #
      #    QueryBuildRange         criteriaInvoiceProjId;
      #    QueryBuildRange         rangeProjProposalId;
      #
      #    str                     proposalId;
      #
      #    boolean                 setTransactionRange;
      #
      #    boolean                 jumpToMain;
      #
      #    SysLastValue            sysLastValue;
      #    Common                  callerRecord;
      #
      #    ProjTransType           parmProjTransType;
      #    boolean                 parmIsItemTransTypeSales;
      #    boolean                 parmIsRevTransOriginSubscription;
      #    SysAnyType              parmSysAnyTypeTransId;
      #    ProjTransIdBase         parmTransId;
      #
      #    boolean                 projTransTypeEmpl;
      #    boolean                 projTransTypeCost;
      #    boolean                 projTransTypeItem;
      #    boolean                 projTransTypeRevenue;
      #    boolean                 projTransTypeSubscription;
      #    boolean                 projTransTypeOnAcc;
      #    boolean                 projTransTypeSales;
      #    TransDate               toDate;
      #    TransDate               fromDate;
      #
      #    boolean                 calledFromInvControl;
      #
      #    boolean                 disableAddLinesButton;
      #
      #    boolean                 isDeleteMarked;
      #
      #
      #    PSAProjInvoiceDetailLine    psaProjInvoiceDetailLine;
      #    ProjProposalRevenue         projProposalRevenuel;
      #
      #    // <GEEU>
      #    #IsoCountryRegionCodes
      #    boolean                 countryRegion_LTLV;
      #    // </GEEU>
      #
      #    boolean                 calledForEditInGrid;
      #    List                    projProposalIdList;
      #    boolean                 contractHasBillingRules;
      #    ProjInvoiceProposalCreateLinesParams
      #                            proposalCreateLinesParams;
      #}
    ENDSOURCE
    SOURCE #activateFirstVisibleTab
      #public void activateFirstVisibleTab(FormTabPageControl _tab)
      #{
      #    List                tabsList = new List(Types::Class);
      #    ListEnumerator      tabsListEnum;
      #    FormTabPageControl  curTab;
      #
      #    if (!_tab.isVisible())
      #        return;
      #
      #    tabsList.addEnd(empl);
      #    tabsList.addEnd(cost);
      #    tabsList.addEnd(itemProject);
      #    tabsList.addEnd(revenue);
      #    tabsList.addEnd(revenueSubscription);
      #    tabsList.addEnd(onAcc);
      #    tabsList.addEnd(itemSalesLine);
      #
      #    tabsListEnum = tabsList.getEnumerator();
      #
      #    while (tabsListEnum.moveNext())
      #    {
      #        curTab = tabsListEnum.current();
      #        if (curTab.name() == _tab.name())
      #            break;
      #
      #        if (curTab.isVisible())
      #        {
      #            return;
      #        }
      #    }
      #
      #    _tab.activatePage();
      #}
    ENDSOURCE
    SOURCE #calledFromInvControl
      #public boolean calledFromInvControl()
      #{
      #    return calledFromInvControl;
      #}
    ENDSOURCE
    SOURCE #callerDataRecord
      #Common callerDataRecord()
      #{
      #    return callerRecord;
      #}
    ENDSOURCE
    SOURCE #canSubmitToWorkflow
      #public boolean canSubmitToWorkflow()
      #{
      #    return projProposalJour.canSubmitToWorkflow();
      #}
      #
    ENDSOURCE
    SOURCE #contractLineNum
      #PSAContractLineNum contractLineNum()
      #{
      #    return contractLineNum;
      #}
      #
      #
    ENDSOURCE
    SOURCE #enableDebitNoteControls_BR
      #// <GBR>
      #/// <summary>
      #/// Displays debit note lables.
      #/// </summary>
      #public void enableDebitNoteControls_BR()
      #{
      #    ProjProposalJour projProposalJourLocal;
      #
      #    projProposalJourLocal = element.args().record();
      #
      #    if(BrazilParameters::isEnabled())
      #    {
      #        if((element.args().menuItemName()     == menuitemDisplayStr(ProjDebitNoteProposal_BR)) ||
      #            projProposalJourLocal.InvoiceType == ProjInvoiceType::DebitNote_BR ||
      #            projProposalJour.InvoiceType      == ProjInvoiceType::DebitNote_BR)
      #
      #        {
      #            element.design().caption("");
      #            element.design().titleDatasource("");
      #            element.design().dataSource("");
      #            element.design().caption(projProposalJour.projProposalId_BR());
      #            tabPageHeaderTop.caption("@GLS510072");
      #            proposal.label("@GLS3800182");
      #            proposal.helpText("@GLS510068");
      #            projectInvoiceProposalJour_InvoiceDate.label("@GLS3800153");
      #            projectInvoiceProposalJour_InvoiceDate.helpText("@GLS510067");
      #            projProposalJour_ProjInvoiceId.label("@GLS510025");
      #            projProposalJour_ProjInvoiceId.helpText("@GLS3800178");
      #            displayContractName.label("@GLS510073");
      #            projProposalJour_InvoiceFormats.visible(false);
      #            tabPageHeaderMiddle.caption("@GLS510074");
      #            psaProjProposalProj_Invoiced.label("@GLS510048");
      #            psaProjProposalProj_Invoiced.helpText("@GLS510075");
      #            psaNowInvoiced.label("@GLS510076");
      #            tabPageLine.caption("@GLS510077");
      #            dnButtonEdit.visible(true);
      #            dnProjFormLetter_Invoice_BR.visible(true);
      #            projFormLetter_Invoice.visible(false);
      #            buttonEdit.visible(false);
      #            actionPaneTab.caption("@GLS3800182");
      #            psaProjProposalSelection.visible(false);
      #            projDebitNoteProposalSelection_BR.visible(true);
      #            psaProjProposalSelectionCLIN.visible(false);
      #            psaProjInvoiceDetails.visible(false);
      #            debitNoteDetails_BR.visible(true);
      #            element.arrange();
      #            element.redraw();
      #            element.reload();
      #            if(projProposalJourLocal.LineProperty == ProjLinePropertyCode::DebitNoteCanceled_BR)
      #            {
      #                infoBarText_BR.visible(true);
      #                infoBarText_BR.text("@GLS3800159");
      #            }
      #        }
      #    }
      #}
      #// </GBR>
    ENDSOURCE
    SOURCE #executeQuery
      #public void executeQuery()
      #{
      #    projProposalJour_DS.executeQuery();
      #}
    ENDSOURCE
    SOURCE #fillInvoiceFormatCombo
      #void fillInvoiceFormatCombo()
      #{
      #    List             enumValues = new List(Types::String);
      #    ListEnumerator   le;
      #
      #    select firstonly projProposalRevenuel where projProposalRevenuel.ProposalId == projProposalJour.ProposalId;
      #    select firstonly RecId from psaProjInvoiceDetailLine where psaProjInvoiceDetailLine.ProposalId == projProposalJour.ProposalId;
      #
      #    if (projProposalRevenuel && projProposalRevenuel.IsRetained)
      #    {
      #        enumValues.addEnd(enum2str(PSAInvoiceFormats::DetailInvoice));
      #    }
      #    else
      #    {
      #        if (contractHasBillingRules)
      #        {
      #            enumValues.addEnd(enum2str(PSAInvoiceFormats::DetailInvoice));
      #        }
      #        else
      #        {
      #            enumValues.addEnd(enum2str(PSAInvoiceFormats::DetailInvoice));
      #            enumValues.addEnd(enum2str(PSAInvoiceFormats::SummaryInvoice));
      #            enumValues.addEnd(enum2str(PSAInvoiceFormats::SummaryByCategory));
      #        }
      #
      #        if (psaProjInvoiceDetailLine.RecId     != 0  ||
      #            projProposalJour.psaInvoiceTxtPre  != '')
      #        {
      #            enumValues.addStart(enum2str(PSAInvoiceFormats::ManageInvoice));
      #        }
      #    }
      #
      #    projProposalJour_InvoiceFormats.clear();
      #    gridProjProposalJour_InvoiceFormats.clear();
      #
      #    le = enumValues.getEnumerator();
      #
      #    while (le.moveNext())
      #    {
      #        projProposalJour_InvoiceFormats.add(le.current());
      #        gridProjProposalJour_InvoiceFormats.add(le.current());
      #    }
      #}
      #
    ENDSOURCE
    SOURCE #fromDate
      #public TransDate fromDate()
      #{
      #    return  fromDate;
      #}
      #
    ENDSOURCE
    SOURCE #getProposalIDRangeFromList
      #public str getProposalIDRangeFromList()
      #{
      #    str             proposalIdLocal;
      #    ListEnumerator  enumerator;
      #    boolean         firstPass = true;
      #
      #    enumerator = projProposalIdList.getEnumerator();
      #    while(enumerator.moveNext())
      #    {
      #        if (firstPass)
      #        {
      #            proposalIdLocal = enumerator.current();
      #            firstPass = false;
      #        }
      #        else
      #        {
      #            proposalIdLocal += ', ' +enumerator.current();
      #        }
      #    }
      #
      #    return proposalIdLocal;
      #}
    ENDSOURCE
    SOURCE #init
      #void init()
      #{
      #    closeLine = new Map(Types::Int64,Types::Integer);
      #
      #    if (element.args().dataset())
      #    {
      #        callerRecord = element.args().record();
      #    }
      #
      #    if (callerRecord && callerRecord is ProjProposalJour)
      #    {
      #        if (callerRecord.(fieldNum(ProjProposalJour, LineProperty)) != ProjLinePropertyCode::Open    &&
      #            callerRecord.(fieldNum(ProjProposalJour, LineProperty)) != ProjLinePropertyCode::PSARejected)
      #        {
      #            this.args().openMode(OpenMode::View);
      #        }
      #    }
      #    if (callerRecord && callerRecord is PSATmpProjProposalTrans)
      #    {
      #        if (element.args().caller() && formHasMethod(element.args().caller(), literalStr(getProjProposalIdList)))
      #        {
      #            projProposalIdList = element.args().caller().getProjProposalIdList();
      #        }
      #    }
      #
      #    super();
      #
      #    groupLineTab.visible(false);
      #
      #    jumpToMain = (element.args().parm() == 'jumptomain') ? true : false;
      #
      #    if (jumpToMain)
      #    {
      #        this.parseJumpToMainParms();
      #    }
      #
      #    if (isConfigurationkeyEnabled(configurationKeyNum(PSAIndirectCost)))
      #    {
      #        psaIndirecCostAmount.visible(true);
      #    }
      #
      #    ctrlApprove.visible(false);
      #    ctrlCancelApprove.visible(false);
      #
      #    // <GEEU>
      #    countryRegion_LTLV = SysCountryRegionCode::isLegalEntityInCountryRegion([#isoLT, #isoLV]);
      #    // </GEEU>
      #
      #    // <GIN>
      #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoIN]))
      #    {
      #        element.setVisible_IN();
      #    }
      #    // </GIN>
      #}
    ENDSOURCE
    SOURCE #initDesign_LT
      #// <GEEU>
      #void initDesign_LT()
      #{
      #    if (!projProposalJour_DS.allowEdit())
      #    {
      #        allowEditFieldsOnFormDS_W(projProposalJour_DS, false);
      #
      #        projProposalJour_DS.object(fieldNum(ProjProposalJour, InvoiceAutoNumbering_LT)).allowEdit(true);
      #    }
      #}
      #// </GEEU>
    ENDSOURCE
    SOURCE #initParmDefault
      #void initParmDefault()
      #{
      #}
      #
      #
    ENDSOURCE
    SOURCE #parmProposalParams
      #public ProjInvoiceProposalCreateLinesParams parmProposalParams(ProjInvoiceProposalCreateLinesParams _proposalPendingLinesParams = proposalCreateLinesParams)
      #{
      #    proposalCreateLinesParams = _proposalPendingLinesParams;
      #    return proposalCreateLinesParams;
      #}
    ENDSOURCE
    SOURCE #parseJumpToMainParms
      #private void parseJumpToMainParms()
      #{
      #    parmSysAnyTypeTransId = element.args().parmObject();
      #    parmTransId = parmSysAnyTypeTransId.value();
      #
      #    switch (element.args().parmEnumType())
      #    {
      #        case enumNum(ProjTransType):
      #            // If the enumtype is ProjTransType, the trans type are either Hour/Cost/OnAccount
      #            parmProjTransType = element.args().parmEnum();
      #            break;
      #
      #        case enumNum(ProjItemType):
      #            // If the enumtype is ProjItemType, the trans origin of Item trans type has been passed
      #            parmProjTransType = ProjTransType::Item;
      #            parmIsItemTransTypeSales = (element.args().parmEnum() == ProjItemType::SalesOrder);
      #            break;
      #
      #        case enumNum(ProjOriginRevenue):
      #            // If the enumtype is ProjOriginRevenue, the trans origin of Revenue trans type has been passed
      #            parmProjTransType = ProjTransType::Revenue;
      #            parmIsRevTransOriginSubscription = (element.args().parmEnum() == ProjOriginRevenue::SMASubscription);
      #            break;
      #
      #        default:
      #            break;
      #    }
      #}
    ENDSOURCE
    SOURCE #projInvoiceTable
      #ProjInvoiceTable projInvoiceTable()
      #{
      #    return projInvoiceTable;
      #}
    ENDSOURCE
    SOURCE #projTransTypeCost
      #public boolean projTransTypeCost()
      #{
      #    return projTransTypeCost;
      #}
      #
    ENDSOURCE
    SOURCE #projTransTypeEmpl
      #public boolean projTransTypeEmpl()
      #{
      #    return projTransTypeEmpl;
      #}
      #
    ENDSOURCE
    SOURCE #projTransTypeItem
      #public boolean projTransTypeItem()
      #{
      #    return projTransTypeItem;
      #}
      #
    ENDSOURCE
    SOURCE #projTransTypeOnAcc
      #public boolean projTransTypeOnAcc()
      #{
      #    return projTransTypeOnAcc;
      #}
      #
    ENDSOURCE
    SOURCE #projTransTypeRevenue
      #public boolean projTransTypeRevenue()
      #{
      #    return projTransTypeRevenue;
      #}
      #
    ENDSOURCE
    SOURCE #projTransTypeSales
      #public boolean projTransTypeSales()
      #{
      #    return projTransTypeSales;
      #}
      #
    ENDSOURCE
    SOURCE #projTransTypeSubscription
      #public boolean projTransTypeSubscription()
      #{
      #    return projTransTypeSubscription;
      #}
      #
    ENDSOURCE
    SOURCE #ProposalCreateLinesParams
      #/// <summary>
      #/// Keeps the parameters proposalCreateLinesParams and will be used for the runing the  form ProjInvoiceProposalPendingTrans
      #/// </summary>
      #public void ProposalCreateLinesParams()
      #{
      #    proposalCreateLinesParams = ProjInvoiceProposalCreateLinesParams::construct();
      #    proposalCreateLinesParams.parmProjInvoiceProjId(projProposalJour.ProjInvoiceProjId);
      #    element.parmProposalParams(proposalCreateLinesParams);
      #}
    ENDSOURCE
    SOURCE #setAllowEdit
      #void setAllowEdit()
      #{
      #    if (projProposalJour)
      #    {
      #        if (projProposalJour.LineProperty   == ProjLinePropertyCode::Approved     ||
      #            projProposalJour.LineProperty   == ProjLinePropertyCode::Canceled     ||
      #            projProposalJour.LineProperty   == ProjLinePropertyCode::PSASubmitted ||
      #            projProposalJour.LineProperty   == ProjLinePropertyCode::Invoiced)
      #        {
      #            projProposalEmpl_ds.allowDelete(false);
      #            projProposalOnAcc_ds.allowDelete(false);
      #            projProposalCost_ds.allowDelete(false);
      #            projProposalItem_SalesOrder_ds.allowDelete(false);
      #            projProposalItem_Project_ds.allowDelete(false);
      #            projProposalRevenue_ds.allowDelete(false);
      #            projProposalRevenueSubscription_ds.allowDelete(false);
      #            projProposalJour_ds.allowEdit(false);
      #            buttonEdit.allowEdit(false);
      #            psaProjProposalSelectionAddLines.enabled(false);
      #            psaProjProposalSelectionCLINAddLines.enabled(false);
      #            psaProjProposalAddFees.enabled(false);
      #
      #        }
      #        else
      #        {
      #            //turn them back on
      #            projProposalEmpl_ds.allowDelete(true);
      #            projProposalOnAcc_ds.allowDelete(true);
      #            projProposalCost_ds.allowDelete(true);
      #            projProposalItem_SalesOrder_ds.allowDelete(true);
      #            projProposalItem_Project_ds.allowDelete(true);
      #            projProposalRevenue_ds.allowDelete(true);
      #            projProposalRevenueSubscription_ds.allowDelete(true);
      #            projProposalJour_ds.allowEdit(true);
      #            buttonEdit.allowEdit(true);
      #
      #            psaProjProposalAddFees.enabled(true);
      #            psaProjProposalSelectionAddLines.enabled(!disableAddLinesButton);
      #            psaProjProposalSelectionCLINAddLines.enabled(!disableAddLinesButton);
      #
      #            if (CustTable::isCustDKPublic(projProposalJour.InvoiceAccount) == NoYes::Yes)
      #            {
      #                if (projProposalJour.eInvoiceLineSpecific == NoYes::No)
      #                {
      #                    projProposalJour_ds.object(fieldNum(ProjProposalJour, eInvoiceAccountCode)).enabled(true);
      #                }
      #                else
      #                {
      #                    projProposalJour_ds.object(fieldNum(ProjProposalJour, eInvoiceAccountCode)).enabled(false);
      #                }
      #            }
      #        }
      #    }
      #}
    ENDSOURCE
    SOURCE #setButtonAccess
      #void setButtonAccess()
      #{
      #     // <GBR>
      #    if(BrazilParameters::isEnabled())
      #    {
      #        if((projProposalJour.LineProperty != ProjLinePropertyCode::DebitNote_BR)||
      #           (projProposalJour.LineProperty != ProjLinePropertyCode::Invoiced))
      #        {
      #            taxTmpWorkProjectInvoiceProposal.visible(true);
      #            taxTrans.visible(false);
      #        }
      #        else
      #        {
      #            taxTmpWorkProjectInvoiceProposal.visible(false);
      #            taxTrans.visible(true);
      #        }
      #    }
      #    else
      #    {
      #    // </GBR>
      #        if (projProposalJour.LineProperty != ProjLinePropertyCode::Invoiced)
      #        {
      #            taxTmpWorkProjectInvoiceProposal.visible(true);
      #            taxTrans.visible(false);
      #        }
      #        else
      #        {
      #            taxTmpWorkProjectInvoiceProposal.visible(false);
      #            taxTrans.visible(true);
      #        }
      #    // <GBR>
      #    }
      #
      #    if (isConfigurationkeyEnabled(configurationKeyNum(Project3)))
      #    {
      #        psaProjInvoiceDetails.enabled(projProposalJour.canManageInvoiceFormat());
      #
      #        // <GBR>
      #        if(BrazilParameters::isEnabled())
      #        {
      #            debitNoteDetails_BR.enabled(projProposalJour.canManageInvoiceFormat());
      #        }
      #        // </GBR>
      #    }
      #
      #    // </GBR>
      #    if (projProposalJour && !projProposalJour.ProjInvoiceId)
      #    {
      #        ctrlCancel.enabled(true);
      #        ctrlCourse.enabled(true);
      #        ctrlTotals.enabled(true);
      #        ctrlPaymentSchedule.enabled( projProposalJour.PaymentSched != "" );
      #    }
      #    else
      #    {
      #        ctrlCancel.enabled(false);
      #        ctrlCourse.enabled(false);
      #        if (projProposalJour.ProjInvoiceId)
      #        {
      #            ctrlTotals.enabled(true);
      #            ctrlPaymentSchedule.enabled(true);
      #        }
      #        else
      #        {
      #            ctrlTotals.enabled(false);
      #            ctrlPaymentSchedule.enabled(false);
      #        }
      #
      #        element.setAllowEdit();
      #
      #        if (isConfigurationkeyEnabled(configurationKeyNum(Project3)))
      #        {
      #            // <GBR>
      #            if(BrazilParameters::isEnabled())
      #            {
      #                debitNoteDetails_BR.enabled(false);
      #            }
      #            // </GBR>
      #        }
      #
      #        return;
      #    }
      #
      #    if (!ProjParameters::find().ApproveActive)
      #    {
      #        ctrlCourse.visible(false);
      #    }
      #    else
      #    {
      #
      #        if (UserInfoHelp::userInUserGroup(curUserId(), ProjParameters::find().ApproveGroupId))
      #        {
      #            ctrlCourse.enabled(true);
      #        }
      #        else
      #        {
      #            ctrlCourse.enabled(false);
      #        }
      #
      #        if (projProposalJour.LineProperty == ProjLinePropertyCode::Canceled ||
      #            projProposalJour.LineProperty == ProjLinePropertyCode::Invoiced)
      #        {
      #            ctrlCourse.enabled(false);
      #        }
      #        else
      #        {
      #
      #            ctrlApprove.enabled(true);
      #
      #            if (projProposalJour.LineProperty == ProjLinePropertyCode::Approved)
      #            {
      #                ctrlApprove.enabled(false);
      #                ctrlCancel.enabled(true);
      #                ctrlCancelApprove.enabled(true);
      #            }
      #
      #        }
      #
      #        switch (projProposalJour.LineProperty)
      #        {
      #            case ProjLinePropertyCode::Open :
      #                ctrlCancel.enabled(true);
      #                break;
      #
      #            case ProjLinePropertyCode::Canceled :
      #
      #                if (isConfigurationkeyEnabled(configurationKeyNum(Project3)))
      #                {
      #                    ctrlCancel.enabled(true);
      #                }
      #                else
      #                {
      #                    ctrlCancel.enabled(false);
      #                }
      #                break;
      #
      #            case ProjLinePropertyCode::Invoiced :
      #                ctrlCancel.enabled(false);
      #                break;
      #
      #            case ProjLinePropertyCode::Approved :
      #                ctrlCancel.enabled(true);
      #                break;
      #
      #            case ProjLinePropertyCode::PSASubmitted:
      #                if (isConfigurationkeyEnabled(configurationKeyNum(Project3)))
      #                {
      #                    ctrlCancel.enabled(false);
      #                }
      #                break;
      #
      #            case ProjLinePropertyCode::PSARejected:
      #                if (isConfigurationkeyEnabled(configurationKeyNum(Project3)))
      #                {
      #                    ctrlCancel.enabled(true);
      #                }
      #                break;
      #        }
      #    }
      #
      #    if (isConfigurationkeyEnabled(configurationKeyNum(Project3)))
      #    {
      #        if (projProposalJour && projProposalJour.LineProperty == ProjLinePropertyCode::Open)
      #        {
      #            ctrlCancel.enabled(true);
      #        }
      #        else
      #        {
      #            ctrlCancel.enabled(false);
      #        }
      #    }
      #
      #    //duplicated immediately prior to return statement in the body of the method
      #    element.setAllowEdit();
      #    if (projProposalJour && contractHasBillingRules)
      #    {
      #        psaProjProposalSelectionCLINAddLines.visible(true);
      #        psaProjProposalSelectionAddLines.visible(false);
      #    }
      #    else
      #    {
      #        psaProjProposalSelectionCLINAddLines.visible(false);
      #        psaProjProposalSelectionAddLines.visible(true);
      #    }
      #}
    ENDSOURCE
    SOURCE #setFieldAccess
      #void setFieldAccess()
      #{
      #    if (projProposalJour.ProjInvoiceId)
      #    {
      #        projProposalEmpl_ds.allowEdit(false);
      #        projProposalOnAcc_ds.allowEdit(false);
      #        projProposalCost_ds.allowEdit(false);
      #        projProposalRevenue_ds.allowEdit(false);
      #        projProposalItem_Project_ds.allowEdit(false);
      #        projProposalRevenueSubscription_ds.allowEdit(false);
      #    }
      #    else
      #    {
      #        projProposalEmpl_ds.allowEdit(true);
      #        projProposalOnAcc_ds.allowEdit(true);
      #        projProposalCost_ds.allowEdit(true);
      #        projProposalRevenue_ds.allowEdit(true);
      #        projProposalItem_Project_ds.allowEdit(true);
      #        projProposalRevenueSubscription_ds.allowEdit(true);
      #    }
      #
      #    if (isConfigurationkeyEnabled(configurationKeyNum(PSAARRetainage)))
      #    {
      #        if (projOnAccTrans)
      #        {
      #            if (projOnAccTrans.TransactionOrigin == ProjOrigin::Deduction
      #                && projOnAccTrans.psaIsOnAccount)
      #            {
      #                psaProjProposalProj_RetainedNow.visible(true);
      #                psaProjProposalProj_RetainedPercent.visible(true);
      #            }
      #            else if(projOnAccTrans.TransactionOrigin == ProjOrigin::Prepayment
      #                    && projOnAccTrans.psaIsOnAccount)
      #            {
      #                psaProjProposalProj_RetainedNow.visible(false);
      #                psaProjProposalProj_RetainedPercent.visible(false);
      #                psaProjProposalProj_ReleasedAmount.visible(false);
      #            }
      #            else
      #            {
      #                psaProjProposalProj_RetainedNow.visible(true);
      #                psaProjProposalProj_RetainedPercent.visible(true);
      #                psaProjProposalProj_ReleasedAmount.visible(false);
      #            }
      #        }
      #        else
      #        {
      #            psaProjProposalProj_RetainedNow.visible(true);
      #            psaProjProposalProj_RetainedPercent.visible(true);
      #            psaProjProposalProj_ReleasedAmount.visible(projProposalRevenue.IsReleased);
      #            psaProjProposalProj_RetainedNow.visible(!projProposalRevenue.IsReleased);
      #            psaProjProposalProj_RetainedPercent.visible(!projProposalRevenue.IsReleased);
      #        }
      #
      #        if (!projProposalRevenue.IsReleased
      #            && psaProjProposalProj.RetainedNow < 0)
      #        {
      #            psaProjProposalProj_RetainedNow.allowEdit(false);
      #            psaProjProposalProj_RetainedPercent.allowEdit(false);
      #        }
      #        else
      #        {
      #            psaProjProposalProj_RetainedNow.allowEdit(true);
      #            psaProjProposalProj_RetainedPercent.allowEdit(true);
      #        }
      #    }
      #}
    ENDSOURCE
    SOURCE #setVisible_IN
      #// <GIN>
      #public void setVisible_IN()
      #{
      #    boolean isExcise                = TaxParameters::find().Excise_IN;
      #    boolean isTaxParametersMarked   = TaxParameters::checkTaxParameters_IN();
      #    boolean isTaxWithholdEnabled    = TaxWithholdParameters_IN::checkTaxParameters();
      #
      #
      #    emplSalesTax.visible(isTaxParametersMarked);
      #
      #    salesTax_Cost.visible(isTaxParametersMarked);
      #    costExciseRegister_IN.visible(isExcise);
      #
      #    salesTax_Revenue.visible(isTaxParametersMarked);
      #
      #    salesTax_RevenueSubscription.visible(isTaxParametersMarked);
      #
      #    salesTax_Item.visible(isTaxParametersMarked);
      #    exciseRegisterBalance_In.visible(isExcise);
      #
      #    salesTax_OnAcc.visible(isTaxParametersMarked);
      #    onAccountExciseRegister_IN.visible(isExcise);
      #
      #    salesOrderSalesTax_IN.visible(isTaxParametersMarked);
      #    salesOrderExciseRegister_IN.visible(isExcise);
      #
      #    withholdTaxItem_IN.visible(isTaxWithholdEnabled);
      #    buttonWithholdTax_IN.visible(isTaxWithholdEnabled);
      #    onAccountWithholdTax_IN.visible(isTaxWithholdEnabled);
      #    salesOrderWithholdTax_IN.visible(isTaxWithholdEnabled);
      #}
      #// </GIN>
      #
      #
      #
      #
      #
    ENDSOURCE
    SOURCE #toDate
      #public TransDate toDate()
      #{
      #    return toDate;
      #}
      #
    ENDSOURCE
    SOURCE #updateDisplay
      #public void updateDisplay(boolean _recalc = true)
      #{
      #    if (_recalc)
      #    {
      #        ProjInvoiceProposalInsertLines::setProjProposalTotals(projProposalJour.ProposalId);
      #    }
      #
      #    projProposalJour_ds.reread();
      #
      #    projProposalJour_ds.refreshEx();
      #
      #    psaProjProposalProj_ds.executeQuery();
      #
      #    projProposalJour_ds.active();
      #
      #    element.updateRelatedForm();
      #}
      #
    ENDSOURCE
    SOURCE #updatedRecs
      #Map updatedRecs(Args     args)
      #{
      #    Map                 updatedRecs;
      #    FormDataSource      formDataSource;
      #    ProjCostTrans       projCostTransDS;
      #    ProjCostTrans       projCostTransNew;
      #    ProjEmplTrans       projEmplTransNew;
      #    ProjEmplTrans       projEmplTransDS;
      #    ProjItemTrans       projItemTransDS;
      #    ProjItemTrans       projItemTransNew;
      #    ProjOnAccTrans      projOnAccTransDS;
      #    ProjOnAccTrans      projOnAccTransNew;
      #    ProjRevenueTrans    projRevenueTransDS;
      #    ProjRevenueTrans    projRevenueTransNew;
      #
      #    updatedRecs = new Map(Types::Int64,Types::Record);
      #    formDataSource  = args.record().dataSource();
      #
      #    switch(args.dataset())
      #    {
      #        case tableNum(ProjCostTrans):
      #            projCostTransDS   = args.record();
      #            for (projCostTransDS = formDataSource.getFirst(true) ?
      #                 formDataSource.getFirst(true) : formDataSource.cursor();
      #                 projCostTransDS; projCostTransDS = formDataSource.getNext())
      #            {
      #                projCostTransNew   = ProjCostTrans::find(projCostTransDS.TransId);
      #                updatedRecs.insert(projCostTransNew.RecId,projCostTransNew);
      #            }
      #            break;
      #
      #        case tableNum(ProjEmplTrans):
      #            projEmplTransDS   = args.record();
      #            for (projEmplTransDS = formDataSource.getFirst(true) ?
      #                 formDataSource.getFirst(true) : formDataSource.cursor();
      #                 projEmplTransDS; projEmplTransDS = formDataSource.getNext())
      #            {
      #                projEmplTransNew   = ProjEmplTrans::find(projEmplTransDS.TransId);
      #                updatedRecs.insert(projEmplTransNew.RecId,projEmplTransNew);
      #            }
      #            break;
      #
      #        case tableNum(ProjItemTrans):
      #            projItemTransDS   = args.record();
      #            for (projItemTransDS = formDataSource.getFirst(true) ?
      #                 formDataSource.getFirst(true) : formDataSource.cursor();
      #                 projItemTransDS; projItemTransDS = formDataSource.getNext())
      #            {
      #                projItemTransNew   = ProjItemTrans::find(projItemTransDS.ProjTransId);
      #                updatedRecs.insert(projItemTransNew.RecId,projItemTransNew);
      #            }
      #            break;
      #
      #        case tableNum(ProjOnAccTrans):
      #            projOnAccTransDS   = args.record();
      #            for (projOnAccTransDS = formDataSource.getFirst(true) ?
      #                 formDataSource.getFirst(true) : formDataSource.cursor();
      #                 projOnAccTransDS; projOnAccTransDS = formDataSource.getNext())
      #            {
      #                projOnAccTransNew   = ProjOnAccTrans::find(projOnAccTransDS.TransId);
      #                updatedRecs.insert(projOnAccTransNew.RecId,projOnAccTransNew);
      #            }
      #            break;
      #
      #        case tableNum(ProjRevenueTrans):
      #            projRevenueTransDS   = args.record();
      #            for (projRevenueTransDS = formDataSource.getFirst(true) ?
      #                 formDataSource.getFirst(true) : formDataSource.cursor();
      #                 projRevenueTransDS; projRevenueTransDS = formDataSource.getNext())
      #            {
      #                projRevenueTransNew   = ProjRevenueTrans::find(projRevenueTransDS.TransId);
      #                updatedRecs.insert(projRevenueTransNew.RecId,projRevenueTransNew);
      #            }
      #            break;
      #    }
      #
      #    return updatedRecs;
      #}
    ENDSOURCE
    SOURCE #updateRelatedForm
      #// If called from a single transaction update related transaction
      #void updateRelatedForm()
      #{
      #    FormRun             callerForm  = element.args().caller();
      #    FormDataSource      fds;
      #    Args                argsTrans = new Args();
      #    Map                 updatedRecs;
      #
      #    if ((element.args().caller() != null)
      #        && (element.args().caller().name() != formStr(projProjectTransactionsListPage))
      #        && (element.args().caller().name() != formStr(projGrantTransListPage)))
      #    {
      #        // Do not update datasource when caller form Posted Transactions List Page and Grant transactions List Page
      #        argsTrans.record(element.args().record());
      #
      #        if (argsTrans.record())
      #        {
      #            updatedRecs     = element.updatedRecs(argsTrans);
      #
      #            if (updatedRecs && updatedRecs.elements())
      #            {
      #                RunBaseMultiParm::formCacheUpdate(callerForm,element.args().record(),updatedRecs.pack());
      #                fds = element.args().record().dataSource();
      #                fds.active();
      #            }
      #        }
      #    }
      #}
    ENDSOURCE
  ENDMETHODS
  OBJECTBANK
    PROPERTIES
    ENDPROPERTIES
    
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjProposalJour
          Table               #ProjProposalJour
          Index               #ProposalNumIdx
          AllowCheck          #No
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          StartPosition       #Last
          LinkType            #Active
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD EInvoiceAccountCode
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    this.allowEdit(true);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #linkActive
          #public void linkActive()
          #{
          #    if (callerRecord && callerRecord is PSATmpProjProposalTrans)
          #    {
          #        this.query().dataSourceTable(tableNum(ProjProposalJour)).clearDynalinks();
          #        rangeProjProposalId.value(element.getProposalIDRangeFromList());
          #    }
          #
          #    super();
          #}
        ENDSOURCE
        SOURCE #reread
          #public void reread()
          #{
          #    super();
          #
          #    element.fillInvoiceFormatCombo();
          #}
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    super();
          #
          #    criteriaInvoiceProjId  = this.query().dataSourceNo(1).addRange(fieldNum(ProjProposalJour, ProjInvoiceProjId));
          #    rangeProjProposalId  = this.query().dataSourceNo(1).addRange(fieldNum(ProjProposalJour, ProposalId));
          #}
        ENDSOURCE
        SOURCE #editInvoiceFormat
          #edit PSAInvoiceFormat editInvoiceFormat(boolean _set, ProjProposalJour _projProposalJour, PSAInvoiceFormat _newValue)
          #{
          #    PSAInvoiceFormat    currentValue;
          #    PSAInvoiceFormats   formatValue;
          #
          #    if (!isConfigurationkeyEnabled(configurationKeyNum(Project3)))
          #    {
          #        return currentValue;
          #    }
          #
          #    select firstonly projProposalRevenuel where projProposalRevenuel.ProposalId == _projProposalJour.ProposalId;
          #    select firstonly RecId from psaProjInvoiceDetailLine where psaProjInvoiceDetailLine.ProposalId == projProposalJour.ProposalId;
          #
          #    if(_set)
          #    {
          #        if(projProposalRevenuel && projProposalRevenuel.IsRetained)
          #        {
          #            if(_newValue == 0)
          #            {
          #                formatValue = PSAInvoiceFormats::DetailInvoice;
          #            }
          #        }
          #        else
          #        {
          #            if(contractHasBillingRules)
          #            {
          #                if (psaProjInvoiceDetailLine.RecId     != 0  ||
          #                        projProposalJour.psaInvoiceTxtPre  != '')
          #                {
          #                    switch(_newValue)
          #                    {
          #                        case 0:
          #                            formatValue = PSAInvoiceFormats::ManageInvoice;
          #                            break;
          #
          #                        case 1:
          #                            formatValue = PSAInvoiceFormats::DetailInvoice;
          #                            break;
          #                    }
          #                }
          #                else
          #                {
          #                    switch(_newValue)
          #                    {
          #
          #                        case 0:
          #                            formatValue = PSAInvoiceFormats::DetailInvoice;
          #                            break;
          #                        case 1:
          #                            formatValue = PSAInvoiceFormats::ManageInvoice;
          #                            break;
          #                    }
          #                }
          #            }
          #            else
          #            {
          #                if (psaProjInvoiceDetailLine.RecId     != 0  ||
          #                        projProposalJour.psaInvoiceTxtPre  != '')
          #                {
          #                    switch(_newValue)
          #                    {
          #                        case 0:
          #                            formatValue = PSAInvoiceFormats::ManageInvoice;
          #                            break;
          #                        case 1:
          #                            formatValue = PSAInvoiceFormats::DetailInvoice;
          #                            break;
          #                        case 2:
          #                            formatValue = PSAInvoiceFormats::SummaryInvoice;
          #                            break;
          #                        case 3:
          #                            formatValue = PSAInvoiceFormats::SummaryByCategory;
          #                            break;
          #                    }
          #                }
          #                else
          #                {
          #                    switch(_newValue)
          #                    {
          #                        case 0:
          #                            formatValue = PSAInvoiceFormats::DetailInvoice;
          #                            break;
          #                        case 1:
          #                            formatValue = PSAInvoiceFormats::SummaryInvoice;
          #                            break;
          #                        case 2:
          #                            formatValue = PSAInvoiceFormats::SummaryByCategory;
          #                            break;
          #                        case 3:
          #                            formatValue = PSAInvoiceFormats::ManageInvoice;
          #                            break;
          #                    }
          #                }
          #            }
          #        }
          #
          #        if(_projProposalJour.psaInvoiceFormats != formatValue)
          #        {
          #            _projProposalJour.psaInvoiceFormats = formatValue;
          #            projProposalJour_ds.refresh();
          #        }
          #    }
          #    if(projProposalRevenuel && projProposalRevenuel.IsRetained)
          #    {
          #        if(_projProposalJour.psaInvoiceFormats == PSAInvoiceFormats::DetailInvoice)
          #        {
          #            currentValue = 0;
          #        }
          #    }
          #    else
          #    {
          #        if(contractHasBillingRules)
          #        {
          #            if (psaProjInvoiceDetailLine.RecId     != 0  ||
          #                        projProposalJour.psaInvoiceTxtPre  != '')
          #            {
          #                switch(_projProposalJour.psaInvoiceFormats)
          #                {
          #                    case PSAInvoiceFormats::DetailInvoice:
          #                        currentValue = 1;
          #                        break;
          #                    case PSAInvoiceFormats::ManageInvoice:
          #                        currentValue = 0;
          #                        break;
          #                }
          #            }
          #            else
          #            {
          #                switch(_projProposalJour.psaInvoiceFormats)
          #                {
          #                    case PSAInvoiceFormats::DetailInvoice:
          #                        currentValue = 0;
          #                        break;
          #                    case PSAInvoiceFormats::ManageInvoice:
          #                        currentValue = 1;
          #                        break;
          #                }
          #            }
          #        }
          #        else
          #        {
          #            if (psaProjInvoiceDetailLine.RecId     != 0  ||
          #                        projProposalJour.psaInvoiceTxtPre  != '')
          #            {
          #
          #               switch(_projProposalJour.psaInvoiceFormats)
          #                {
          #                    case PSAInvoiceFormats::ManageInvoice:
          #                        currentValue = 0;
          #                        break;
          #                    case PSAInvoiceFormats::DetailInvoice:
          #                        currentValue = 1;
          #                        break;
          #                    case PSAInvoiceFormats::SummaryInvoice:
          #                        currentValue = 2;
          #                        break;
          #                    case PSAInvoiceFormats::SummaryByCategory:
          #                        currentValue = 3;
          #                        break;
          #                }
          #
          #            }
          #            else
          #            {
          #                switch(_projProposalJour.psaInvoiceFormats)
          #                {
          #                    case PSAInvoiceFormats::DetailInvoice:
          #                        currentValue = 0;
          #                        break;
          #                    case PSAInvoiceFormats::SummaryInvoice:
          #                        currentValue = 1;
          #                        break;
          #                    case PSAInvoiceFormats::SummaryByCategory:
          #                        currentValue = 2;
          #                        break;
          #                    case PSAInvoiceFormats::ManageInvoice:
          #                        currentValue = 3;
          #                        break;
          #                }
          #            }
          #        }
          #    }
          #    return currentValue;
          #}
        ENDSOURCE
        SOURCE #transactionRange
          #void transactionRange()
          #{
          #
          #    ProjCostTrans           projCostTransCaller;
          #    ProjCostTransSale       projCostTransSale;
          #    ProjEmplTrans           projEmplTransCaller;
          #    ProjEmplTransSale       projEmplTransSale;
          #    ProjItemTrans           projItemTransCaller;
          #    ProjItemTransSale       projItemTransSale;
          #    ProjOnAccTrans          projOnAccTransCaller;
          #    ProjOnAccTransSale      projOnAccTransSale;
          #    ProjRevenueTrans        projRevenueTransCaller;
          #    ProjRevenueTransSale    projRevenueTransSale;
          #    FormDataSource          formDataSource;
          #    ProjProposalId          tmpProjProposalId;
          #
          #    proposalId              = SysQuery::valueEmptyString();
          #    if (element.args().record().dataSource()) //if the calling record has a datasource then load the proposal id's from the calling record
          #    {
          #        switch (element.args().record().TableId)
          #        {
          #            case (tableNum(ProjCostTrans)):
          #                projCostTransCaller     = element.args().record();
          #                formDataSource          = projCostTransCaller.dataSource();
          #                for (projCostTransCaller = formDataSource.getFirst(true) ?
          #                     formDataSource.getFirst(true) : formDataSource.cursor();
          #                     projCostTransCaller; projCostTransCaller = formDataSource.getNext())
          #                {
          #                    while select projCostTransSale
          #                        where projCostTransSale.TransId == projCostTransCaller.TransId
          #                    {
          #                        tmpProjProposalId = projCostTransSale.proposalId();
          #                        if (tmpProjProposalId)
          #                        {
          #                            if (proposalId == SysQuery::valueEmptyString())
          #                            {
          #                                proposalId = tmpProjProposalId;
          #                            }
          #                            else
          #                            {
          #                                proposalId = proposalId+','+tmpProjProposalId;
          #                            }
          #                        }
          #                    }
          #                }
          #                break;
          #
          #            case (tableNum(ProjEmplTrans)):
          #                projEmplTransCaller     = element.args().record();
          #                formDataSource          = projEmplTransCaller.dataSource();
          #                for (projEmplTransCaller = formDataSource.getFirst(true) ?
          #                     formDataSource.getFirst(true) : formDataSource.cursor();
          #                     projEmplTransCaller; projEmplTransCaller = formDataSource.getNext())
          #                {
          #                    while select projEmplTransSale
          #                        where projEmplTransSale.TransId == projEmplTransCaller.TransId
          #                    {
          #                        tmpProjProposalId = projEmplTransSale.proposalId();
          #                        if (tmpProjProposalId)
          #                        {
          #                            if (proposalId == SysQuery::valueEmptyString())
          #                            {
          #                                proposalId = tmpProjProposalId;
          #                            }
          #                            else
          #                            {
          #                                proposalId = proposalId+','+tmpProjProposalId;
          #                            }
          #                        }
          #                    }
          #                }
          #                break;
          #
          #            case (tableNum(ProjRevenueTrans)):
          #                projRevenueTransCaller  = element.args().record();
          #                formDataSource          = projRevenueTransCaller.dataSource();
          #                for (projRevenueTransCaller = formDataSource.getFirst(true) ?
          #                     formDataSource.getFirst(true) : formDataSource.cursor();
          #                     projRevenueTransCaller; projRevenueTransCaller = formDataSource.getNext())
          #                {
          #                    while select projRevenueTransSale
          #                        where projRevenueTransSale.TransId == projRevenueTransCaller.TransId
          #                    {
          #                        tmpProjProposalId = projRevenueTransSale.proposalId();
          #                        if (tmpProjProposalId)
          #                        {
          #                            if (proposalId == SysQuery::valueEmptyString())
          #                            {
          #                                proposalId = tmpProjProposalId;
          #                            }
          #                            else
          #                            {
          #                                proposalId = proposalId+','+tmpProjProposalId;
          #                            }
          #                        }
          #                    }
          #                }
          #                break;
          #
          #            case (tableNum(ProjItemTrans)):
          #                projItemTransCaller     = element.args().record();
          #                formDataSource          = projItemTransCaller.dataSource();
          #                for (projItemTransCaller = formDataSource.getFirst(true) ?
          #                     formDataSource.getFirst(true) : formDataSource.cursor();
          #                     projItemTransCaller; projItemTransCaller = formDataSource.getNext())
          #                {
          #                    while select projItemTransSale
          #                        where projItemTransSale.ProjTransId == projItemTransCaller.ProjTransId
          #                    {
          #                        tmpProjProposalId = projItemTransSale.proposalId();
          #                        if (tmpProjProposalId)
          #                        {
          #                            if (proposalId == SysQuery::valueEmptyString())
          #                            {
          #                                proposalId = tmpProjProposalId;
          #                            }
          #                            else
          #                            {
          #                                proposalId = proposalId+','+tmpProjProposalId;
          #                            }
          #                        }
          #                    }
          #                }
          #                break;
          #
          #            case (tableNum(ProjOnAccTrans)):
          #                projOnAccTransCaller    = element.args().record();
          #                formDataSource          = projOnAccTransCaller.dataSource();
          #                for (projOnAccTransCaller = formDataSource.getFirst(true) ?
          #                     formDataSource.getFirst(true) : formDataSource.cursor();
          #                     projOnAccTransCaller; projOnAccTransCaller = formDataSource.getNext())
          #                {
          #                    while select projOnAccTransSale
          #                        where projOnAccTransSale.TransId == projOnAccTransCaller.TransId
          #                    {
          #                        tmpProjProposalId = projOnAccTransSale.proposalId();
          #                        if (tmpProjProposalId)
          #                        {
          #                            if (proposalId == SysQuery::valueEmptyString())
          #                            {
          #                                proposalId = tmpProjProposalId;
          #                            }
          #                            else
          #                            {
          #                                proposalId = proposalId+','+tmpProjProposalId;
          #                            }
          #                        }
          #                    }
          #                }
          #                break;
          #        }
          #    }
          #}
        ENDSOURCE
        SOURCE #write
          #public void write()
          #{
          #    super();
          #
          #    if(TaxParameters::find().CashDiscOnInvoice)
          #    {
          #        if(projProposalJour.CashDiscCode &&
          #            projProposalJour.InvoiceAmount < 0)
          #        {
          #            info("@SYS99050");
          #        }
          #    }
          #}
          #
          #
          #
        ENDSOURCE
        SOURCE #executeQuery
          #void executeQuery()
          #{
          #    if (setTransactionRange)
          #    {
          #        this.transactionRange();
          #    }
          #
          #    super();
          #
          #    if (projProposalJour)
          #    {
          #        contractHasBillingRules = PSAContractLineItems::hasBillingRules(projProposalJour.ProjInvoiceProjId);
          #    }
          #}
        ENDSOURCE
        SOURCE #active
          #int active()
          #{
          #    int     ret;
          #
          #    groupLineTab.visible(false);
          #
          #    projFormLetter_Invoice.enabled(projProposalJour.enablePostButton());
          #
          #    element.fillInvoiceFormatCombo();
          #
          #    ret  = super();
          #
          #    if (projProposalRevenue.IsReleased)
          #    {
          #        revenue.caption("@PSA11365");
          #
          #        disableAddLinesButton = true;
          #    }
          #
          #
          #    element.setButtonAccess();
          #    element.setFieldAccess();
          #
          #    if (CustTable::isCustDKPublic(projProposalJour.InvoiceAccount) == NoYes::Yes)
          #    {
          #        projProposalJour_ds.object(fieldNum(ProjProposalJour, eInvoiceLineSpecific)).visible(true);
          #        projProposalJour_ds.object(fieldNum(ProjProposalJour, eInvoiceAccountCode)).visible(true);
          #    }
          #    else
          #    {
          #        projProposalJour_ds.object(fieldNum(ProjProposalJour, eInvoiceLineSpecific)).visible(false);
          #        projProposalJour_ds.object(fieldNum(ProjProposalJour, eInvoiceAccountCode)).visible(false);
          #    }
          #
          #    if (isConfigurationkeyEnabled(configurationKeyNum(Project3)))
          #    {
          #        if (projProposalJour.LineProperty == ProjLinePropertyCode::Canceled
          #            || projProposalJour.LineProperty == ProjLinePropertyCode::Invoiced)
          #        {
          #            projProposalJour_ds.allowEdit(false);
          #            psaProjProposalProj_RetainedNow.enabled(false);
          #            psaProjProposalProj_RetainedPercent.enabled(false);
          #        }
          #        else
          #        {
          #            projProposalJour_ds.allowEdit(true);
          #            psaProjProposalProj_RetainedNow.enabled(true);
          #            psaProjProposalProj_RetainedPercent.enabled(true);
          #        }
          #
          #        if (projProposalJour.LineProperty == ProjLinePropertyCode::Invoiced ||
          #            projProposalJour.LineProperty == ProjLinePropertyCode::Canceled)
          #        {
          #            psAbtPrintPreview.enabled(false);
          #        }
          #        else
          #        {
          #            psAbtPrintPreview.enabled(true);
          #        }
          #    }
          #
          #    tabPageHeaderMiddle.visible(psaProjProposalProj ? true : false);
          #
          #    groupLineTab.visible(true);
          #
          #    // <GEEU>
          #    if (countryRegion_LTLV)
          #    {
          #        element.initDesign_LT();
          #    }
          #    // </GEEU>
          #
          #    // <GBR>
          #    if(BrazilParameters::isEnabled())
          #    {
          #        if(projProposalJour.LineProperty == ProjLinePropertyCode::InvoiceCanceled_BR)
          #        {
          #            infoBarText_BR.visible(true);
          #        }
          #        element.enableDebitNoteControls_BR();
          #        dnProjFormLetter_Invoice_BR.enabled(projProposalJour.enablePostButton());
          #
          #    }
          #    // </GBR>
          #
          #
          #    return ret;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjProposalEmpl
          Table               #ProjProposalEmpl
          Index               #ProposalIdx
          AllowCheck          #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #ProjProposalJour
          LinkType            #Active
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #delete
          #public void delete()
          #{
          #    super();
          #
          #    if (!isDeleteMarked)
          #    {
          #        element.updateDisplay();
          #    }
          #}
        ENDSOURCE
        SOURCE #deleteMarked
          #public void deleteMarked()
          #{
          #    isDeleteMarked = true;
          #
          #    super();
          #
          #    isDeleteMarked = false;
          #
          #    element.updateDisplay();
          #}
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    //boolean             adjustmentsAllowed;
          #    ProjEmplTransSale   projEmplTransSale;
          #    int                 ret;
          #
          #    ret = super();
          #
          #    if (isConfigurationkeyEnabled(configurationKeyNum(Project3)))
          #    {
          #        psaIndirectComponents.enabled(projEmplTrans.psaIndirectComponentGroup ? true : false);
          #    }
          #
          #    projEmplTransSale = ProjEmplTransSale::find(projProposalEmplDetail.SaleRefRecId);
          #    //The prodAdjustmentEmpl drop dialog is hidden based on late pre-release feedback.  Looking to revisit in future release.
          #    //adjustmentsAllowed = ProjTrans::newProjEmplTransSale(projEmplTransSale.projEmplTrans(), projEmplTransSale).adjustable();
          #    //projAdjustmentEmpl.enabled(adjustmentsAllowed);
          #
          #    if (projProposalEmpl_ds.allowEdit())
          #    {
          #        projProposalEmpl_ds.object(fieldNum(ProjProposalEmpl, eInvoiceAccountCode)).enabled(projProposalJour.eInvoiceLineSpecific);
          #    }
          #
          #    return ret;
          #}
          #
        ENDSOURCE
        SOURCE #linkActive
          #public void linkActive()
          #{
          #    super();
          #
          #    if (!calledForEditInGrid && projProposalJour_ds.recordsMarked().lastIndex() <= 1)
          #    {
          #        empl.visible(projProposalEmpl    ? true : false);
          #
          #        projProposalEmpl_EInvoiceAccountCode.visible(CustTable::isCustDKPublic(projProposalJour.InvoiceAccount));
          #
          #        if (projProposalEmpl && jumpToMain && parmProjTransType == ProjTransType::Hour)
          #        {
          #            projProposalEmpl_ds.findRecord(ProjProposalEmpl::find(parmTransId, projProposalJour.ProposalId));
          #            projProposalEmpl_TransId.setFocus();
          #        }
          #    }
          #    else
          #    {
          #        empl.visible(false);
          #    }
          #
          #    emplgrid.update();
          #}
          #
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjProposalOnAcc
          Table               #ProjProposalOnAcc
          Index               #ProposalIdx
          AllowCheck          #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #ProjProposalJour
          LinkType            #Active
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #delete
          #public void delete()
          #{
          #    super();
          #
          #    if (!isDeleteMarked)
          #    {
          #        element.updateDisplay();
          #    }
          #}
        ENDSOURCE
        SOURCE #deleteMarked
          #public void deleteMarked()
          #{
          #    isDeleteMarked = true;
          #
          #    super();
          #
          #    isDeleteMarked = false;
          #
          #    element.updateDisplay();
          #}
        ENDSOURCE
        SOURCE #linkActive
          #public void linkActive()
          #{
          #    super();
          #    if (!calledForEditInGrid && projProposalJour_ds.recordsMarked().lastIndex() <= 1)
          #    {
          #        onAcc.visible(projProposalOnAcc    ? true : false);
          #
          #        projProposalOnAcc_EInvoiceAccountCode.visible(CustTable::isCustDKPublic(projProposalJour.InvoiceAccount));
          #
          #        if (projProposalOnAcc && jumpToMain && parmProjTransType == ProjTransType::OnAccount)
          #        {
          #           projProposalOnAcc_ds.findRecord(ProjProposalOnAcc::find(parmTransId, projProposalJour.ProposalId));
          #           projProposalOnAcc_TransId.setFocus();
          #        }
          #    }
          #    else
          #    {
          #        onAcc.visible(false);
          #    }
          #}
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #
          #    if (projProposalOnAcc_ds.allowEdit())
          #    {
          #        projProposalOnAcc_ds.object(fieldNum(ProjProposalOnAcc, eInvoiceAccountCode)).enabled(projProposalJour.eInvoiceLineSpecific);
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjProposalCost
          Table               #ProjProposalCost
          Index               #ProposalIdx
          AllowCheck          #No
          AllowCreate         #No
          JoinSource          #ProjProposalJour
          LinkType            #Active
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #delete
          #public void delete()
          #{
          #    super();
          #
          #    if (!isDeleteMarked)
          #    {
          #        element.updateDisplay();
          #    }
          #}
        ENDSOURCE
        SOURCE #deleteMarked
          #public void deleteMarked()
          #{
          #    isDeleteMarked = true;
          #
          #    super();
          #
          #    isDeleteMarked = false;
          #
          #    element.updateDisplay();
          #}
        ENDSOURCE
        SOURCE #linkActive
          #public void linkActive()
          #{
          #    super();
          #    if (!calledForEditInGrid && projProposalJour_ds.recordsMarked().lastIndex() <= 1)
          #    {
          #        cost.visible(projProposalCost    ? true : false);
          #
          #        projProposalCost_EInvoiceAccountCode.visible(CustTable::isCustDKPublic(projProposalJour.InvoiceAccount));
          #
          #        if (projProposalCost && jumpToMain && parmProjTransType == ProjTransType::Cost)
          #        {
          #            projProposalCost_ds.findRecord(ProjProposalCost::find(parmTransId, projProposalJour.ProposalId));
          #            projProposalCost_TransId.setFocus();
          #        }
          #    }
          #    else
          #    {
          #        cost.visible(false);
          #    }
          #}
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    //boolean             adjustmentsAllowed;
          #    ProjCostTransSale   projCostTransSale;
          #    int ret;
          #
          #    ret = super();
          #
          #    projCostTransSale = ProjCostTransSale::find(projProposalCostDetail.SaleRefRecId);
          #    //The prodAdjustmentCost drop dialog is hidden based on late pre-release feedback.  Looking to revisit in future release.
          #    //adjustmentsAllowed = ProjTrans::newProjCostTransSale(projCostTransSale.projCostTrans(), projCostTransSale).adjustable();
          #    //projAdjustmentCost.enabled(adjustmentsAllowed);
          #
          #    if (projProposalCost_ds.allowEdit())
          #    {
          #        projProposalCost_ds.object(fieldNum(ProjProposalCost, eInvoiceAccountCode)).enabled(projProposalJour.eInvoiceLineSpecific);
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjProposalItem_SalesOrder
          Table               #ProjProposalItem
          Index               #ProposalIdx
          AllowCheck          #No
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #ProjProposalJour
          LinkType            #Active
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD DeliverNow
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void modified()
                #{
                #    super();
                #
                #    projProposalItem_SalesOrder.setQty(DocumentStatus::ProjectInvoice);
                #    projProposalItem_SalesOrder.setInventDeliverNow();
                #    projProposalItem_SalesOrder_ds.forceWrite(true);
                #
                #    if (closeLine.exists(projProposalItem_SalesOrder.RecId))
                #    {
                #        projProposalItem_SalesOrder.RemainAfter = 0;
                #        projProposalItem_SalesOrder.setRemainAfterInvent();
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD RemainAfter
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void modified()
                #{
                #    super();
                #
                #    projProposalItem_SalesOrder.setRemainAfterInvent();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #delete
          #public void delete()
          #{
          #    super();
          #
          #    if (!isDeleteMarked)
          #    {
          #        element.updateDisplay();
          #    }
          #}
        ENDSOURCE
        SOURCE #deleteMarked
          #public void deleteMarked()
          #{
          #    isDeleteMarked = true;
          #
          #    super();
          #
          #    isDeleteMarked = false;
          #
          #    element.updateDisplay();
          #}
        ENDSOURCE
        SOURCE #write
          #public void write()
          #{
          #    super();
          #
          #    ttsbegin;
          #
          #    projProposalItem_SalesOrder.setLineAmount();
          #
          #    ttscommit;
          #}
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    //boolean             adjustmentsAllowed;
          #    ProjItemTransSale   projItemTransSale;
          #    int ret;
          #
          #    ret = super();
          #
          #    projItemTransSale = ProjItemTransSale::find(projProposalItemDetail_SalesOrder.SaleRefRecId);
          #    //The projAdjustmentSalesLine drop dialog is hidden based on late pre-release feedback.  Looking to revisit in future release.
          #    //adjustmentsAllowed = ProjTrans::newProjItemTransSale(projItemTransSale.projItemTrans(), projItemTransSale).adjustable();
          #    //projAdjustmentSalesLine.enabled(adjustmentsAllowed);
          #
          #    projProposalItem_SalesOrder_ds.object(fieldNum(ProjProposalItem, eInvoiceAccountCode)).enabled(projProposalJour.eInvoiceLineSpecific);
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #closeLine
          #// BP Deviation documented
          #edit NoYes closeLine(boolean            _set,
          #                     ProjProposalItem   _projProposalItem,
          #                     NoYes              _closeLine)
          #{
          #    if (_set)
          #    {
          #        if (_closeLine)
          #        {
          #            _projProposalItem.RemainAfter = 0;
          #            _projProposalItem.setRemainAfterInvent();
          #            closeLine.insert(_projProposalItem.RecId,1);
          #        }
          #        else
          #        {
          #            _projProposalItem.setQty(DocumentStatus::ProjectInvoice);
          #            _projProposalItem.setInventDeliverNow();
          #            closeLine.insert(_projProposalItem.RecId,0);
          #        }
          #    }
          #
          #    if (! closeLine.exists(_projProposalItem.RecId))
          #    {
          #        closeLine.insert(_projProposalItem.RecId,0);
          #    }
          #
          #    return closeLine.lookup(_projProposalItem.RecId);
          #}
        ENDSOURCE
        SOURCE #linkActive
          #public void linkActive()
          #{
          #    super();
          #    if (!calledForEditInGrid && projProposalJour_ds.recordsMarked().lastIndex() <= 1)
          #    {
          #        itemSalesLine.visible(projProposalItem_SalesOrder    ? true : false);
          #
          #        projProposalItem_SalesOrder_EInvoiceAccountCode.visible(CustTable::isCustDKPublic(projProposalJour.InvoiceAccount));
          #
          #        if (projProposalItem_SalesOrder && jumpToMain && parmProjTransType == ProjTransType::Item && parmIsItemTransTypeSales)
          #        {
          #            projProposalItem_SalesOrder_ds.findRecord(ProjProposalItem::find(parmTransId, projProposalJour.ProposalId));
          #            projProposalItem_SalesOrder_ProjTransId.setFocus();
          #        }
          #    }
          #    else
          #    {
          #        itemSalesLine.visible(false);
          #    }
          #}
          #
          #
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    super();
          #
          #    this.query().dataSourceTable(tableNum(ProjProposalItem),1).addRange(fieldNum(ProjProposalItem,ItemType)).value(queryValue(ProjItemType::SalesOrder));
          #}
          #
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjProposalRevenue
          Table               #ProjProposalRevenue
          Index               #ProposalIdx
          AllowCheck          #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #ProjProposalJour
          LinkType            #Active
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #delete
          #public void delete()
          #{
          #    super();
          #
          #    if (!isDeleteMarked)
          #    {
          #        element.updateDisplay();
          #    }
          #}
        ENDSOURCE
        SOURCE #deleteMarked
          #public void deleteMarked()
          #{
          #    isDeleteMarked = true;
          #
          #    super();
          #
          #    isDeleteMarked = false;
          #
          #    element.updateDisplay();
          #}
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    super();
          #
          #    if (isConfigurationkeyEnabled(configurationKeyNum(Project3)))
          #    {
          #        this.query().dataSourceTable(tableNum(ProjProposalRevenue)).addRange(fieldNum(ProjProposalRevenue, IsRetained)).value(SysQuery::valueNot(NoYes::Yes));
          #    }
          #}
          #
        ENDSOURCE
        SOURCE #linkActive
          #public void linkActive()
          #{
          #    super();
          #    if (!calledForEditInGrid && projProposalJour_ds.recordsMarked().lastIndex() <= 1)
          #    {
          #        revenue.visible(projProposalRevenue ? true : false);
          #
          #        projProposalRevenue_EInvoiceAccountCode.visible(CustTable::isCustDKPublic(projProposalJour.InvoiceAccount));
          #
          #        if (projProposalRevenue && jumpToMain && parmProjTransType == ProjTransType::Revenue && !parmIsRevTransOriginSubscription)
          #        {
          #            projProposalRevenue_ds.findRecord(ProjProposalRevenue::find(parmTransId, projProposalJour.ProposalId));
          #            projProposalRevenue_TransId.setFocus();
          #        }
          #    }
          #    else
          #    {
          #        revenue.visible(false);
          #    }
          #
          #}
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    //boolean                 adjustmentsAllowed;
          #    ProjRevenueTransSale    projRevenueTransSale;
          #    int ret;
          #
          #    ret = super();
          #
          #    projRevenueTransSale = ProjRevenueTransSale::find(projProposalRevenueDetail.SaleRefRecId);
          #    //The projAdjustmentRevenue drop dialog is hidden based on late pre-release feedback.  Looking to revisit in future release.
          #    //adjustmentsAllowed = ProjTrans::newProjRevenueTransSale(projRevenueTransSale.projRevenueTrans(), projRevenueTransSale).adjustable();
          #    //projAdjustmentRevenue.enabled(adjustmentsAllowed);
          #
          #    if (projProposalRevenue_ds.allowEdit())
          #    {
          #        projProposalRevenue_ds.object(fieldNum(ProjProposalRevenue, eInvoiceAccountCode)).enabled(projProposalJour.eInvoiceLineSpecific);
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #projEmplTrans
          Table               #ProjEmplTrans
          Index               #TransIdx
          AllowCheck          #No
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #ProjProposalEmpl
          LinkType            #InnerJoin
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #projCostTrans
          Table               #ProjCostTrans
          Index               #TransIdx
          AllowCheck          #No
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #ProjProposalCost
          LinkType            #InnerJoin
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #projOnAccTrans
          Table               #ProjOnAccTrans
          Index               #TransIdx
          AllowCheck          #No
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #ProjProposalOnAcc
          LinkType            #InnerJoin
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjRevenueTrans
          Table               #ProjRevenueTrans
          Index               #TransIdx
          AllowCheck          #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #ProjProposalRevenue
          LinkType            #InnerJoin
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #public void init()
          #{
          #    super();
          #
          #    this.query().dataSourceTable(tableNum(ProjRevenueTrans)).addRange(fieldNum(ProjRevenueTrans, TransactionOrigin)).value(SysQuery::valueNot(ProjOrigin::Subscription));
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjItemTrans_Project
          Table               #ProjItemTrans
          Index               #TransIdx
          AllowCheck          #No
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #ProjProposalItem_Project
          LinkType            #InnerJoin
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjProposalItem_Project
          Table               #ProjProposalItem
          Index               #ProposalIdx
          AllowCheck          #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #ProjProposalJour
          LinkType            #Active
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #delete
          #public void delete()
          #{
          #    super();
          #
          #    if (!isDeleteMarked)
          #    {
          #        element.updateDisplay();
          #    }
          #}
        ENDSOURCE
        SOURCE #deleteMarked
          #public void deleteMarked()
          #{
          #    isDeleteMarked = true;
          #
          #    super();
          #
          #    isDeleteMarked = false;
          #
          #    element.updateDisplay();
          #}
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    super();
          #
          #    this.query().dataSourceTable(tableNum(ProjProposalItem),1).addRange(fieldNum(ProjProposalItem,ItemType)).value(queryValue(ProjItemType::Project));
          #    this.query().dataSourceTable(tableNum(ProjProposalItem),1).addRange(fieldNum(ProjProposalItem,ItemType)).value(queryValue(ProjItemType::InventJournal));
          #    this.query().dataSourceTable(tableNum(ProjProposalItem),1).addRange(fieldNum(ProjProposalItem,ItemType)).value(queryValue(ProjItemType::PurchOrder));
          #    this.query().dataSourceTable(tableNum(ProjProposalItem),1).addRange(fieldNum(ProjProposalItem,ItemType)).value(queryValue(ProjItemType::VendorInvoice));
          #    this.query().dataSourceTable(tableNum(ProjProposalItem),1).addRange(fieldNum(ProjProposalItem,ItemType)).value(queryValue(ProjItemType::Production));
          #    this.query().dataSourceTable(tableNum(ProjProposalItem),1).addRange(fieldNum(ProjProposalItem,ItemType)).value(queryValue(ProjItemType::ProdLine));
          #    this.query().dataSourceTable(tableNum(ProjProposalItem),1).addRange(fieldNum(ProjProposalItem,ItemType)).value(queryValue(ProjItemType::BeginningBalance));
          #}
          #
        ENDSOURCE
        SOURCE #linkActive
          #public void linkActive()
          #{
          #    super();
          #    if (!calledForEditInGrid && projProposalJour_ds.recordsMarked().lastIndex() <= 1)
          #    {
          #        itemProject.visible(projProposalItem_Project    ? true : false);
          #
          #        projProposalItem_Project_EInvoiceAccountCode.visible(CustTable::isCustDKPublic(projProposalJour.InvoiceAccount));
          #
          #        if (projProposalItem_Project && jumpToMain && parmProjTransType == ProjTransType::Item && !parmIsItemTransTypeSales)
          #        {
          #            projProposalItem_Project_ds.findRecord(ProjProposalItem::find(parmTransId, projProposalJour.ProposalId));
          #            projProposalItem_Project_ProjTransId.setFocus();
          #        }
          #    }
          #    else
          #    {
          #        itemProject.visible(false);
          #    }
          #}
          #
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    //boolean             adjustmentsAllowed;
          #    ProjItemTransSale   projItemTransSale;
          #    int ret;
          #
          #    ret = super();
          #
          #    projItemTransSale = ProjItemTransSale::find(projProposalCostDetail.SaleRefRecId);
          #    //The projAdjustmentItemProject drop dialog is hidden based on late pre-release feedback.  Looking to revisit in future release.
          #    //adjustmentsAllowed = ProjTrans::newProjItemTransSale(projItemTransSale.projItemTrans(), projItemTransSale).adjustable();
          #    //projAdjustmentItemProject.enabled(adjustmentsAllowed);
          #
          #    if (projProposalItem_Project_ds.allowEdit())
          #    {
          #        projProposalItem_Project_ds.object(fieldNum(ProjProposalItem, eInvoiceAccountCode)).enabled(projProposalJour.eInvoiceLineSpecific);
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #SalesLine
          Table               #SalesLine
          Index               #SalesLineIdx
          AllowCheck          #No
          AllowEdit           #No
          AllowCreate         #No
          JoinSource          #ProjProposalItem_SalesOrder
          LinkType            #InnerJoin
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #public void init()
          #{
          #    super();
          #
          #    if (!isConfigurationkeyEnabled(new DictTable(tableNum(SalesLine)).configurationKeyId()))
          #    {
          #        salesLine_ds.linkType(FormLinkType::Passive);
          #    }
          #}
          #
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjProposalRevenueSubscription
          Table               #ProjProposalRevenue
          Index               #ProposalIdx
          AllowCheck          #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #ProjProposalJour
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #delete
          #public void delete()
          #{
          #    super();
          #
          #    if (!isDeleteMarked)
          #    {
          #        element.updateDisplay();
          #    }
          #}
        ENDSOURCE
        SOURCE #deleteMarked
          #public void deleteMarked()
          #{
          #    isDeleteMarked = true;
          #
          #    super();
          #
          #    isDeleteMarked = false;
          #
          #    element.updateDisplay();
          #}
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    //boolean                 adjustmentsAllowed;
          #    ProjRevenueTransSale    projRevenueTransSale;
          #    int ret;
          #
          #    ret = super();
          #
          #    projRevenueTransSale = ProjRevenueTransSale::find(projProposalRevenueDetailSubscription.SaleRefRecId);
          #    //The projAdjustmentSubscription drop dialog is hidden based on late pre-release feedback.  Looking to revisit in future release.
          #    //adjustmentsAllowed = ProjTrans::newProjRevenueTransSale(projRevenueTransSale.projRevenueTrans(), projRevenueTransSale).adjustable();
          #    //projAdjustmentSubscription.enabled(adjustmentsAllowed);
          #
          #    projProposalRevenueSubscription_ds.object(fieldNum(ProjProposalRevenue, eInvoiceAccountCode)).enabled(projProposalJour.eInvoiceLineSpecific);
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #linkActive
          #public void linkActive()
          #{
          #    super();
          #
          #    if (!calledForEditInGrid && projProposalJour_ds.recordsMarked().lastIndex() <= 1)
          #    {
          #        revenueSubscription.visible(projProposalRevenueSubscription ? true : false);
          #        element.activateFirstVisibleTab(revenueSubscription);
          #
          #        projProposalRevenueSubscription_EInvoiceAccountCode.visible(CustTable::isCustDKPublic(projProposalJour.InvoiceAccount));
          #
          #        if (projProposalRevenueSubscription && jumpToMain && parmProjTransType == ProjTransType::Revenue && parmIsRevTransOriginSubscription)
          #        {
          #            projProposalRevenueSubscription_ds.findRecord(ProjProposalRevenue::find(parmTransId, projProposalJour.ProposalId));
          #            projProposalRevenueSubscription_TransId.setFocus();
          #        }
          #    }
          #    else
          #    {
          #        revenueSubscription.visible(false);
          #    }
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjRevenueTransSubscription
          Table               #ProjRevenueTrans
          Index               #TransIdx
          AllowCheck          #No
          AllowEdit           #No
          AllowCreate         #No
          JoinSource          #ProjProposalRevenueSubscription
          LinkType            #InnerJoin
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #public void init()
          #{
          #    super();
          #
          #    this.query().dataSourceTable(tableNum(ProjRevenueTrans), 1).addRange(fieldNum(ProjRevenueTrans, TransactionOrigin)).value(queryValue(ProjOrigin::Subscription));
          #
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjProposalEmplDetail
          Table               #ProjProposalEmplDetail
          AllowCheck          #No
          AllowCreate         #No
          JoinSource          #ProjProposalEmpl
          LinkType            #InnerJoin
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #active
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #
          #    if (projProposalEmplDetail_ds.allowEdit())
          #    {
          #        if (projProposalEmplDetail.projEmplTransSale().TransStatus == ProjTransStatus::CreditnoteProposal)
          #        {
          #            projProposalEmplDetail_ds.object(fieldNum(ProjProposalEmplDetail, AmountCur)).allowEdit(false);
          #            projProposalEmplDetail_ds.object(fieldNum(ProjProposalEmplDetail, SalesPrice)).allowEdit(false);
          #        }
          #        else
          #        {
          #            projProposalEmplDetail_ds.object(fieldNum(ProjProposalEmplDetail, AmountCur)).allowEdit(true);
          #            projProposalEmplDetail_ds.object(fieldNum(ProjProposalEmplDetail, SalesPrice)).allowEdit(true);
          #        }
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjProposalCostDetail
          Table               #ProjProposalCostDetail
          AllowCheck          #No
          AllowCreate         #No
          JoinSource          #ProjProposalCost
          LinkType            #InnerJoin
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #active
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #
          #    if (projProposalCostDetail_ds.allowEdit())
          #    {
          #        if (projProposalCostDetail.projCostTransSale().TransStatus == ProjTransStatus::CreditnoteProposal)
          #        {
          #            projProposalCostDetail_ds.object(fieldNum(ProjProposalCostDetail, AmountCur)).allowEdit(false);
          #            projProposalCostDetail_ds.object(fieldNum(ProjProposalCostDetail, SalesPrice)).allowEdit(false);
          #        }
          #        else
          #        {
          #            projProposalCostDetail_ds.object(fieldNum(ProjProposalCostDetail, AmountCur)).allowEdit(true);
          #            projProposalCostDetail_ds.object(fieldNum(ProjProposalCostDetail, SalesPrice)).allowEdit(true);
          #        }
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjProposalItemDetail_Project
          Table               #ProjProposalItemDetail
          AllowCheck          #No
          AllowCreate         #No
          JoinSource          #ProjProposalItem_Project
          LinkType            #InnerJoin
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #active
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #
          #    if (projProposalItemDetail_Project_ds.allowEdit())
          #    {
          #        if (projProposalItemDetail_Project.projItemTransSale().TransStatus == ProjTransStatus::CreditnoteProposal)
          #        {
          #            projProposalItemDetail_Project_ds.object(fieldNum(ProjProposalItemDetail, AmountCur)).allowEdit(false);
          #            projProposalItemDetail_Project_ds.object(fieldNum(ProjProposalItemDetail, SalesPrice)).allowEdit(false);
          #        }
          #        else
          #        {
          #            projProposalItemDetail_Project_ds.object(fieldNum(ProjProposalItemDetail, AmountCur)).allowEdit(true);
          #            projProposalItemDetail_Project_ds.object(fieldNum(ProjProposalItemDetail, SalesPrice)).allowEdit(true);
          #        }
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjProposalRevenueDetail
          Table               #ProjProposalRevenueDetail
          AllowCheck          #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #ProjProposalRevenue
          LinkType            #InnerJoin
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #active
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #
          #    if (projProposalRevenueDetail_ds.allowEdit())
          #    {
          #        if (projProposalRevenueDetail.projRevenueTransSale().TransStatus == ProjTransStatus::CreditnoteProposal)
          #        {
          #            projProposalRevenueDetail_ds.object(fieldNum(ProjProposalRevenueDetail, AmountCur)).allowEdit(false);
          #            projProposalRevenueDetail_ds.object(fieldNum(ProjProposalRevenueDetail, SalesPrice)).allowEdit(false);
          #        }
          #        else
          #        {
          #            projProposalRevenueDetail_ds.object(fieldNum(ProjProposalRevenueDetail, AmountCur)).allowEdit(true);
          #            projProposalRevenueDetail_ds.object(fieldNum(ProjProposalRevenueDetail, SalesPrice)).allowEdit(true);
          #        }
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjProposalOnAccDetail
          Table               #ProjProposalOnAccDetail
          AllowCheck          #No
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #ProjProposalOnAcc
          LinkType            #InnerJoin
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #active
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #
          #    if (projProposalOnAccDetail_ds.allowEdit())
          #    {
          #        if (projProposalOnAccDetail.projOnAccTransSale().TransStatus == ProjTransStatus::CreditnoteProposal)
          #        {
          #            projProposalOnAccDetail_ds.object(fieldNum(ProjProposalOnAccDetail, AmountCur)).allowEdit(false);
          #        }
          #        else
          #        {
          #            projProposalOnAccDetail_ds.object(fieldNum(ProjProposalOnAccDetail, AmountCur)).allowEdit(true);
          #        }
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjProposalRevenueDetailSubscription
          Table               #ProjProposalRevenueDetail
          AllowCheck          #No
          AllowCreate         #No
          JoinSource          #ProjProposalRevenueSubscription
          LinkType            #InnerJoin
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #active
          #public int active()
          #{
          #    int                     ret;
          #    boolean                 isEditable = false;
          #    ProjRevenueTransSale    localProjRevenueTransSale;
          #    ProjRevenueTrans        localProjRevenueTrans;
          #
          #    ret = super();
          #
          #    if (projProposalRevenueDetailSubscription_ds.allowEdit())
          #    {
          #        localProjRevenueTransSale = projProposalRevenueDetailSubscription.projRevenueTransSale();
          #        if (localProjRevenueTransSale.TransStatus == ProjTransStatus::CreditnoteProposal)
          #        {
          #            projProposalRevenueDetailSubscription_ds.object(fieldNum(ProjProposalRevenueDetail, AmountCur)).allowEdit(false);
          #        }
          #        else
          #        {
          #            localProjRevenueTrans = localProjRevenueTransSale.projRevenueTrans();
          #
          #            // Edit SalesPrice if either Index or BasePrice is empty
          #            if (localProjRevenueTrans.smaIndex == 0.00 ||
          #                localProjRevenueTrans.smaBasePrice == 0.00)
          #            {
          #                isEditable = true;
          #            }
          #            projProposalRevenueDetailSubscription_ds.object(fieldNum(ProjProposalRevenueDetail, AmountCur)).allowEdit(isEditable);
          #        }
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjProposalItemDetail_SalesOrder
          Table               #ProjProposalItemDetail
          AllowCheck          #No
          AllowEdit           #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #ProjProposalItem_SalesOrder
          LinkType            #InnerJoin
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #PSAProjProposalProj
          Table               #PSAProjProposalProj
          AllowCheck          #No
          AllowCreate         #No
          AllowDelete         #No
          JoinSource          #ProjProposalJour
          LinkType            #Active
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD ContractLineNum
            PROPERTIES
              AllowEdit           #No
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Invoiced
            PROPERTIES
              AllowEdit           #No
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InvoicedNow
            PROPERTIES
              AllowEdit           #No
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ProjId
            PROPERTIES
              AllowEdit           #No
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #executeQuery
          #public void executeQuery()
          #{
          #    super();
          #}
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #
          #    if (isConfigurationkeyEnabled(configurationKeyNum(Project3)))
          #    {
          #        psaProjProposalProj_RetainedPercent.allowEdit(!(psaProjProposalProj.IsPreBill || (projProposalJour.InvoiceAmount < 0 ? true : false)));
          #        psaProjProposalProj_RetainedNow.allowEdit(!(psaProjProposalProj.IsPreBill || (projProposalJour.InvoiceAmount < 0 ? true : false)));
          #    }
          #
          #    return ret;
          #}
          #
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    super();
          #
          #    if (isConfigurationkeyEnabled(configurationKeyNum(Project3)))
          #    {
          #        this.query().dataSourceTable(tableNum(PSAProjProposalProj)).addSortField(fieldNum(PSAProjProposalProj, IsPreBill), SortOrder::Ascending);
          #    }
          #}
          #
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #ProjPostTransView
          Table               #ProjPostTransView
          JoinSource          #ProjProposalJour
          LinkType            #Active
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #TaxServiceTariffProjProposalEmpl
          Table               #TaxServiceTariff
          OnlyFetchActive     #Yes
          JoinSource          #ProjProposalEmpl
          LinkType            #OuterJoin
          InsertAtEnd         #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #write
          #// <GEEPL>
          #public void write()
          #{
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoPL]) && (!taxServiceTariffProjProposalEmpl.ParentRecId || taxServiceTariffProjProposalEmpl.ParentTableId))
          #    {
          #        // Write can cause the child data source to lose it's foreign key values so restore them.
          #        taxServiceTariffProjProposalEmpl.ParentRecId = projProposalEmpl.RecId;
          #        taxServiceTariffProjProposalEmpl.ParentTableId = projProposalEmpl.TableId;
          #        taxServiceTariffProjProposalEmpl_ds.refresh();
          #    }
          #
          #    super();
          #}
          #// </GEEPL>
          #
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #TaxServiceTariffProjProposalItem
          Table               #TaxServiceTariff
          OnlyFetchActive     #Yes
          JoinSource          #ProjItemTrans_Project
          LinkType            #OuterJoin
          InsertAtEnd         #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #write
          #// <GEEPL>
          #public void write()
          #{
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoPL]) && (!taxServiceTariffProjProposalItem.ParentRecId || !taxServiceTariffProjProposalItem.ParentTableId))
          #    {
          #        // Write can cause the child data source to lose it's foreign key values so restore them.
          #        taxServiceTariffProjProposalItem.ParentRecId = projItemTrans_Project.RecId;
          #        taxServiceTariffProjProposalItem.ParentTableId = projItemTrans_Project.TableId;
          #        taxServiceTariffProjProposalItem_ds.refresh();
          #    }
          #
          #    super();
          #}
          #// </GEEPL>
          #
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #TaxServiceTariffProjProposalOnAcc
          Table               #TaxServiceTariff
          OnlyFetchActive     #Yes
          JoinSource          #ProjProposalOnAcc
          LinkType            #OuterJoin
          InsertAtEnd         #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #write
          #// <GEEPL>
          #public void write()
          #{
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoPL]) && (!taxServiceTariffProjProposalOnAcc.ParentRecId || !taxServiceTariffProjProposalOnAcc.ParentTableId))
          #    {
          #        // Write can cause the child data source to lose it's foreign key values so restore them.
          #        taxServiceTariffProjProposalOnAcc.ParentRecId = projProposalOnAcc.RecId;
          #        taxServiceTariffProjProposalOnAcc.ParentTableId = projProposalOnAcc.TableId;
          #        taxServiceTariffProjProposalOnAcc_ds.refresh();
          #    }
          #
          #    super();
          #}
          #// </GEEPL>
          #
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
  ENDOBJECTBANK
  
  REFERENCEDATASOURCES
  ENDREFERENCEDATASOURCES
  
  JOINS
    ProjProposalEmpl ProjProposalJour
    ProjProposalOnAcc ProjProposalJour
    ProjProposalCost ProjProposalJour
    ProjProposalItem_SalesOrder ProjProposalJour
    ProjProposalRevenue ProjProposalJour
    projEmplTrans ProjProposalEmpl
    projCostTrans ProjProposalCost
    projOnAccTrans ProjProposalOnAcc
    ProjRevenueTrans ProjProposalRevenue
    ProjItemTrans_Project ProjProposalItem_Project
    ProjProposalItem_Project ProjProposalJour
    SalesLine ProjProposalItem_SalesOrder
    ProjProposalRevenueSubscription ProjProposalJour
    ProjRevenueTransSubscription ProjProposalRevenueSubscription
    ProjProposalEmplDetail ProjProposalEmpl
    ProjProposalCostDetail ProjProposalCost
    ProjProposalItemDetail_Project ProjProposalItem_Project
    ProjProposalRevenueDetail ProjProposalRevenue
    ProjProposalOnAccDetail ProjProposalOnAcc
    ProjProposalRevenueDetailSubscription ProjProposalRevenueSubscription
    ProjProposalItemDetail_SalesOrder ProjProposalItem_SalesOrder
    PSAProjProposalProj ProjProposalJour
    ProjPostTransView ProjProposalJour
    TaxServiceTariffProjProposalEmpl ProjProposalEmpl
    TaxServiceTariffProjProposalItem ProjItemTrans_Project
    TaxServiceTariffProjProposalOnAcc ProjProposalOnAcc
  ENDJOINS
  
  PARTREFERENCES
  ENDPARTREFERENCES
  
  DESIGN
    PROPERTIES
      Width               #Column width
      Height              #Column height
      Caption             #@SYS336293
      TitleDatasource     #ProjProposalJour
      DataSource          #ProjProposalJour
      ArrangeWhen         #Auto
      HideIfEmpty         #No
      WorkflowEnabled     #Yes
      WorkflowDatasource  #ProjProposalJour
      WorkflowType        #PSAProjInvoiceProposal
      Style               #DetailsFormTransaction
    ENDPROPERTIES
    
    CONTAINER
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #ActionPane
          ElementPosition     #1610612733
          HierarchyParent     #GroupLineTab
          Style               #Strip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #ActionPaneHeader
          AutoDeclaration     #Yes
          ElementPosition     #715827882
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #CostActionStrip
          ElementPosition     #1073741822
          HierarchyParent     #Cost
          Style               #Strip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #EmplActionStrip
          ElementPosition     #1073741822
          HierarchyParent     #Empl
          Style               #Strip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #ItemProjectActionStrip
          ElementPosition     #1073741822
          HierarchyParent     #ItemProject
          Style               #Strip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #ItemSalesLineActionStrip
          ElementPosition     #1073741822
          HierarchyParent     #ItemSalesLine
          Style               #Strip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #OnAccActionStrip
          ElementPosition     #1073741822
          HierarchyParent     #OnAcc
          Style               #Strip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #RevenueActionStrip
          ElementPosition     #1073741822
          HierarchyParent     #Revenue
          Style               #Strip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #RevenueSubscriptionActionStrip
          ElementPosition     #1073741822
          HierarchyParent     #RevenueSubscription
          Style               #Strip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #ActionPaneTab
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #ActionPaneHeader
          Caption             #@GLS360107
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #ActionPaneTabLine
          ElementPosition     #1431655764
          HierarchyParent     #ActionPane
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #CostActionTab
          ElementPosition     #1431655764
          HierarchyParent     #CostActionStrip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #EmplActionTab
          ElementPosition     #1431655764
          HierarchyParent     #EmplActionStrip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #ItemActionTab
          ElementPosition     #1431655764
          HierarchyParent     #ItemProjectActionStrip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #Manage
          ElementPosition     #1789569705
          HierarchyParent     #ActionPaneHeader
          Caption             #@SYS115306
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #OnAccActionTab
          ElementPosition     #1431655764
          HierarchyParent     #OnAccActionStrip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #RevenueActionTab
          ElementPosition     #1431655764
          HierarchyParent     #RevenueActionStrip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #SalesLineActionTab
          ElementPosition     #1431655764
          HierarchyParent     #ItemSalesLineActionStrip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #SubscriptionActionTab
          ElementPosition     #1431655764
          HierarchyParent     #RevenueSubscriptionActionStrip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #AttachmentsButtonGroup
          ElementPosition     #1717986912
          HierarchyParent     #ActionPaneTab
          Caption             #@SYS316708
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroup
          ElementPosition     #1431655764
          HierarchyParent     #ActionPaneTabLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupCost
          ElementPosition     #1193046470
          HierarchyParent     #CostActionTab
          DataSource          #ProjProposalCost
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupDetails
          ElementPosition     #1073741820
          HierarchyParent     #ActionPaneTab
          Caption             #@GLS360135
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupEmpl
          ElementPosition     #1193046470
          HierarchyParent     #EmplActionTab
          DataSource          #ProjProposalEmpl
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupItem
          ElementPosition     #1193046470
          HierarchyParent     #ItemActionTab
          DataSource          #ProjProposalItem_Project
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupMaintain
          ElementPosition     #429496728
          HierarchyParent     #ActionPaneTab
          Caption             #@SYS316703
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupNew
          ElementPosition     #644245092
          HierarchyParent     #ActionPaneTab
          Caption             #@SYS2055
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupOnAccount
          ElementPosition     #1431655764
          HierarchyParent     #OnAccActionTab
          DataSource          #ProjProposalOnAcc
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupPost
          AutoDeclaration     #Yes
          ElementPosition     #858993456
          HierarchyParent     #ActionPaneTab
          Caption             #@SYS4000801
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupPrint
          ElementPosition     #1288490184
          HierarchyParent     #ActionPaneTab
          Caption             #@GLS360118
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupRevenue
          ElementPosition     #1193046470
          HierarchyParent     #RevenueActionTab
          DataSource          #ProjProposalRevenue
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupSalesLine
          ElementPosition     #1193046470
          HierarchyParent     #SalesLineActionTab
          DataSource          #ProjProposalItem_SalesOrder
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupSetup
          ElementPosition     #1932735276
          HierarchyParent     #ActionPaneTab
          Caption             #@SYS342635
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ButtonGroupSubscription
          ElementPosition     #1193046470
          HierarchyParent     #SubscriptionActionTab
          DataSource          #ProjProposalRevenueSubscription
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #CostButtonGroup
          CountryRegionCodes  #IN
          ElementPosition     #1789569705
          HierarchyParent     #CostActionTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #EmplSalesTax
          AutoDeclaration     #Yes
          CountryRegionCodes  #IN
          ElementPosition     #1789569705
          HierarchyParent     #EmplActionTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ItemButtonGroup
          CountryRegionCodes  #IN
          ElementPosition     #1789569705
          HierarchyParent     #ItemActionTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ListButtonGroup
          DisplayTarget       #Client
          ElementPosition     #1503238548
          HierarchyParent     #ActionPaneTab
          Caption             #@SYS118440
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ManageCreditCard
          ElementPosition     #1431655764
          HierarchyParent     #Manage
          Caption             #@ACC1423
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #OnAcctButtonGroup
          CountryRegionCodes  #IN
          ElementPosition     #1789569705
          HierarchyParent     #OnAccActionTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #RevenueButtonGroup
          CountryRegionCodes  #IN
          ElementPosition     #1789569705
          HierarchyParent     #RevenueActionTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #RevenueSubscriptionButtonGroup
          CountryRegionCodes  #IN
          ElementPosition     #1789569705
          HierarchyParent     #SubscriptionActionTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #SalesLineButtonGroup
          CountryRegionCodes  #IN
          ElementPosition     #1789569705
          HierarchyParent     #SalesLineActionTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #CostGrid
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612733
          HierarchyParent     #Cost
          VisibleRows         #10
          DataSource          #ProjProposalCost
          DefaultAction       #ButtonOpenTransactionCost
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #EmplGrid
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612733
          HierarchyParent     #Empl
          VisibleRows         #10
          DataSource          #ProjProposalEmpl
          DefaultAction       #ButtonOpenTransactionEmpl
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #Grid
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #TabPageGrid
          DataSource          #ProjProposalJour
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #ItemProjectGrid
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612733
          HierarchyParent     #ItemProject
          VisibleRows         #10
          DataSource          #ProjProposalItem_Project
          DefaultAction       #ButtonOpenTransactionItem
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #ItemSalesLineGrid
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612733
          HierarchyParent     #ItemSalesLine
          VisibleRows         #10
          DataSource          #ProjProposalItem_SalesOrder
          DefaultAction       #ButtonOpenTransactionSalesLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #OnAccGrid
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612733
          HierarchyParent     #OnAcc
          VisibleRows         #10
          DataSource          #ProjProposalOnAcc
          DefaultAction       #ButtonOpenTransactionOnAccount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #RevenueGrid
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612734
          HierarchyParent     #Revenue
          VisibleRows         #10
          DataSource          #ProjProposalRevenue
          DefaultAction       #ButtonOpenTransactionRevenue
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #RevenueSubscriptiongrid
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612733
          HierarchyParent     #RevenueSubscription
          VisibleRows         #10
          DataSource          #ProjProposalRevenueSubscription
          DefaultAction       #ButtonOpenTransactionSubscription
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #SummaryGrid
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #TabPageHeaderMiddle
          VisibleRows         #4
          DataSource          #PSAProjProposalProj
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #BillOfLading
          ElementPosition     #858993458
          HierarchyParent     #GroupFiscalInfo
          DataSource          #ProjProposalJour
          DataGroup           #BillOfLading
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ContractGroup
          ElementPosition     #1543503867
          HierarchyParent     #GroupHeader
          Caption             #@SYS54592
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Format_MY
          ElementPosition     #1879048189
          HierarchyParent     #Printing
          FrameType           #None
          DataSource          #ProjProposalJour
          DataGroup           #GSTInvoice_MY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #General
          ElementPosition     #1029002578
          HierarchyParent     #GroupHeader
          Caption             #@SYS2952
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GridReason
          ElementPosition     #2045222520
          HierarchyParent     #Grid
          DataSource          #ProjProposalJour
          DataGroup           #Reason
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupFiscalInfo
          CountryRegionCodes  #BR
          ElementPosition     #1610612733
          HierarchyParent     #TabPageHeaderTop
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupHeader
          ElementPosition     #1073741822
          HierarchyParent     #TabPageHeaderTop
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #GroupLineTab
          AutoDeclaration     #Yes
          Visible             #No
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #TabPageLine
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeaderInfo
          ElementPosition     #1073741822
          HierarchyParent     #TabPageDetails
          Style               #DetailTitleContainer
          DataSource          #ProjProposalJour
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Printing
          ElementPosition     #2102744402
          HierarchyParent     #GroupHeader
          Caption             #@SYS313270
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Reason
          CountryRegionCodes  #CZ,EE,HU,PL,LT,LV
          ElementPosition     #2058005158
          HierarchyParent     #GroupHeader
          DataSource          #ProjProposalJour
          DataGroup           #Reason
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ShipmentInformation
          ElementPosition     #1717986916
          HierarchyParent     #GroupFiscalInfo
          DataSource          #ProjProposalJour
          DataGroup           #ShipmentInformation
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #VehicleInformation_BR
          ElementPosition     #1288490187
          HierarchyParent     #GroupFiscalInfo
          DataSource          #ProjProposalJour
          DataGroup           #VehicleInformation_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #CtrlCourse
          AutoDeclaration     #Yes
          Enabled             #No
          HelpText            #@SYS76307
          ElementPosition     #1670265058
          HierarchyParent     #ButtonGroupDetails
          Text                #@SYS16449
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #FundingSource
          AllowEdit           #No
          ConfigurationKey    #ProjAdvFunding
          ElementPosition     #1717986916
          HierarchyParent     #ContractGroup
          DataSource          #ProjProposalJour
          ReferenceField      #FundingSource
          ReplacementFieldGroup #FundingSourceName
          Label               #@GLS360119
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #GridFundingSource
          AllowEdit           #No
          ConfigurationKey    #ProjAdvFunding
          ElementPosition     #1533916890
          HierarchyParent     #Grid
          DataSource          #ProjProposalJour
          ReferenceField      #FundingSource
          ReplacementFieldGroup #FundingSourceName
          Label               #@GLS360119
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #projCostTrans_Worker
          ElementPosition     #920350134
          HierarchyParent     #CostGrid
          DataSource          #projCostTrans
          ReferenceField      #Worker
          Label               #@SYS89158
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #projCostTrans_WorkerAffiliation
          Visible             #No
          ElementPosition     #1073741823
          HierarchyParent     #CostGrid
          DataSource          #projCostTrans
          ReferenceField      #WorkerLegalEntity
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #projEmplTrans_Worker
          ElementPosition     #858993456
          HierarchyParent     #EmplGrid
          DataSource          #projEmplTrans
          ReferenceField      #Worker
          Label               #@SYS89158
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #ProjRevenueTrans_Worker
          ElementPosition     #1073741820
          HierarchyParent     #RevenueGrid
          DataSource          #ProjRevenueTrans
          ReferenceField      #Worker
          Label               #@SYS89158
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #Tab
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          ShowTabs            #No
        ENDPROPERTIES
        
        METHODS
          SOURCE #tabChanged
            #public void tabChanged(int _fromTab, int _toTab)
            #{
            #    super(_fromTab, _toTab);
            #
            #    if (isConfigurationkeyEnabled(configurationKeyNum(Project3)))
            #    {
            #        psaIndirectComponents.enabled(projEmplTrans.psaIndirectComponentGroup ? true : false);
            #    }
            #
            #
            #    actionPaneHeader.lock();
            #
            #    if (tabPageGrid.isActivePage())
            #    {
            #        calledForEditInGrid = true;
            #    }
            #    else
            #    {
            #        //If the form is already opened for grid mode then we need to call the active method of the datasource in order show the details
            #        if (calledForEditInGrid)
            #        {
            #            calledForEditInGrid = false;
            #            projProposalJour_ds.active();
            #        }
            #    }
            #
            #    // Buttons to show in Grid View
            #    editInvoiceProposal.visible(calledForEditInGrid);
            #
            #    // Buttons to show in Details View
            #    buttonEdit.visible(!calledForEditInGrid);
            #
            #    actionPaneHeader.unLock(true);
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #TabDetails
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612733
          HierarchyParent     #TabPageDetails
          ShowTabs            #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #TabHeader
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #TabPageHeader
          Style               #FastTabs
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #TabLines
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1879048189
          HierarchyParent     #GroupLineTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #Cost
          AutoDeclaration     #Yes
          Visible             #No
          Width               #Column width
          Height              #Column height
          ElementPosition     #715827882
          HierarchyParent     #TabLines
          Caption             #@SYP4882014
          DataSource          #ProjProposalCost
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #Empl
          AutoDeclaration     #Yes
          Visible             #No
          Width               #Column width
          Height              #Column height
          ElementPosition     #477218588
          HierarchyParent     #TabLines
          Caption             #@SYS5269
          DataSource          #ProjProposalEmpl
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #ItemProject
          AutoDeclaration     #Yes
          Visible             #No
          Width               #Column width
          Height              #Column height
          ElementPosition     #954437176
          HierarchyParent     #TabLines
          Caption             #@SYS7407
          DataSource          #ProjProposalItem_Project
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #ItemSalesLine
          AutoDeclaration     #Yes
          Visible             #No
          Width               #Column width
          Height              #Column height
          ElementPosition     #1908874352
          HierarchyParent     #TabLines
          Caption             #@SYS58747
          DataSource          #ProjProposalItem_SalesOrder
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #OnAcc
          AutoDeclaration     #Yes
          Visible             #No
          Width               #Column width
          Height              #Column height
          ElementPosition     #1670265058
          HierarchyParent     #TabLines
          Caption             #@SYS50040
          DataSource          #ProjProposalOnAcc
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #Revenue
          AutoDeclaration     #Yes
          Visible             #No
          Width               #Column width
          Height              #Column height
          ElementPosition     #1193046470
          HierarchyParent     #TabLines
          Caption             #@SYS9154
          DataSource          #ProjProposalRevenue
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #RevenueSubscription
          AutoDeclaration     #Yes
          Visible             #No
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #TabLines
          Caption             #@SYS14482
          DataSource          #ProjProposalRevenueSubscription
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageDetails
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1073741822
          HierarchyParent     #Tab
          BackgroundColor     #Dyn Background blue
          TopMargin           #0
          BottomMargin        #0
          LeftMargin          #0
          RightMargin         #0
          FastTabExpanded     #No
          Style               #DetailsFormDetails
          PanelStyle          #Details
        ENDPROPERTIES
        
        METHODS
          SOURCE #pageActivated
            #public void pageActivated()
            #{
            #    FormTabPageControl firstTransTabPage;
            #
            #    super();
            #
            #    // If the form is in details mode the current transaction tab will appear blank.
            #    // By selecting the first control of the first tab the content should appear.
            #    if (tabLines.tab() > 0)
            #    {
            #        firstTransTabPage = tabLines.controlNum(tabLines.tab());
            #        if (firstTransTabPage && firstTransTabPage.controlCount() > 0)
            #        {
            #            firstTransTabPage.controlNum(1).setFocus();
            #        }
            #    }
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageGrid
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612733
          HierarchyParent     #Tab
          BackgroundColor     #Dyn Background blue
          Caption             #Invoice proposal transactions
          TopMargin           #0
          BottomMargin        #0
          LeftMargin          #0
          RightMargin         #0
          ViewEditMode        #Edit
          FastTabExpanded     #Yes
          Style               #DetailsFormGrid
          PanelStyle          #Grid
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageHeader
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #TabDetails
          DataSource          #ProjProposalJour
          LeftMargin          #0
          RightMargin         #0
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageHeaderMiddle
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1288490187
          HierarchyParent     #TabHeader
          BackgroundColor     #Window background
          Caption             #@GLS360129
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageHeaderTop
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #858993458
          HierarchyParent     #TabHeader
          BackgroundColor     #Window background
          Caption             #@GLS360130
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageLine
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1717986916
          HierarchyParent     #TabHeader
          BackgroundColor     #Window background
          Caption             #@SYS4000802
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonOpenTransactionCost
          HelpText            #@SYS4110541
          DisplayTarget       #Client
          ElementPosition     #1610612734
          HierarchyParent     #ButtonGroupCost
          Text                #@GLS360134
          NormalImage         #11133
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    Args            args = new Args();
            #    MenuFunction    menuFunction;
            #
            #    super();
            #
            #    args.parmEnumType(enumNum(FormOpenMode));
            #    args.parmEnum(FormOpenMode::ForEdit);
            #    args.record(projCostTrans);
            #
            #    args.copyCallerQuery(CopyCallerQuery::No);
            #
            #    menuFunction = new MenuFunction(menuitemDisplayStr(ProjTransCost), MenuItemType::Display);
            #    menuFunction.run(args);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonOpenTransactionEmpl
          HelpText            #@SYS4110541
          DisplayTarget       #Client
          ElementPosition     #1288490187
          HierarchyParent     #ButtonGroupEmpl
          Text                #@GLS360134
          NormalImage         #11133
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    Args            args = new Args();
            #    MenuFunction    menuFunction;
            #
            #    super();
            #
            #    args.parmEnumType(enumNum(FormOpenMode));
            #    args.parmEnum(FormOpenMode::ForEdit);
            #    args.record(projEmplTrans);
            #
            #    args.copyCallerQuery(CopyCallerQuery::No);
            #
            #    menuFunction = new MenuFunction(menuitemDisplayStr(ProjTransEmpl), MenuItemType::Display);
            #    menuFunction.run(args);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonOpenTransactionItem
          HelpText            #@SYS4110541
          DisplayTarget       #Client
          ElementPosition     #1610612734
          HierarchyParent     #ButtonGroupItem
          Text                #@GLS360134
          NormalImage         #11133
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    Args            args = new Args();
            #    MenuFunction    menuFunction;
            #
            #    super();
            #
            #    args.parmEnumType(enumNum(FormOpenMode));
            #    args.parmEnum(FormOpenMode::ForEdit);
            #    args.record(projItemTrans_Project);
            #
            #    args.copyCallerQuery(CopyCallerQuery::No);
            #
            #    menuFunction = new MenuFunction(menuitemDisplayStr(ProjTransItem), MenuItemType::Display);
            #    menuFunction.run(args);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonOpenTransactionOnAccount
          HelpText            #@SYS4110541
          DisplayTarget       #Client
          ElementPosition     #1431655763
          HierarchyParent     #ButtonGroupOnAccount
          Text                #@GLS360134
          NormalImage         #11133
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    Args            args = new Args();
            #    MenuFunction    menuFunction;
            #
            #    super();
            #
            #    args.parmEnumType(enumNum(FormOpenMode));
            #    args.parmEnum(FormOpenMode::ForEdit);
            #    args.record(projOnAccTrans);
            #
            #    args.copyCallerQuery(CopyCallerQuery::No);
            #
            #    menuFunction = new MenuFunction(menuitemDisplayStr(ProjTransOnAccView), MenuItemType::Display);
            #    menuFunction.run(args);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonOpenTransactionRevenue
          HelpText            #@SYS4110541
          DisplayTarget       #Client
          ElementPosition     #1610612734
          HierarchyParent     #ButtonGroupRevenue
          Text                #@GLS360134
          NormalImage         #11133
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    Args            args = new Args();
            #    MenuFunction    menuFunction;
            #
            #    super();
            #
            #    args.parmEnumType(enumNum(FormOpenMode));
            #    args.parmEnum(FormOpenMode::ForEdit);
            #    args.record(projRevenueTrans);
            #
            #    args.copyCallerQuery(CopyCallerQuery::No);
            #
            #    menuFunction = new MenuFunction(menuitemDisplayStr(ProjTransRevenue), MenuItemType::Display);
            #    menuFunction.run(args);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonOpenTransactionSalesLine
          HelpText            #@SYS4110541
          DisplayTarget       #Client
          ElementPosition     #1431655763
          HierarchyParent     #ButtonGroupSalesLine
          Text                #@GLS360134
          NormalImage         #11133
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    Args            args = new Args();
            #    MenuFunction    menuFunction;
            #
            #    super();
            #
            #    args.record(SalesTable::find(projProposalItem_SalesOrder.SalesId));
            #
            #    menuFunction = new MenuFunction(menuitemDisplayStr(SalesTable), MenuItemType::Display);
            #
            #    menuFunction.run(args);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonOpenTransactionSubscription
          HelpText            #@SYS4110541
          DisplayTarget       #Client
          ElementPosition     #1431655763
          HierarchyParent     #ButtonGroupSubscription
          Text                #@GLS360134
          NormalImage         #11133
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    Args            args = new Args();
            #    MenuFunction    menuFunction;
            #
            #    super();
            #
            #    args.parmEnumType(enumNum(FormOpenMode));
            #    args.parmEnum(FormOpenMode::ForEdit);
            #    args.record(projRevenueTransSubscription);
            #
            #    args.copyCallerQuery(CopyCallerQuery::No);
            #
            #    menuFunction = new MenuFunction(menuitemDisplayStr(ProjTransRevenueSubscription), MenuItemType::Display);
            #    menuFunction.run(args);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #CtrlCancel
          AutoDeclaration     #Yes
          Enabled             #No
          HelpText            #@SYS50085
          ElementPosition     #1789569705
          HierarchyParent     #ButtonGroupMaintain
          Text                #@SYS14425
          ButtonDisplay       #Text & Image left
          NormalImage         #10121
          ImageLocation       #EmbeddedResource
          MultiSelect         #Yes
          Primary             #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    Args               args = new Args();
            #
            #    if (!projProposalJour.ProposalId)
            #    {
            #        return;
            #    }
            #
            #    super();
            #
            #    args.caller(this);
            #    args.record(projProposalJour);
            #
            #    if (ProjInvoiceCancel::main(args))
            #    {
            #        projProposalJour_ds.reread();
            #
            #        projProposalJour_ds.refreshEx();
            #
            #        element.setButtonAccess();
            #
            #        element.updateRelatedForm();
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #PrintMgmt
          NeededPermission    #Update
          HelpText            #@SYS69373
          ConfigurationKey    #LogisticsBasic
          SecurityKey         #CustMisc
          DisplayTarget       #Client
          ElementPosition     #1431655764
          HierarchyParent     #ButtonGroupSetup
          Text                #@SYS114627
          NormalImage         #10698
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    PrintMgmtSetupContext setupContext = new PrintMgmtSetupContext();
            #    ProjFundingSource     fundingSource = ProjFundingSource::find(projProposalJour.FundingSource);
            #
            #    super();
            #
            #    if (isConfigurationkeyEnabled(configurationKeyNum(Project3)))
            #    {
            #        setupContext.addHierarchyContext(PrintMgmtHierarchyType::Project, PrintMgmtNodeType::ProjProposalJour);
            #        setupContext.parmCaller(element);
            #        setupContext.parmReferencedTableBuffer(projProposalJour_ds.cursor());
            #    }
            #    else
            #    {
            #        setupContext.addHierarchyContext(PrintMgmtHierarchyType::Project, PrintMgmtNodeType::ProjInvoiceTable);
            #        setupContext.parmCaller(element);
            #        setupContext.parmReferencedTableBuffer(ProjInvoiceTable::find(projProposalJour.ProjInvoiceProjId));
            #    }
            #
            #    setupContext.parmCountryRegionId(LogisticsPostalAddress::findByLocation(fundingSource.InvoiceLocation).CountryRegionId);
            #    PrintMgmt::launchSetup(setupContext);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #CloseLine
          HelpText            #@SYS26414
          ElementPosition     #1431655760
          HierarchyParent     #ItemSalesLineGrid
          BackgroundColor     #Window background
          Label               #@SYS18742
          DataSource          #ProjProposalItem_SalesOrder
          DataMethod          #CloseLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #ProjProposalJour_InvoiceAutoNumbering_LT
          ElementPosition     #1342177275
          HierarchyParent     #General
          BackgroundColor     #Window background
          DataSource          #ProjProposalJour
          DataField           #InvoiceAutoNumbering_LT
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #GridProjProposalJour_InvoiceFormats
          AutoDeclaration     #Yes
          Width               #180
          ConfigurationKey    #Project3
          ElementPosition     #1704352100
          HierarchyParent     #Grid
          DataSource          #ProjProposalJour
          DataMethod          #editInvoiceFormat
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #ProjProposalJour_InvoiceFormats
          AutoDeclaration     #Yes
          Width               #180
          ConfigurationKey    #Project3
          ElementPosition     #1073741822
          HierarchyParent     #Printing
          DataSource          #ProjProposalJour
          DataMethod          #editInvoiceFormat
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #ProjProposalJour_LineProperty
          Left                #Right edge
          Skip                #Yes
          ElementPosition     #1700091218
          HierarchyParent     #HeaderInfo
          ShowLabel           #No
          DataSource          #ProjProposalJour
          DataField           #LineProperty
          ViewEditMode        #View
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #ProjProposalJour_LinePropertyGrid
          ElementPosition     #1874787310
          HierarchyParent     #Grid
          DataSource          #ProjProposalJour
          DataField           #LineProperty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #AttachmentsButton
          HelpText            #@SYS319846
          DisplayTarget       #Client
          ElementPosition     #1431655764
          HierarchyParent     #AttachmentsButtonGroup
          Text                #@SYS316708
          ButtonDisplay       #Text & Image above
          NormalImage         #10442
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          NeedsRecord         #Yes
          Command             #2853
          ToggleButton        #Check
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #buttonCostRemove
          HelpText            #@SYS328874
          ElementPosition     #1073741822
          HierarchyParent     #ButtonGroupCost
          Text                #@SYS135131
          ButtonDisplay       #Text & Image left
          NormalImage         #11400
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          SaveRecord          #No
          MultiSelect         #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #ButtonEdit
          AutoDeclaration     #Yes
          HelpText            #@GLS360124
          ElementPosition     #1073741823
          HierarchyParent     #ButtonGroupMaintain
          Text                #@GLS360125
          ButtonDisplay       #Text & Image above
          NormalImage         #10040
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #No
          Big                 #Yes
          Primary             #Yes
          KeyTip              #Edit the selected invoice proposal
          NeedsRecord         #Yes
          Command             #4471
          ToggleButton        #Check
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #buttonEmplRemove
          HelpText            #@SYS328874
          ElementPosition     #858993458
          HierarchyParent     #ButtonGroupEmpl
          Text                #@SYS135131
          ButtonDisplay       #Text & Image left
          NormalImage         #11400
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          SaveRecord          #No
          MultiSelect         #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #ButtonItemRemove
          HelpText            #@SYS328874
          ElementPosition     #1073741822
          HierarchyParent     #ButtonGroupItem
          Text                #@SYS135131
          ButtonDisplay       #Text & Image left
          NormalImage         #11400
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          SaveRecord          #No
          MultiSelect         #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #buttonOnAccRemove
          HelpText            #@SYS328874
          ElementPosition     #715827880
          HierarchyParent     #ButtonGroupOnAccount
          Text                #@SYS135131
          ButtonDisplay       #Text & Image left
          NormalImage         #11400
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          SaveRecord          #No
          MultiSelect         #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #buttonRevenueRemove
          HelpText            #@SYS328874
          ElementPosition     #1073741822
          HierarchyParent     #ButtonGroupRevenue
          Text                #@SYS135131
          ButtonDisplay       #Text & Image left
          NormalImage         #11400
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          SaveRecord          #No
          MultiSelect         #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #buttonSalesLineRemove
          HelpText            #@SYS328874
          ElementPosition     #715827880
          HierarchyParent     #ButtonGroupSalesLine
          Text                #@SYS135131
          ButtonDisplay       #Text & Image left
          NormalImage         #11400
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          SaveRecord          #No
          MultiSelect         #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #buttonSubscriptionRemove
          HelpText            #@SYS328874
          ElementPosition     #715827880
          HierarchyParent     #ButtonGroupSubscription
          Text                #@SYS135131
          ButtonDisplay       #Text & Image left
          NormalImage         #11400
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          SaveRecord          #No
          MultiSelect         #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #CtrlApprove
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@SYS16449
          ElementPosition     #1073741822
          HierarchyParent     #CtrlCourse
          Text                #@SYS16449
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #
            #    projProposalJour.approveProposale();
            #
            #    projProposalJour_ds.reread();
            #
            #    projProposalJour_ds.refreshEx();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #CtrlCancelApprove
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@SYS50162
          ElementPosition     #1610612733
          HierarchyParent     #CtrlCourse
          Text                #@SYS50162
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #
            #    projProposalJour.cancelApprovel();
            #
            #    projProposalJour_ds.reread();
            #
            #    projProposalJour_ds.refreshEx();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #DNButtonEdit
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@GLS510071
          ElementPosition     #1431655764
          HierarchyParent     #ButtonGroupMaintain
          Text                #@GLS360125
          ButtonDisplay       #Text & Image above
          NormalImage         #10040
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          KeyTip              #Edit the selected debit note proposal
          NeedsRecord         #Yes
          Command             #4471
          ToggleButton        #Check
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #ExportToExcelButton
          ElementPosition     #1431655764
          HierarchyParent     #ListButtonGroup
          ButtonDisplay       #Text & Image above
          NormalImage         #10156
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #Yes
          Big                 #Yes
          Command             #4436
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #GridProjectInvoiceProposalJour_InvoiceDate
          AllowEdit           #No
          ElementPosition     #920350134
          HierarchyParent     #Grid
          Label               #@SYS57610
          DataSource          #ProjProposalJour
          DataField           #InvoiceDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #ProjectInvoiceProposalJour_InvoiceDate
          AutoDeclaration     #Yes
          ElementPosition     #805306365
          HierarchyParent     #General
          Label               #@SYS57610
          DataSource          #ProjProposalJour
          DataField           #InvoiceDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #ProjItemProject_TransDate
          ElementPosition     #330382098
          HierarchyParent     #ItemProjectGrid
          DataSource          #ProjItemTrans_Project
          DataField           #TransDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #ProjRevenueTransSubscription_SMAEnddate
          ElementPosition     #1380525201
          HierarchyParent     #RevenueSubscriptiongrid
          DataSource          #ProjRevenueTransSubscription
          DataField           #SMAEnddate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #ProjRevenueTransSubscription_SMAStartdate
          ElementPosition     #1227133512
          HierarchyParent     #RevenueSubscriptiongrid
          DataSource          #ProjRevenueTransSubscription
          DataField           #SMAStartDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #SMATransDate
          ElementPosition     #306783378
          HierarchyParent     #RevenueSubscriptiongrid
          Label               #@SYS54242
          DataSource          #ProjRevenueTransSubscription
          DataField           #TransDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #TransDate
          ElementPosition     #286331152
          HierarchyParent     #EmplGrid
          Label               #@SYS54242
          DataSource          #projEmplTrans
          DataField           #TransDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #TransDate1
          ElementPosition     #306783378
          HierarchyParent     #CostGrid
          Label               #@SYS54242
          DataSource          #projCostTrans
          DataField           #TransDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #TransDate2
          ElementPosition     #429496728
          HierarchyParent     #RevenueGrid
          Label               #@SYS54242
          DataSource          #ProjRevenueTrans
          DataField           #TransDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #TransDate3
          ElementPosition     #536870910
          HierarchyParent     #OnAccGrid
          DataSource          #projOnAccTrans
          DataField           #TransDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DROPDIALOGBUTTON
        PROPERTIES
          Name                #ProjAdjustmentCost
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@SYS4001491
          ElementPosition     #1879048190
          HierarchyParent     #ButtonGroupCost
          DataSource          #ProjProposalCostDetail
          MenuItemName        #ProjAdjustmentDropMenu
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DROPDIALOGBUTTON
        PROPERTIES
          Name                #ProjAdjustmentEmpl
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@SYS4001491
          ElementPosition     #1932735281
          HierarchyParent     #ButtonGroupEmpl
          DataSource          #ProjProposalEmplDetail
          MenuItemName        #ProjAdjustmentDropMenu
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DROPDIALOGBUTTON
        PROPERTIES
          Name                #ProjAdjustmentItemProject
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@SYS4001491
          ElementPosition     #1879048190
          HierarchyParent     #ButtonGroupItem
          DataSource          #ProjProposalItemDetail_Project
          MenuItemName        #ProjAdjustmentDropMenu
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DROPDIALOGBUTTON
        PROPERTIES
          Name                #ProjAdjustmentRevenue
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@SYS4001491
          ElementPosition     #1879048190
          HierarchyParent     #ButtonGroupRevenue
          DataSource          #ProjProposalRevenueDetail
          MenuItemName        #ProjAdjustmentDropMenu
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DROPDIALOGBUTTON
        PROPERTIES
          Name                #ProjAdjustmentSalesLine
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@SYS4001491
          ElementPosition     #1789569704
          HierarchyParent     #ButtonGroupSalesLine
          DataSource          #ProjProposalItemDetail_SalesOrder
          MenuItemName        #ProjAdjustmentDropMenu
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DROPDIALOGBUTTON
        PROPERTIES
          Name                #ProjAdjustmentSubscription
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@SYS4001491
          ElementPosition     #1789569704
          HierarchyParent     #ButtonGroupSubscription
          DataSource          #ProjProposalRevenueDetailSubscription
          MenuItemName        #ProjAdjustmentDropMenu
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DROPDIALOGBUTTON
        PROPERTIES
          Name                #PSAProjProposalAddFees
          AutoDeclaration     #Yes
          HelpText            #@SYS117420
          ElementPosition     #1932735281
          HierarchyParent     #ButtonGroup
          ButtonDisplay       #Text & Image left
          NormalImage         #12489
          ImageLocation       #AOTResource
          DataSource          #ProjProposalJour
          MenuItemName        #ProjInvoiceProposalAddFeeDialog
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonWithholdTax_IN
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #RevenueButtonGroup
          Text                #@SYS33817
          MenuItemName        #TaxWithholdTmpWorkTrans_IN
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #// <GIN>
            #void clicked()
            #{
            #    if (TaxWithholdParameters_IN::checkTaxParameters())
            #    {
            #        ProjProposalTotals::showWithholdTaxLine_IN(projProposalJour, projProposalRevenue, element);
            #    }
            #}
            #// </GIN>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CostExciseRegister_IN
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #CostButtonGroup
          Text                #@GLS5618
          DataSource          #projCostTrans
          MenuItemName        #ExciseRegisterBalance_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CreditCardTrans
          ElementPosition     #1610612733
          HierarchyParent     #ManageCreditCard
          Text                #@SYS1084
          DataSource          #ProjProposalJour
          MenuItemName        #CreditCardTRans
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CtrlPaymentSchedule
          AutoDeclaration     #Yes
          Enabled             #No
          HelpText            #@SYS89895
          ElementPosition     #1193046470
          HierarchyParent     #ButtonGroupDetails
          ButtonDisplay       #Image only
          NormalImage         #10673
          ImageLocation       #EmbeddedResource
          Primary             #Yes
          DataSource          #ProjProposalJour
          MenuItemName        #CustPaymScheduleProjInvoiceProposal
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    CustVendPaymSched   custVendPaymSched;
            #
            #    if (projProposalJour.PaymentSched && !CustPaymSched::exist(projProposalJour.TableId,projProposalJour.RecId))
            #    {
            #        custVendPaymSched = CustVendPaymSched::construct(SysModule::Project, projProposalJour);
            #        custVendPaymSched.copyPaymSched(PaymSched::find(projProposalJour.PaymentSched));
            #        projProposalJour.createPaymentSched();
            #    }
            #
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CtrlTotals
          AutoDeclaration     #Yes
          Enabled             #No
          ElementPosition     #1431655764
          HierarchyParent     #ButtonGroupDetails
          ButtonDisplay       #Image only
          NormalImage         #10832
          ImageLocation       #EmbeddedResource
          DataSource          #ProjProposalJour
          MenuItemName        #ProjInvoiceTotals
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #DebitNoteDetails_BR
          AutoDeclaration     #Yes
          Visible             #No
          CountryRegionCodes  #BR
          HelpText            #@GLS3800158
          ElementPosition     #1288490187
          HierarchyParent     #ButtonGroupPrint
          Text                #@GLS3800157
          ButtonDisplay       #Text & Image above
          NormalImage         #10671
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          KeyTip              #Set up the format for printed debit note proposal
          NeedsRecord         #Yes
          DataSource          #ProjProposalJour
          MenuItemName        #PSAProjInvoiceDetails
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #DNProjFormLetter_Invoice_BR
          AutoDeclaration     #Yes
          Visible             #No
          CountryRegionCodes  #BR
          HelpText            #@GLS510069
          ElementPosition     #1610612733
          HierarchyParent     #ButtonGroupPost
          Text                #@SYS4000803
          ButtonDisplay       #Text & Image below
          NormalImage         #10285
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          KeyTip              #Post the selected debit note
          NeedsRecord         #Yes
          MenuItemType        #Action
          MenuItemName        #ProjFormLetter_Invoice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #DNTaxTmpWorkProjectInvoiceProposal
          AutoDeclaration     #Yes
          Visible             #No
          CountryRegionCodes  #BR
          HelpText            #@GLS3800167
          DisplayTarget       #Client
          ElementPosition     #715827882
          HierarchyParent     #ButtonGroupDetails
          ButtonDisplay       #Image only
          NormalImage         #10777
          ImageLocation       #EmbeddedResource
          NeedsRecord         #Yes
          DataSource          #ProjProposalJour
          MenuItemName        #TaxTmpWorkProjectInvoiceProposal
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    Object                  tmpTaxTransForm;
            #    Args                    args = new Args();
            #    ProjProposalTotals      projProposalTotals;
            #
            #    projProposalTotals = new ProjProposalTotals(projProposalJour);
            #    projProposalTotals.calc();
            #
            #    tmpTaxTransForm = Tax::showTaxes(menuitemDisplayStr(TaxTmpWorkProjectInvoiceProposal), projProposalTotals.tax());
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #EditInvoiceProposal
          AutoDeclaration     #Yes
          Visible             #No
          HelpText            #@GLS360124
          ElementPosition     #715827882
          HierarchyParent     #ButtonGroupMaintain
          Text                #@SYS317438
          ButtonDisplay       #Text & Image above
          NormalImage         #10040
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #No
          Big                 #Yes
          Primary             #Yes
          KeyTip              #Edit the selected invoice proposal
          NeedsRecord         #Yes
          OpenMode            #Edit
          MenuItemName        #ProjInvoiceProposal
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ExciseRegisterBalance_IN
          AutoDeclaration     #Yes
          ElementPosition     #1288490187
          HierarchyParent     #ItemButtonGroup
          Text                #@GLS5618
          DataSource          #ProjItemTrans_Project
          MenuItemName        #ExciseRegisterBalance_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #OnAccountExciseRegister_IN
          AutoDeclaration     #Yes
          ElementPosition     #1288490187
          HierarchyParent     #OnAcctButtonGroup
          Text                #@GLS5618
          MenuItemName        #ExciseRegisterBalance_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #OnAccountWithholdTax_IN
          AutoDeclaration     #Yes
          ElementPosition     #1717986916
          HierarchyParent     #OnAcctButtonGroup
          Text                #@SYS33817
          MenuItemName        #TaxWithholdTmpWorkTrans_IN
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #// <GIN>
            #void  clicked()
            #{
            #    if (TaxWithholdParameters_IN::checkTaxParameters())
            #    {
            #        ProjProposalTotals::showWithholdTaxLine_IN(projProposalJour, projProposalOnAcc, element);
            #    }
            #}
            #// </GIN>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ProInvoiceProposalTableCC
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #ManageCreditCard
          Text                #@ACC1514
          ButtonDisplay       #Text & Image above
          NormalImage         #12464
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          DataSource          #ProjProposalJour
          MenuItemName        #ProjInvoiceProposalCC
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ProjDebitNoteProposalSelection_BR
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1288490187
          HierarchyParent     #ButtonGroupNew
          ButtonDisplay       #Text & Image below
          ImageLocation       #AOTResource
          Big                 #Yes
          MenuItemName        #ProjDebitNoteProposalSelection_BR
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ProjFormLetter_Invoice
          AutoDeclaration     #Yes
          HelpText            #@SYS4000804
          ElementPosition     #1073741822
          HierarchyParent     #ButtonGroupPost
          Text                #@SYS4000803
          ButtonDisplay       #Text & Image below
          NormalImage         #10285
          ImageLocation       #EmbeddedResource
          MultiSelect         #Yes
          Big                 #Yes
          Primary             #Yes
          KeyTip              #Post the selected invoice
          NeedsRecord         #Yes
          MenuItemType        #Action
          MenuItemName        #ProjFormLetter_Invoice
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #
            #    /*
            #    projProposalJour_ds.reread();
            #    projProposalJour_ds.refreshEx();
            #
            #    element.setButtonAccess();
            #
            #    element.updateRelatedForm();
            #    */
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ProjInvoiceProposalPendingTrans
          ElementPosition     #1861152492
          HierarchyParent     #ButtonGroup
          ButtonDisplay       #Text & Image left
          NormalImage         #12458
          ImageLocation       #EmbeddedResource
          OpenMode            #View
          MenuItemName        #ProjInvoiceProposalPendingTrans
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #/// summary
            #/// To set the proposal parameters to send to the view other transaction feature
            #/// </summary>
            #void clicked()
            #{
            #    element.ProposalCreateLinesParams();
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PSAbtPrintPreview
          AutoDeclaration     #Yes
          ElementPosition     #1717986916
          HierarchyParent     #ButtonGroupPrint
          Text                #@SYS25597
          NormalImage         #1084
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #ProjProposalJour
          MenuItemType        #Output
          MenuItemName        #ProjInvoice
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    ProjProposalJour projProposalJourlocal;
            #
            #    for (projProposalJourlocal = projProposalJour_ds.getFirst(true) ? projProposalJour_ds.getFirst(true): projProposalJour_ds.cursor();
            #         projProposalJourlocal;
            #         projProposalJourlocal=projProposalJour_ds.getNext())
            #    {
            #        ProjFormLetter::printPreview(projProposalJourlocal);
            #    }
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PSAIndirectComponents
          AutoDeclaration     #Yes
          ElementPosition     #1717986916
          HierarchyParent     #ButtonGroupEmpl
          DataSource          #ProjProposalEmpl
          MenuItemName        #PSAIndirectComponentTrans
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PSAProjInvoiceDetails
          AutoDeclaration     #Yes
          ElementPosition     #858993458
          HierarchyParent     #ButtonGroupPrint
          ButtonDisplay       #Text & Image above
          NormalImage         #10671
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
          DataSource          #ProjProposalJour
          MenuItemName        #PSAProjInvoiceDetails
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PSAProjProposalSelection
          AutoDeclaration     #Yes
          ElementPosition     #858993458
          HierarchyParent     #ButtonGroupNew
          Text                #@GLS360107
          ButtonDisplay       #Text & Image below
          ImageLocation       #AOTResource
          Big                 #Yes
          Primary             #Yes
          MenuItemName        #PSAProjProposalSelection
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PSAProjProposalSelectionAddLines
          AutoDeclaration     #Yes
          ElementPosition     #1610612734
          HierarchyParent     #ButtonGroup
          ButtonDisplay       #Text & Image left
          NormalImage         #12489
          ImageLocation       #AOTResource
          DataSource          #ProjProposalJour
          MenuItemName        #PSAProjProposalSelectionAddLines
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PSAProjProposalSelectionCLIN
          AutoDeclaration     #Yes
          ElementPosition     #1717986916
          HierarchyParent     #ButtonGroupNew
          Text                #@GLS360221
          ButtonDisplay       #Text & Image left
          NormalImage         #12005
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          MenuItemName        #PSAProjProposalSelectionCLIN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PSAProjProposalSelectionCLINAddLines
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1717986916
          HierarchyParent     #ButtonGroup
          ButtonDisplay       #Text & Image left
          NormalImage         #12489
          ImageLocation       #AOTResource
          MenuItemName        #PSAProjProposalSelectionCLINAddLines
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesOrderExciseRegister_IN
          AutoDeclaration     #Yes
          ElementPosition     #1288490187
          HierarchyParent     #SalesLineButtonGroup
          Text                #@GLS5618
          MenuItemName        #ExciseRegisterBalance_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesOrderSalesTax_IN
          AutoDeclaration     #Yes
          ElementPosition     #858993458
          HierarchyParent     #SalesLineButtonGroup
          Text                #@SYS177544
          MenuItemName        #TaxTrnsSourceProjectInvoiceProposal
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #// <GIN>
            #void clicked()
            #{
            #    Object                  tmpTaxTransForm;
            #    Args                    args = new Args();
            #    ProjProposalTotals      projProposalTotals;
            #
            #    projProposalTotals = new ProjProposalTotals(projProposalJour);
            #    projProposalTotals.calc();
            #    projProposalTotals.tax().sourceSingleLine(true, true);
            #    tmpTaxTransForm = Tax::showTaxes(menuitemDisplayStr(TaxTmpWorkProjectInvoiceProposal), projProposalTotals.tax(), projProposalItem_SalesOrder, element);
            #}
            #// <GIN>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesOrderWithholdTax_IN
          AutoDeclaration     #Yes
          ElementPosition     #1717986916
          HierarchyParent     #SalesLineButtonGroup
          Text                #@SYS33817
          MenuItemName        #TaxWithholdTmpWorkTrans_IN
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #// <GIN>
            #void clicked()
            #{
            #    if (TaxWithholdParameters_IN::checkTaxParameters())
            #    {
            #        ProjProposalTotals::showWithholdTaxLine_IN(projProposalJour, projProposalItem_SalesOrder, element);
            #    }
            #}
            #// </GIN>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesTax_Cost
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #CostButtonGroup
          Text                #@SYS22916
          DataSource          #ProjProposalJour
          MenuItemName        #TaxTrnsSourceProjectInvoiceProposal
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #// <GIN>
            #void clicked()
            #{
            #    Object                  tmpTaxTransForm;
            #    Args                    args = new Args();
            #    ProjProposalTotals      projProposalTotals;
            #
            #    projProposalTotals = new ProjProposalTotals(projProposalJour);
            #    projProposalTotals.calc();
            #    projProposalTotals.tax().sourceSingleLine(true, true);
            #    tmpTaxTransForm = Tax::showTaxes(menuitemDisplayStr(TaxTmpWorkProjectInvoiceProposal), projProposalTotals.tax(), projProposalCost, element);
            #}
            #// </GIN>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesTax_Empl
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #EmplSalesTax
          Text                #@SYS22916
          NeedsRecord         #Yes
          DataSource          #ProjProposalJour
          MenuItemName        #TaxTmpWorkProjectInvoiceProposal
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #// <GIN>
            #void clicked()
            #{
            #    Object                  tmpTaxTransForm;
            #    Args                    args = new Args();
            #    ProjProposalTotals      projProposalTotals;
            #
            #    projProposalTotals = new ProjProposalTotals(projProposalJour);
            #    projProposalTotals.calc();
            #    projProposalTotals.tax().sourceSingleLine(true, true);
            #    tmpTaxTransForm = Tax::showTaxes(menuitemDisplayStr(TaxTmpWorkProjectInvoiceProposal), projProposalTotals.tax(), projProposalEmpl, element);
            #}
            #// </GIN>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesTax_Item
          AutoDeclaration     #Yes
          ElementPosition     #858993458
          HierarchyParent     #ItemButtonGroup
          Text                #@SYS22916
          DataSource          #ProjProposalJour
          MenuItemName        #TaxTrnsSourceProjectInvoiceProposal
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #// <GIN>
            #void clicked()
            #{
            #    Object                  tmpTaxTransForm;
            #    Args                    args = new Args();
            #    ProjProposalTotals      projProposalTotals;
            #
            #    projProposalTotals = new ProjProposalTotals(projProposalJour);
            #    projProposalTotals.calc();
            #    projProposalTotals.tax().sourceSingleLine(true, true);
            #    tmpTaxTransForm = Tax::showTaxes(menuitemDisplayStr(TaxTmpWorkProjectInvoiceProposal), projProposalTotals.tax(), projProposalItem_Project, element);
            #}
            #// </GIN>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesTax_OnAcc
          AutoDeclaration     #Yes
          ElementPosition     #858993458
          HierarchyParent     #OnAcctButtonGroup
          Text                #@SYS22916
          DataSource          #ProjProposalJour
          MenuItemName        #TaxTrnsSourceProjectInvoiceProposal
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #// <GIN>
            #void clicked()
            #{
            #    Object                  tmpTaxTransForm;
            #    Args                    args = new Args();
            #    ProjProposalTotals      projProposalTotals;
            #
            #    projProposalTotals = new ProjProposalTotals(projProposalJour);
            #    projProposalTotals.calc();
            #    projProposalTotals.tax().sourceSingleLine(true, true);
            #    tmpTaxTransForm = Tax::showTaxes(menuitemDisplayStr(TaxTmpWorkProjectInvoiceProposal), projProposalTotals.tax(), projProposalOnAcc, element);
            #}
            #// </GIN>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesTax_Revenue
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #RevenueButtonGroup
          Text                #@SYS22916
          NeedsRecord         #Yes
          DataSource          #ProjProposalJour
          MenuItemName        #TaxTrnsSourceProjectInvoiceProposal
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #// <GIN>
            #void clicked()
            #{
            #    Object                  tmpTaxTransForm;
            #    Args                    args = new Args();
            #    ProjProposalTotals      projProposalTotals;
            #
            #    projProposalTotals = new ProjProposalTotals(projProposalJour);
            #    projProposalTotals.calc();
            #    projProposalTotals.tax().sourceSingleLine(true, true);
            #    tmpTaxTransForm = Tax::showTaxes(menuitemDisplayStr(TaxTmpWorkProjectInvoiceProposal), projProposalTotals.tax(), projProposalRevenue, element);
            #}
            #// </GIN>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesTax_RevenueSubscription
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #RevenueSubscriptionButtonGroup
          Text                #@SYS22916
          NeedsRecord         #Yes
          DataSource          #ProjProposalJour
          MenuItemName        #TaxTrnsSourceProjectInvoiceProposal
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #// <GIN>
            #void clicked()
            #{
            #    Object                  tmpTaxTransForm;
            #    Args                    args = new Args();
            #    ProjProposalTotals      projProposalTotals;
            #
            #    projProposalTotals = new ProjProposalTotals(projProposalJour);
            #    projProposalTotals.calc();
            #    projProposalTotals.tax().sourceSingleLine(true, true);
            #    tmpTaxTransForm = Tax::showTaxes(menuitemDisplayStr(TaxTmpWorkProjectInvoiceProposal), projProposalTotals.tax(), projProposalRevenueSubscription, element);
            #}
            #// </GIN>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TaxTmpWorkProjectInvoiceProposal
          AutoDeclaration     #Yes
          Visible             #No
          DisplayTarget       #Client
          ElementPosition     #477218588
          HierarchyParent     #ButtonGroupDetails
          ButtonDisplay       #Image only
          NormalImage         #10777
          ImageLocation       #EmbeddedResource
          NeedsRecord         #Yes
          DataSource          #ProjProposalJour
          MenuItemName        #TaxTmpWorkProjectInvoiceProposal
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    Object                  tmpTaxTransForm;
            #    Args                    args = new Args();
            #    ProjProposalTotals      projProposalTotals;
            #
            #    projProposalTotals = new ProjProposalTotals(projProposalJour);
            #    projProposalTotals.calc();
            #
            #    tmpTaxTransForm = Tax::showTaxes(menuitemDisplayStr(TaxTmpWorkProjectInvoiceProposal), projProposalTotals.tax()
            #        // <GEEU>
            #        , projProposalJour
            #        // </GEEU>
            #        );
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TaxTrans
          AutoDeclaration     #Yes
          Visible             #No
          DisplayTarget       #Client
          ElementPosition     #954437176
          HierarchyParent     #ButtonGroupDetails
          ButtonDisplay       #Image only
          NormalImage         #10777
          ImageLocation       #EmbeddedResource
          NeedsRecord         #Yes
          DataSource          #ProjProposalJour
          MenuItemName        #TaxTrans
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #TransportationDocument
          ElementPosition     #1908874352
          HierarchyParent     #ButtonGroupDetails
          ButtonDisplay       #Text & Image left
          NeedsRecord         #Yes
          DataSource          #ProjProposalJour
          MenuItemName        #TransportationDocument
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #WithholdTaxItem_IN
          AutoDeclaration     #Yes
          ElementPosition     #1717986916
          HierarchyParent     #ItemButtonGroup
          Text                #@SYS33817
          MenuItemName        #TaxWithholdTmpWorkTrans_IN
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #// <GIN>
            #void clicked()
            #{
            #    if (TaxWithholdParameters_IN::checkTaxParameters())
            #    {
            #        ProjProposalTotals::showWithholdTaxLine_IN(projProposalJour, projProposalItem_Project, element);
            #    }
            #}
            #// </GIN>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjectCostInvoiceProposal_Qty
          ElementPosition     #1380525201
          HierarchyParent     #CostGrid
          DataSource          #ProjProposalCost
          DataMethod          #Qty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjectEmployeeInvoiceProposal_Qty
          ElementPosition     #1145324608
          HierarchyParent     #EmplGrid
          Label               #@SYS1151
          DataSource          #ProjProposalEmpl
          DataMethod          #Qty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjectItemInvoiceProposal_DeliverNow
          AutoDeclaration     #Yes
          ElementPosition     #715827880
          HierarchyParent     #ItemSalesLineGrid
          Label               #@SYS59970
          DataSource          #ProjProposalItem_SalesOrder
          DataField           #DeliverNow
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjectItemInvoiceProposal_InventNow
          ElementPosition     #1717986912
          HierarchyParent     #ItemSalesLineGrid
          DataSource          #ProjProposalItem_SalesOrder
          DataField           #InventNow
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjectItemInvoiceProposal_RemainAfter
          ElementPosition     #1574821336
          HierarchyParent     #ItemSalesLineGrid
          DataSource          #ProjProposalItem_SalesOrder
          DataField           #RemainAfter
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjectItemInvoiceProposal_RemainAfterInvent
          ElementPosition     #2004318064
          HierarchyParent     #ItemSalesLineGrid
          DataSource          #ProjProposalItem_SalesOrder
          DataField           #RemainAfterInvent
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjectRevenueInvoiceProposal_Qty
          ElementPosition     #1395864366
          HierarchyParent     #RevenueGrid
          DataSource          #ProjProposalRevenue
          DataMethod          #Qty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjItemProject_Qty
          ElementPosition     #1321528392
          HierarchyParent     #ItemProjectGrid
          DataSource          #ProjProposalItem_Project
          DataMethod          #Qty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjProposalCostDetail_AmountCur
          ElementPosition     #1687308579
          HierarchyParent     #CostGrid
          Label               #@SYS10500
          DataSource          #ProjProposalCostDetail
          DataField           #AmountCur
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjProposalCostDetail_SalesPrice
          ElementPosition     #1533916890
          HierarchyParent     #CostGrid
          Label               #@SYS343154
          DataSource          #ProjProposalCostDetail
          DataField           #SalesPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjProposalEmpl_SalesPrice
          AutoDeclaration     #Yes
          Visible             #No
          ConfigurationKey    #Project3
          ElementPosition     #1288490184
          HierarchyParent     #EmplGrid
          Label               #@SYS343154
          DataSource          #ProjProposalEmpl
          DataMethod          #salesPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjProposalEmplDetail_AmountCur
          ElementPosition     #1574821336
          HierarchyParent     #EmplGrid
          Label               #@SYS10500
          DataSource          #ProjProposalEmplDetail
          DataField           #AmountCur
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjProposalEmplDetail_SalesPrice
          ElementPosition     #1431655760
          HierarchyParent     #EmplGrid
          DataSource          #ProjProposalEmplDetail
          DataField           #SalesPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjProposalItemDetail_Project_AmountCur
          ElementPosition     #1651910490
          HierarchyParent     #ItemProjectGrid
          Label               #@SYS10500
          DataSource          #ProjProposalItemDetail_Project
          DataField           #AmountCur
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjProposalItemDetail_Project_SalesPrice
          ElementPosition     #1486719441
          HierarchyParent     #ItemProjectGrid
          Label               #@SYS343154
          DataSource          #ProjProposalItemDetail_Project
          DataField           #SalesPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjProposalItemDetail_SalesOrder_LineAmount
          ElementPosition     #1002159032
          HierarchyParent     #ItemSalesLineGrid
          Label               #@SYS10500
          DataSource          #ProjProposalItemDetail_SalesOrder
          DataMethod          #lineAmt
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjProposalOnAccDetail_LineAmount
          ElementPosition     #1342177275
          HierarchyParent     #OnAccGrid
          Label               #@SYS10500
          DataSource          #ProjProposalOnAccDetail
          DataMethod          #lineAmount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjProposalRevenueDetail_LineAmount
          ElementPosition     #1610612730
          HierarchyParent     #RevenueGrid
          Label               #@SYS10500
          DataSource          #ProjProposalRevenueDetail
          DataField           #AmountCur
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjProposalRevenueDetail_SalesPrice
          ElementPosition     #1503238548
          HierarchyParent     #RevenueGrid
          Label               #@SYS5755
          DataSource          #ProjProposalRevenueDetail
          DataField           #SalesPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjProposalRevenueDetailSubscription_AmountCur
          ElementPosition     #1073741823
          HierarchyParent     #RevenueSubscriptiongrid
          DataSource          #ProjProposalRevenueDetailSubscription
          DataField           #AmountCur
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjRevenueTransSubscription_SMABasePrice
          ElementPosition     #1687308579
          HierarchyParent     #RevenueSubscriptiongrid
          DataSource          #ProjRevenueTransSubscription
          DataField           #SMABasePrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #ProjRevenueTransSubscription_SMAIndex
          ElementPosition     #1533916890
          HierarchyParent     #RevenueSubscriptiongrid
          DataSource          #ProjRevenueTransSubscription
          DataField           #SMAIndex
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PSAIndirecCostAmount
          AutoDeclaration     #Yes
          Visible             #No
          AllowEdit           #No
          Width               #Column width
          ElementPosition     #1486719441
          HierarchyParent     #SummaryGrid
          Label               #@PSA11598
          DataSource          #PSAProjProposalProj
          DataMethod          #calcTotalIndirectComponentInvoice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PSANowInvoiced
          AutoDeclaration     #Yes
          AllowEdit           #No
          Width               #Column width
          ElementPosition     #1982292592
          HierarchyParent     #SummaryGrid
          Label               #@PSA11385
          DataSource          #PSAProjProposalProj
          DataMethod          #calcTotalLineAmount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PSAProjProposalProj_Invoiced
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #991146294
          HierarchyParent     #SummaryGrid
          Label               #@PSA11389
          DataSource          #PSAProjProposalProj
          DataField           #Invoiced
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PSAProjProposalProj_InvoicedNow
          Width               #Column width
          ElementPosition     #1156337343
          HierarchyParent     #SummaryGrid
          Label               #@PSA11385
          DataSource          #PSAProjProposalProj
          DataField           #InvoicedNow
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PSAProjProposalProj_ReleasedAmount
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #1321528392
          HierarchyParent     #SummaryGrid
          DataSource          #PSAProjProposalProj
          DataField           #ReleasedAmount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PSAProjProposalProj_RetainedNow
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #1817101539
          HierarchyParent     #SummaryGrid
          Label               #@PSA11413
          DataSource          #PSAProjProposalProj
          DataField           #RetainedNow
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #PSAProjProposalProj_RetainedPercent
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #1651910490
          HierarchyParent     #SummaryGrid
          Label               #@PSA11454
          DataSource          #PSAProjProposalProj
          DataField           #RetainedPercent
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #SalesLine_SalesPrice
          AutoDeclaration     #Yes
          ElementPosition     #858993456
          HierarchyParent     #ItemSalesLineGrid
          DataSource          #SalesLine
          DataField           #SalesPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STATICTEXT
        PROPERTIES
          Name                #InfoBarText_BR
          AutoDeclaration     #Yes
          Visible             #No
          CountryRegionCodes  #BR
          ElementPosition     #805306366
          HierarchyParent     #HeaderInfo
          Text                #@GLS3800155
          ColorScheme         #RGB
          BackStyle           #Auto
          BackgroundColor     #0 255 255
          ForegroundColor     #0 0 0
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #BillingRuleName
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #825955245
          HierarchyParent     #SummaryGrid
          DataSource          #PSAProjProposalProj
          DataMethod          #BillingRuleName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Category2
          ElementPosition     #858993456
          HierarchyParent     #RevenueGrid
          Label               #@SYS333196
          DataSource          #ProjRevenueTrans
          DataField           #CategoryId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CategoryId
          ElementPosition     #613566756
          HierarchyParent     #CostGrid
          Label               #@SYS333196
          DataSource          #projCostTrans
          DataField           #CategoryId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #CostTxt
          ElementPosition     #1227133512
          HierarchyParent     #CostGrid
          Label               #@SYS13566
          DataSource          #ProjProposalCost
          DataField           #Txt
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #displayContractName
          AutoDeclaration     #Yes
          ElementPosition     #1288490187
          HierarchyParent     #ContractGroup
          Label               #@SYS301600
          DataSource          #ProjProposalJour
          DataMethod          #displayContractName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #editInvReportFormat
          ElementPosition     #2080374780
          HierarchyParent     #General
          DataSource          #ProjProposalJour
          DataMethod          #editInvReportFormat
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #public void lookup()
            #{
            #    PrintMgmtReportFormat::lookupReportFormat(this,PrintMgmtDocumentType::SIProjInvoice);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #EmplTxt
          Width               #75
          ElementPosition     #1002159032
          HierarchyParent     #EmplGrid
          Label               #@SYS13566
          DataSource          #ProjProposalEmpl
          DataField           #Txt
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Format_MY_M_editInvoiceType_MY
          ElementPosition     #1431655764
          HierarchyParent     #Format_MY
          Label               #@SYP4860656
          DataSource          #ProjProposalJour
          DataMethod          #editInvoiceType_MY
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #// <GMY>
            #public void lookup()
            #{
            #    TaxGSTDocInvoiceType_MY::construct(tableNum(ProjProposalJour)).lookup(this);
            #}
            #// </GMY>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #GridProjectInvoiceProposalJour_Project
          ElementPosition     #1227133512
          HierarchyParent     #Grid
          Label               #@GLS360133
          DataSource          #ProjProposalJour
          DataField           #ProjInvoiceProjId
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    if (ret)
            #    {
            #        projProposalJour.CurrencyId = ProjInvoiceTable::find(projProposalJour.ProjInvoiceProjId).CurrencyId;
            #    }
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #GridProposal
          AllowEdit           #No
          ElementPosition     #613566756
          HierarchyParent     #Grid
          DataSource          #ProjProposalJour
          DataField           #ProposalId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #GridReason_M_editReasonCode
          HelpText            #@GLS221842
          ElementPosition     #1073741822
          HierarchyParent     #GridReason
          DataSource          #ProjProposalJour
          DataMethod          #editReasonCode
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #// <GEEU>
            #public void lookup()
            #{
            #    ReasonFormTable::reasonCodeLookup(
            #        this,
            #        LedgerJournalACType::Cust,
            #        LedgerJournalACType::Cust,
            #        true);
            #}
            #// </GEEU>
          ENDSOURCE
          SOURCE #modified
            #// <GEEU>
            #public boolean modified()
            #{
            #    boolean changed = super();
            #
            #    if (changed)
            #    {
            #        // Needed since the change is actually on the ReasonTableRef table,
            #        // the ReasonTableRef (RecId) doesn't changes on update.
            #        projProposalJour_ds.forceWrite(true);
            #    }
            #
            #    return changed;
            #}
            #// </GEEU>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #GridReason_M_editReasonComment
          HelpText            #@GLS221843
          ElementPosition     #1610612733
          HierarchyParent     #GridReason
          Label               #@SYS53151
          DataSource          #ProjProposalJour
          DataMethod          #editReasonComment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #HeaderTitle
          AutoDeclaration     #Yes
          Width               #Column width
          Skip                #Yes
          AlignControl        #No
          ElementPosition     #1252698792
          HierarchyParent     #HeaderInfo
          Border              #None
          Text                #Invoice proposal
          ColorScheme         #Windows palette
          ForegroundColor     #Dyn Title green
          FontSize            #11
          ShowLabel           #No
          DataSource          #ProjProposalJour
          DataMethod          #titleFields
          ViewEditMode        #View
          Style               #TitleField
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #OnAccTxt
          ElementPosition     #1073741820
          HierarchyParent     #OnAccGrid
          Label               #@SYS13566
          DataSource          #ProjProposalOnAcc
          DataField           #Txt
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #projCostTrans_ActivityNumber
          ElementPosition     #766958445
          HierarchyParent     #CostGrid
          Label               #@SYS38381
          DataSource          #projCostTrans
          DataField           #ActivityNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjectCostInvoiceProposal_Project
          AllowEdit           #No
          ElementPosition     #460175067
          HierarchyParent     #CostGrid
          Label               #@SYS80304
          DataSource          #projCostTrans
          DataField           #ProjId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjectEmployeeInvoiceProposal_Project
          ElementPosition     #429496728
          HierarchyParent     #EmplGrid
          Label               #@SYS80304
          DataSource          #projEmplTrans
          DataField           #ProjId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjectInvoiceProposalJour_Project
          ElementPosition     #858993458
          HierarchyParent     #ContractGroup
          Label               #@GLS360133
          DataSource          #ProjProposalJour
          DataField           #ProjInvoiceProjId
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    if (ret)
            #    {
            #        projProposalJour.CurrencyId = ProjInvoiceTable::find(projProposalJour.ProjInvoiceProjId).CurrencyId;
            #    }
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjectItemInvoiceProposal_ItemId
          AllowEdit           #No
          ElementPosition     #429496728
          HierarchyParent     #ItemSalesLineGrid
          DataSource          #ProjProposalItem_SalesOrder
          DataField           #ItemId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjectItemInvoiceProposal_ProjId
          AllowEdit           #No
          ElementPosition     #286331152
          HierarchyParent     #ItemSalesLineGrid
          DataSource          #ProjProposalItem_SalesOrder
          DataMethod          #projId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjectItemInvoiceProposal_SalesOrderNum
          AllowEdit           #No
          ElementPosition     #1145324608
          HierarchyParent     #ItemSalesLineGrid
          DataSource          #ProjProposalItem_SalesOrder
          DataField           #SalesId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjectOnAccountInvoiceProposal_Project
          AllowEdit           #No
          ElementPosition     #805306365
          HierarchyParent     #OnAccGrid
          Label               #@SYS80304
          DataSource          #projOnAccTrans
          DataField           #ProjID
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjectRevenueInvoiceProposal_Project
          ElementPosition     #644245092
          HierarchyParent     #RevenueGrid
          Label               #@SYS80304
          DataSource          #ProjRevenueTrans
          DataField           #ProjId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #projEmplTrans_ActivityNumber
          ElementPosition     #715827880
          HierarchyParent     #EmplGrid
          Label               #@SYS38381
          DataSource          #projEmplTrans
          DataField           #ActivityNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #projEmplTrans_CategoryId
          ElementPosition     #572662304
          HierarchyParent     #EmplGrid
          Label               #@SYS333196
          DataSource          #projEmplTrans
          DataField           #CategoryId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #projEmplTrans_PSAIndirectComponentGroup
          Visible             #No
          ConfigurationKey    #PSAIndirectCost
          ElementPosition     #2004318064
          HierarchyParent     #EmplGrid
          DataSource          #projEmplTrans
          DataField           #PSAIndirectComponentGroup
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjItemProject_ActivityNumber
          ElementPosition     #991146294
          HierarchyParent     #ItemProjectGrid
          Label               #@SYS38381
          DataSource          #ProjItemTrans_Project
          DataField           #ActivityNumber
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjItemProject_CategoryId
          ElementPosition     #660764196
          HierarchyParent     #ItemProjectGrid
          Label               #@SYS333196
          DataSource          #ProjItemTrans_Project
          DataField           #CategoryId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjItemProject_ProjId
          AllowEdit           #No
          ElementPosition     #495573147
          HierarchyParent     #ItemProjectGrid
          Label               #@SYS80304
          DataSource          #ProjItemTrans_Project
          DataField           #ProjId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjItemProject_Txt
          Height              #1
          ElementPosition     #1156337343
          HierarchyParent     #ItemProjectGrid
          Label               #@SYS13566
          DataSource          #ProjProposalItem_Project
          DataField           #Txt
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjItemTrans_Project_ItemId
          ElementPosition     #825955245
          HierarchyParent     #ItemProjectGrid
          DataSource          #ProjItemTrans_Project
          DataField           #ItemId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalCost_EInvoiceAccountCode
          AutoDeclaration     #Yes
          ElementPosition     #1840700268
          HierarchyParent     #CostGrid
          DataSource          #ProjProposalCost
          DataField           #EInvoiceAccountCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalCost_TransId
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1994091957
          HierarchyParent     #CostGrid
          DataSource          #ProjProposalCost
          DataField           #TransId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalEmpl_EInvoiceAccountCode
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1717986912
          HierarchyParent     #EmplGrid
          DataSource          #ProjProposalEmpl
          DataField           #EInvoiceAccountCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalEmpl_TransId
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1861152488
          HierarchyParent     #EmplGrid
          DataSource          #ProjProposalEmpl
          DataField           #TransId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalItem_Project_EInvoiceAccountCode
          AutoDeclaration     #Yes
          ElementPosition     #1817101539
          HierarchyParent     #ItemProjectGrid
          DataSource          #ProjProposalItem_Project
          DataField           #EInvoiceAccountCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalItem_Project_ProjTransId
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1982292588
          HierarchyParent     #ItemProjectGrid
          DataSource          #ProjProposalItem_Project
          DataField           #ProjTransId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalItem_SalesOrder_EInvoiceAccountCode
          AutoDeclaration     #Yes
          ElementPosition     #1861152488
          HierarchyParent     #ItemSalesLineGrid
          DataSource          #ProjProposalItem_SalesOrder
          DataField           #EInvoiceAccountCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalItem_SalesOrder_ProjTransId
          AutoDeclaration     #Yes
          ElementPosition     #1288490184
          HierarchyParent     #ItemSalesLineGrid
          DataSource          #ProjProposalItem_SalesOrder
          DataField           #ProjTransId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalJour_CurrencyId
          AllowEdit           #No
          ElementPosition     #1879048185
          HierarchyParent     #General
          DataSource          #ProjProposalJour
          DataField           #CurrencyId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalJour_EInvoiceAccountCode
          ElementPosition     #1610612730
          HierarchyParent     #General
          DataSource          #ProjProposalJour
          DataField           #EInvoiceAccountCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalJour_NumberSequenceGroupId
          CountryRegionCodes  #MY
          ElementPosition     #2013265915
          HierarchyParent     #General
          DataSource          #ProjProposalJour
          DataField           #NumberSequenceGroupId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalJour_ProjInvoiceId
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #General
          DataSource          #ProjProposalJour
          DataField           #ProjInvoiceId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalJour_PSAInvoiceTxtPre
          ElementPosition     #1610612733
          HierarchyParent     #Printing
          Label               #@SYS4110052
          DataSource          #ProjProposalJour
          DataField           #PSAInvoiceTxtPre
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalOnAcc_EInvoiceAccountCode
          AutoDeclaration     #Yes
          ElementPosition     #1610612730
          HierarchyParent     #OnAccGrid
          DataSource          #ProjProposalOnAcc
          DataField           #EInvoiceAccountCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalOnAcc_TransId
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1879048185
          HierarchyParent     #OnAccGrid
          DataSource          #ProjProposalOnAcc
          DataField           #TransId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalRevenue_EInvoiceAccountCode
          AutoDeclaration     #Yes
          ElementPosition     #1717986912
          HierarchyParent     #RevenueGrid
          DataSource          #ProjProposalRevenue
          DataField           #EInvoiceAccountCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalRevenue_TransId
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1932735276
          HierarchyParent     #RevenueGrid
          DataSource          #ProjProposalRevenue
          DataField           #TransId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalRevenueSubscription_EInvoiceAccountCode
          AutoDeclaration     #Yes
          ElementPosition     #1840700268
          HierarchyParent     #RevenueSubscriptiongrid
          DataSource          #ProjProposalRevenueSubscription
          DataField           #EInvoiceAccountCode
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalRevenueSubscription_TransId
          AutoDeclaration     #Yes
          ElementPosition     #1994091957
          HierarchyParent     #RevenueSubscriptiongrid
          DataSource          #ProjProposalRevenueSubscription
          DataField           #TransId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjProposalRevenueSubscription_Txt
          ElementPosition     #920350134
          HierarchyParent     #RevenueSubscriptiongrid
          DataSource          #ProjProposalRevenueSubscription
          DataField           #Txt
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ProjRevenueTransSubscription_SMASubscriptionId
          ElementPosition     #766958445
          HierarchyParent     #RevenueSubscriptiongrid
          DataSource          #ProjRevenueTransSubscription
          DataField           #SMASubscriptionId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Proposal
          AutoDeclaration     #Yes
          AllowEdit           #No
          ElementPosition     #536870910
          HierarchyParent     #General
          DisplayLength       #23
          DataSource          #ProjProposalJour
          DataField           #ProposalId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PSAProjProposalProj_ContractLineNum
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #660764196
          HierarchyParent     #SummaryGrid
          DataSource          #PSAProjProposalProj
          DataField           #ContractLineNum
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PSAProjProposalProj_Name
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #495573147
          HierarchyParent     #SummaryGrid
          DataSource          #PSAProjProposalProj
          DataMethod          #projName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #PSAProjProposalProj_ProjId
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #330382098
          HierarchyParent     #SummaryGrid
          Label               #@SYS80304
          DataSource          #PSAProjProposalProj
          DataField           #ProjId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Reason_M_editReasonCode
          HelpText            #@GLS221842
          ElementPosition     #1073741822
          HierarchyParent     #Reason
          DataSource          #ProjProposalJour
          DataMethod          #editReasonCode
        ENDPROPERTIES
        
        METHODS
          SOURCE #lookup
            #// <GEEU>
            #public void lookup()
            #{
            #    ReasonFormTable::reasonCodeLookup(
            #        this,
            #        LedgerJournalACType::Cust,
            #        LedgerJournalACType::Cust,
            #        true);
            #}
            #// </GEEU>
          ENDSOURCE
          SOURCE #modified
            #// <GEEU>
            #public boolean modified()
            #{
            #    boolean changed = super();
            #
            #    if (changed)
            #    {
            #        // Needed since the change is actually on the ReasonTableRef table,
            #        // the ReasonTableRef (RecId) doesn't changes on update.
            #        projProposalJour_ds.forceWrite(true);
            #    }
            #
            #    return changed;
            #}
            #// </GEEU>
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Reason_M_editReasonComment
          HelpText            #@GLS221843
          ElementPosition     #1610612733
          HierarchyParent     #Reason
          Label               #@SYS53151
          DataSource          #ProjProposalJour
          DataMethod          #editReasonComment
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesLine_Name
          Height              #1
          ElementPosition     #572662304
          HierarchyParent     #ItemSalesLineGrid
          Label               #@SYS13566
          DataSource          #SalesLine
          DataField           #Name
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SMACategory
          ElementPosition     #613566756
          HierarchyParent     #RevenueSubscriptiongrid
          DataSource          #ProjRevenueTransSubscription
          DataField           #CategoryId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SMAProjectRevenueInvoiceProposal_Project
          ElementPosition     #460175067
          HierarchyParent     #RevenueSubscriptiongrid
          DataSource          #ProjRevenueTransSubscription
          DataField           #ProjId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Txt1
          HelpText            #@SYS75151
          ElementPosition     #1288490184
          HierarchyParent     #RevenueGrid
          Label               #@SYS13566
          DataSource          #ProjProposalRevenue
          DataField           #Txt
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
    ENDCONTAINER
    
  ENDDESIGN
  
  PERMISSIONS #Permissions
    PROPERTIES
    ENDPROPERTIES
    
    PERMISSIONSET #Read
      PROPERTIES
      ENDPROPERTIES
      
      FORM #Controls
      ENDFORM
      
    TABLES #Tables
    ENDTABLES
    
  SERVERMETHODS #Server Methods
  ENDSERVERMETHODS
  
ASSOCIATEDFORMS #Associated Forms
  ASSOCIATEDFORM #ProjInvoiceEditLines
    PROPERTIES
      Form                #ProjInvoiceEditLines
      AccessLevel         #NoAccess
      SystemManaged       #No
      ManagedBy           #Manual
    ENDPROPERTIES
    
  ENDASSOCIATEDFORM
  
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Update
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
  ENDFORM
  
TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
  ASSOCIATEDFORM #ProjInvoiceEditLines
    PROPERTIES
      Form                #ProjInvoiceEditLines
      AccessLevel         #Update
      SystemManaged       #No
      ManagedBy           #Manual
    ENDPROPERTIES
    
  ENDASSOCIATEDFORM
  
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Create
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
  ENDFORM
  
TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
  ASSOCIATEDFORM #ProjInvoiceEditLines
    PROPERTIES
      Form                #ProjInvoiceEditLines
      AccessLevel         #Create
      SystemManaged       #No
      ManagedBy           #Manual
    ENDPROPERTIES
    
  ENDASSOCIATEDFORM
  
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Delete
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
  ENDFORM
  
TABLES #Tables
  TABLE #ProjProposalEmpl
    PROPERTIES
      Table               #ProjProposalEmpl
      EffectiveAccess     #Delete
      ManagedBy           #Manual
    ENDPROPERTIES
    
  ENDTABLE
  
TABLE #ProjProposalItem
  PROPERTIES
    Table               #ProjProposalItem
    EffectiveAccess     #Delete
    ManagedBy           #Manual
  ENDPROPERTIES
  
ENDTABLE

TABLE #ProjProposalOnAcc
  PROPERTIES
    Table               #ProjProposalOnAcc
    EffectiveAccess     #Delete
    ManagedBy           #Manual
  ENDPROPERTIES
  
ENDTABLE

TABLE #ProjProposalRevenue
  PROPERTIES
    Table               #ProjProposalRevenue
    EffectiveAccess     #Delete
    ManagedBy           #Manual
  ENDPROPERTIES
  
ENDTABLE

ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
  ASSOCIATEDFORM #ProjInvoiceEditLines
    PROPERTIES
      Form                #ProjInvoiceEditLines
      AccessLevel         #Delete
      SystemManaged       #No
      ManagedBy           #Manual
    ENDPROPERTIES
    
  ENDASSOCIATEDFORM
  
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

ENDPERMISSIONS

ENDFORM


***Element: END
