Exportfile for AOT version 1.0 or later
Formatversion: 1

***Element: FRM

; 
; --------------------------------------------------------------------------------
FRMVERSION 12

FORM #ReturnTable
  PROPERTIES
    Name                #ReturnTable
    FormTemplate        #DetailsPage
    InteractionClass    #ReturnTableInteraction
    Origin              #{9BD94312-B7EB-48EC-A910-3E0C47BC707E}
  ENDPROPERTIES
  
  METHODS
    SOURCE #classDeclaration
      #public class FormRun extends ObjectRun
      #{
      #    SalesTableType                          salesTableType;
      #    InventDimCtrl_Frm_Mov                   inventDimFormSetup;
      #    SysFormSplitter_Y                       formSplitterVertical;
      #    boolean                                 advanced;
      #    boolean                                 wasQueryExecuted;
      #    SalesTableForm_Return                   salesTableForm;
      #    SalesTable2LineUpdatePrompt             salesTable2LineUpdatePrompt;
      #    LogisticsLocationRecId                  postalAddressLocation;
      #
      #    QueryBuildRange                         qbrRMAStatusFilter;
      #    QueryBuildRange                         qbrCreatedDateFilter;
      #
      #    RecId                                   interCompanyIsPriceDiscSearchNeeded;
      #    ReturnTableButtonStateProvider          returnTableButtonStateProvider;
      #
      #    PdsCWFormCtrl                           formCtrl;
      #
      #    LedgerDimensionDefaultAccountController ledgerDefaultAccountController;
      #
      #    #define.blank('')
      #
      #    // <GEERU>
      #    #ISOCountryRegionCodes
      #    // </GEERU>
      #
      #    // <GIN>
      #    boolean isSalesLine_INEnabled;
      #    // </GIN>
      #
      #    CustAccount                     custAccount;
      #    SalesId                         mcrReturnSalesId;
      #    SalesTable                      openReturnSalesTable;
      #    MCROrderParameters              mcrOrderParameters;
      #    NoYes                           enableDirectedSelling;
      #    NoYes                           enableOrderCompletion;
      #    NoYes                           enableOrderPriceControl;
      #    boolean                         mcrCallCenterEnabled;
      #    boolean                         mcrParmsSet;
      #}
      #
    ENDSOURCE
    SOURCE #canClose
      #public boolean canClose()
      #{
      #    boolean  ret;
      #
      #    ret = super();
      #
      #    if (element.closedCancel() && ret)
      #    {
      #        ret = salesTableForm.canClose(salesTable);
      #    }
      #
      #    if (mcrCallCenterEnabled)
      #    {
      #        // Don't allow open returns.
      #        ret = ret && element.mcrCheckOpenOrder();
      #    }
      #
      #    return ret;
      #}
    ENDSOURCE
    SOURCE #close
      #public void close()
      #{
      #    FormDataSource formDataSource;
      #    super();
      #
      #    salesTableForm.isAdvanced(advanced);
      #    xSysLastValue::saveLast(salesTableForm);
      #
      #    if (element.args() && element.args().caller() && element.args().caller().name() == formStr(ReturnTableListPage))
      #    {
      #        formDataSource = element.args().record().dataSource();
      #        if (formDataSource)
      #        {
      #            formDataSource.research(true);
      #        }
      #    }
      #}
    ENDSOURCE
    SOURCE #docCursor
      #public Common docCursor()
      #{
      #    Common docCursor;
      #
      #    docCursor = super();
      #
      #    if (docCursor.TableId == tableNum(InventDim))
      #    {
      #        docCursor = salesLine;
      #    }
      #
      #    return docCursor;
      #}
    ENDSOURCE
    SOURCE #doRefresh
      #/// <summary>
      #///     Updates the record buffers displayed in the form.
      #/// </summary>
      #/// <param name="_lineRefreshNeeded">
      #///     A boolean type specifying whether salesLine_ds should be reread or researched.
      #///     If true the salesLine_ds is reread, otherwise, salesLine_ds is researched.
      #/// </param>
      #void doRefresh(boolean _lineRefreshNeeded = false)
      #{
      #    salesTable_ds.reread();
      #    salesTable_ds.refresh();
      #
      #    if (_lineRefreshNeeded)
      #    {
      #        salesLine_ds.reread();
      #        salesLine_ds.refresh();
      #    }
      #    else
      #    {
      #        salesLine_ds.research();
      #    }
      #    if (mcrCallCenterEnabled)
      #    {
      #        MCRReturnSalesTable.data(SalesTable.mcrReturnSalesTable());
      #        MCRReturnSalesTable_ds.refresh();
      #    }
      #}
    ENDSOURCE
    SOURCE #enableLineAgreementActions
      #/// <summary>
      #/// Enables available line actions in connection with Agreements
      #/// </summary>
      #/// <remarks>
      #///    Invoked whenever a link to an agreement is created or removed for the return line.
      #/// </remarks>
      #public void enableLineAgreementActions()
      #{
      #    returnTableButtonStateProvider.setDatasources(salesTable, salesLine);
      #    // Agreement buttons (line)
      #    createLink.enabled(returnTableButtonStateProvider.checkRuleCreateLink());
      #    removeLink.enabled(returnTableButtonStateProvider.checkRuleRemoveLink());
      #    salesAgreementLine.enabled(returnTableButtonStateProvider.checkRuleSalesAgreementLine());
      #}
    ENDSOURCE
    SOURCE #gotoLines
      #void gotoLines()
      #{
      #    salesLineGrid.setFocus();
      #}
    ENDSOURCE
    SOURCE #init
      #public void init()
      #{
      #    SalesTable salesTableSO, salesTableRO;
      #    // DCR:3213231 <Start>
      #    if (element.args().menuItemName() == menuitemDisplayStr(MCRCreateRMA))
      #    {
      #        // Selected sales order (salesTable)
      #        salesTableSO = element.args().record();
      #
      #        if (salesTableSO.RecId)
      #        {
      #            salesTableRO = this.initReturnOrderFromSalesTable(salesTableSO);
      #
      #            if (salesTableRO.RecId)
      #            {
      #                // Initiate datasource with created return order
      #                element.args().record(salesTableRO);
      #            }
      #        }
      #    }
      #    // DCR:3213231 <End>
      #
      #    returnTableButtonStateProvider = new ReturnTableButtonStateProvider();
      #
      #    if (element.args() && !TradeFormHelper::isCalledFromForm(element.args(), formStr(ReturnTableListPage)))
      #    {
      #        element.args().copyCallerQuery(CopyCallerQuery::No);
      #    }
      #    if (#PdsCatchWeightEnabled)
      #    {
      #        formCtrl = PdsCWFormCtrl_ReturnTable::newFromForm(element);
      #        formCtrl.initPre();
      #    }
      #
      #    // <GIN>
      #    if (TaxParameters::isExciseEnable_IN())
      #    {
      #        isSalesLine_INEnabled = SysExtensionSerializerExtensionMap::isExtensionEnabled(tableNum(SalesLine_IN));
      #    }
      #    // </GIN>
      #
      #    super();
      #
      #    this.dataSource().init();
      #
      #    salesTableForm = SalesTableForm::construct(SalesTableFormId::ReturnOrder, element.args().record());
      #
      #    salesTableForm.parmFormDataSource(salesTable_ds);
      #    salesTableForm.parmArgs(this.args());
      #
      #    salesTableForm.parmReturnStatus(ReturnStatusHeader::Created);
      #
      #    if (formCtrl)
      #    {
      #        formCtrl.initPost();
      #    }
      #
      #    element.updateDesign(InventDimFormDesignUpdate::Init);
      #
      #    salesLineGrid.visibleColsValue(8 + conLen(inventDimFormSetup.dimFieldsActive(inventDimFormSetup.parmDimParmVisibleGrid())));
      #
      #    // Default filter on RMS Status is "All"
      #    filterRMAStatus.selection(ReturnStatusFilter::All);
      #    element.setFilterAccess();
      #
      #    salesTable_ds.query(salesTableForm.querySalesTable(salesTable_ds.query()));
      #    salesLine_ds.query(salesTableForm.querySalesLine(salesLine_ds.query()));
      #
      #    ledgerDefaultAccountController = LedgerDimensionDefaultAccountController::construct(salesLine_ds, fieldStr(SalesLine, LedgerDimension));
      #    ledgerDefaultAccountController.parmControl(Posting_LedgerDimension);
      #
      #    // Needed to check validity of address
      #    logisticsPostalAddress_ds.addFieldToSelectionList(fieldNum(LogisticsPostalAddress, ValidFrom));
      #    logisticsPostalAddress_ds.addFieldToSelectionList(fieldNum(LogisticsPostalAddress, ValidTo));
      #    logisticsPostalAddress_ds.addFieldToSelectionList(fieldNum(LogisticsPostalAddress, CountryRegionId));
      #    if (isConfigurationkeyEnabled(configurationKeyNum(MCRCallCenter)))
      #    {
      #        mcrCallCenterEnabled = true;
      #    }
      #}
      #
    ENDSOURCE
    SOURCE #initReturnOrderFromSalesTable
      #/// <summary>
      #/// Create return order from a sales order.
      #/// </summary>
      #/// <param name="_salesTable">
      #/// Source original sales order record
      #/// </param>
      #/// <returns>
      #/// Return salesTable of return order
      #/// </returns>
      #/// <remarks>
      #/// Fix against the DCR [Bug 3213231:Generate RMA only opens the return order form]
      #/// </remarks>
      #public SalesTable initReturnOrderFromSalesTable(SalesTable _salesTable)
      #{
      #    SalesLine           salesLineSource, returnLine;
      #    SalesTable          returnTable;
      #    CustInvoiceTrans    custInvoiceTrans;
      #    SalesQty            totalReturnQty = 0;
      #    PdsCWInventQty      cwTotalReturnQty = 0;
      #
      #    if ((!_salesTable) || (_salesTable.SalesType == SalesType::ReturnItem))
      #    {
      #        error("@SYP4882903");
      #        return returnTable;
      #    }
      #
      #    ttsbegin;
      #    try
      #    {
      #        returnTable.initValue(SalesType::ReturnItem);
      #
      #        returnTable.initReturnFromSalesTable(_salesTable);
      #
      #        SalesCalcAvailableDlvDates::initDateFields(returnTable);
      #
      #        returnTable.setReturnAddressFromInventLocationId(returnTable.InventLocationId);
      #
      #        returnTable.DeliveryDateControlType = SalesParameters::find().DeliveryDateControlType;
      #        returnTable.InventLocationId        = _salesTable.InventLocationId;
      #        returnTable.InventSiteId            = _salesTable.InventSiteId;
      #
      #        if(returnTable.validateWrite())
      #        {
      #            returnTable.insert();
      #        }
      #        else
      #        {
      #            throw error("@SYS18722");
      #        }
      #
      #        // Create return line for invoiced qty of sales line
      #        while select * from salesLineSource
      #            join LedgerDimension from custInvoiceTrans
      #            where custInvoiceTrans.InventTransId == salesLineSource.InventTransId
      #            && salesLineSource.SalesId == _salesTable.SalesId
      #        {
      #            totalReturnQty   = 0;
      #            cwTotalReturnQty = 0;
      #
      #            // Calculate already return quantity against salesline
      #            [totalReturnQty, cwTotalReturnQty] = SalesLine::pdsRemainReturnLotQtyAllCreditNote(
      #                                                            salesLineSource.InventTransId,
      #                                                            salesLineSource.ProjId,
      #                                                            salesLineSource.SalesUnit);
      #
      #            if ((totalReturnQty < salesLineSource.invoicedInTotal()) || (cwTotalReturnQty < salesLineSource.pdsCWInvoicedInTotal()))
      #            {
      #                returnLine.clear();
      #
      #                returnLine.initValue(SalesType::ReturnItem);
      #
      #                // Copy from sales line
      #                returnLine.initFromSalesLine(salesLineSource);
      #
      #                // Update with return order header information
      #                returnLine.initFromSalesTable(returnTable);
      #
      #                returnLine.LedgerDimension          = custInvoiceTrans.LedgerDimension;
      #                returnLine.RefReturnInvoiceTrans_W  = custInvoiceTrans.RecId;
      #                returnLine.InventTransIdReturn      = salesLineSource.InventTransId;
      #
      #                returnLine.SalesQty    = 0;
      #                returnLine.QtyOrdered  = 0;
      #                returnLine.PdsCWQty    = 0;
      #
      #                // Check Item type
      #                if (pdsIsCWItem(salesLineSource.ItemId))
      #                {
      #                    returnLine.PdsCWExpectedRetQty  = -1 * (salesLineSource.pdsCWInvoicedInTotal() - cwTotalReturnQty); //Available quantity to return
      #                    returnLine.pdsCWExpRetQtyConversion();
      #                }
      #                else
      #                {
      #                    returnLine.ExpectedRetQty       = -1 * (salesLineSource.invoicedInTotal() - totalReturnQty); //Available quantity to return
      #                }
      #
      #                returnLine.SalesPrice  = Currency::curPrice2CurPrice(returnLine.SalesPrice, salesLineSource.CurrencyCode, returnLine.CurrencyCode);
      #                returnLine.LineAmount  = returnLine.returnLineAmount();
      #                SalesCalcAvailableDlvDates::initDateFields(returnLine);
      #
      #                returnLine.createLine(true, false, false, false, false, false, _salesTable.Reservation == ItemReservation::Automatic, true
      #                    , ''                // _oldInventTransId
      #                    , false             // _ignoreSalesTableInventDim
      #                    , true              // _setLineNum
      #                    , true              // _searchAgreementLine
      #                    , null              // _smaServiceOrderTable
      #                    , 0                 // _oldAgreementLineRecId
      #                    , salesLineSource.InventTransId); // _mcrExchangeInventRefTransId*/
      #            }
      #        }
      #        ttscommit;
      #    }
      #    catch
      #    {
      #        ttsAbort;
      #        throw error("@SYS18722");
      #    }
      #
      #    return returnTable;
      #}
    ENDSOURCE
    SOURCE #interCompanyIsPriceDiscSearchNeeded
      #RecId interCompanyIsPriceDiscSearchNeeded()
      #{
      #    return interCompanyIsPriceDiscSearchNeeded;
      #}
    ENDSOURCE
    SOURCE #inventDimSetupObject
      #Object inventDimSetupObject()
      #{
      #    return inventDimFormSetup;
      #}
    ENDSOURCE
    SOURCE #mcrCheckExchComplete
      #/// <summary>
      #/// Bypasses the sales order form and performs the complete logic.
      #/// </summary>
      #/// <param name="_salesTableExch">
      #/// The sales order table.
      #/// </param>
      #/// <param name="_allowOpenOrdersOff">
      #/// <c>Boolean</c> to declare whether a sales order can be in an open status; optional.
      #/// </param>
      #/// <returns>
      #/// true if the exchange can be completed; otherwise, false.
      #/// </returns>
      #/// <exception cref="Exception::Error">
      #/// Throw error when the order has a continuity item on it and there is
      #/// a total discount.
      #/// </exception>
      #/// <exception cref="Exception::Error">
      #/// Throws an error after all lines have been processed so that all error messages are visible.
      #/// </exception>
      #boolean mcrCheckExchComplete(SalesTable _salesTableExch, boolean _allowOpenOrdersOff = false)
      #{
      #    SalesLine               salesLineExch;
      #    LogisticsPostalAddress  logisticsPostalAddressExch;
      #
      #    if(mcrCallCenterEnabled)
      #    {
      #        // one or more sales lines must exist
      #        if (!SalesLine::exist(_salesTableExch.SalesId))
      #        {
      #            if (_allowOpenOrdersOff)
      #            {
      #                info("@MCR23354");
      #            }
      #            warning("@MCR10878");
      #            return false;
      #        }
      #
      #        // Throw error when the order has a continuity item on it and there is
      #        // a total discount.
      #        if (_salesTableExch.mcrSalesTable().ContinuityOrder && _salesTableExch.DiscPercent)
      #        {
      #            if (_allowOpenOrdersOff)
      #            {
      #                info("@MCR23354");
      #            }
      #
      #            throw error("@MCR12950");
      #        }
      #
      #        logisticsPostalAddressExch = salesLineExch.deliveryAddress();
      #    }
      #    return true;
      #}
    ENDSOURCE
    SOURCE #mcrCheckOpenOrder
      #/// <summary>
      #/// Determines if the current order has
      #///     been processed.
      #/// </summary>
      #/// <returns>
      #/// true if it has; otherwise, false.
      #/// </returns>
      #/// <remarks>
      #/// Criteria that stops a user from being able to switch records or close:
      #/// 1. Parameter enabledOrderCompletion is marked.
      #/// 2. Order is in a backOrder status.
      #/// 3. Order is stopped.
      #/// 4. Order is not on hold.
      #/// 3. Order payments either do not exist or have not been proessed.
      #/// </remarks>
      #public boolean mcrCheckOpenOrder()
      #{
      #    if (mcrCallCenterEnabled)
      #    {
      #        // if the status of the order being evaluated has had
      #        // its status changed to something other than open order
      #        // (backorder) clear out the buffer which indicates an open order.
      #        element.mcrClearOpenReturnBuffer();
      #
      #        // if enable order completion is on and
      #        // if the focus is on an open order that the user just created and
      #        //the user chooses to add a new record, stop them and make the user change
      #        //the previous orders status
      #        if (openReturnSalesTable
      #            && enableOrderCompletion)
      #        {
      #            element.mcrForceCompleteReturn();
      #            if (openReturnSalesTable)
      #            {
      #                return false;
      #            }
      #        }
      #    }
      #    return true;
      #}
      #
    ENDSOURCE
    SOURCE #mcrClearOpenReturnBuffer
      #/// <summary>
      #///     Clears the open return buffer which indicates
      #///     if the return is currently in an open order status.
      #/// </summary>
      #/// <remarks>
      #/// If the status of the return being evaluated has had
      #/// its status changed to something other than open order
      #/// (backorder) clear out the buffer which indicates an open order.
      #/// </remarks>
      #void mcrClearOpenReturnBuffer()
      #{
      #    if (mcrCallCenterEnabled)
      #    {
      #        // Since we allow deletes, make sure we are still on the original
      #        // sales order.  If not, clear the buffer.
      #        if (salesTable.RecId == openReturnSalesTable.RecId
      #            && enableOrderCompletion)
      #        {
      #            if (salesTable.mcrOrderProcessed())
      #            {
      #                openReturnSalesTable = null;
      #            }
      #        }
      #        else
      #        {
      #            openReturnSalesTable = null;
      #        }
      #    }
      #}
    ENDSOURCE
    SOURCE #mcrComplete
      #void mcrComplete()
      #{
      #    FormRun                     formRun;
      #    Args                        formArgs;
      #    SalesLine                   salesLineExch;
      #    SalesTable                  salesTableExch;
      #    SalesTableType_ReturnItem   salesTableType_ReturnItem;
      #
      #    if (mcrCallCenterEnabled)
      #    {
      #        salesTableType_ReturnItem = new SalesTableType_ReturnItem(SalesTable);
      #
      #        // one or more return lines with qty must exist
      #        select firstonly RecId from salesLineExch
      #            where   salesLineExch.SalesId == SalesTable.SalesId &&
      #                    salesLineExch.ExpectedRetQty != 0;
      #
      #        if (!salesLineExch)
      #        {
      #            warning("@MCR23022");
      #            return;
      #        }
      #
      #        // Call the Return Recap form for the user to submit the return.
      #        formArgs = new Args(formstr(MCRReturnRecap));
      #        formArgs.caller(this);
      #        formArgs.record(SalesTable);
      #
      #        formRun = classFactory.formRunClass(formArgs);
      #
      #        element.mcrLockForm(true);
      #
      #        try
      #        {
      #            if (salesTableType_ReturnItem.mcrValidateComplete())
      #            {
      #                formRun.init();
      #                formRun.run();
      #                formRun.wait();
      #            }
      #        }
      #        catch
      #        {
      #            ExceptionTextFallThrough();
      #        }
      #
      #        element.mcrLockForm(false);
      #
      #        if (SalesTable.ReturnReplacementId)
      #        {
      #            salesTableExch = SalesTable::find(SalesTable.ReturnReplacementId, true);
      #            // If no exchange table don't complete exchange.
      #            if (salesTableExch)
      #            {
      #                this.mcrCompleteExchange(salesTableExch);
      #            }
      #        }
      #
      #        // Prevent open returns.
      #        if (salesTable.SalesStatus != SalesStatus::Backorder)
      #        {
      #            openReturnSalesTable = null;
      #        }
      #
      #        // Close the form if the return has changed status.
      #        SalesTable_ds.reread();
      #        if (element.args().record() &&  SalesTable.SalesStatus != SalesStatus::Backorder)
      #        {
      #            element.close();
      #        }
      #        else // don't allow an open return - leave the form open.
      #        {
      #            SalesTable_ds.refresh();
      #            SalesLine_ds.executeQuery();
      #
      #            element.mcrSetHeaderControls();
      #            element.mcrSetLineControls();
      #        }
      #    }
      #}
    ENDSOURCE
    SOURCE #mcrCompleteExchange
      #/// <summary>
      #/// Bypasses the sales order form to complete the exchange on the return form.
      #/// </summary>
      #/// <param name="_salesTableExch">
      #/// The sales order record.
      #/// </param>
      #/// <param name="_allowOpenOrdersOff">
      #/// <c>Boolean</c> to declare whether a sales order can be in an open status; optional.
      #/// </param>
      #void mcrCompleteExchange(SalesTable _salesTableExch, boolean _allowOpenOrdersOff = false)
      #{
      #    boolean allowOpenOrders;
      #
      #    if (mcrCallCenterEnabled)
      #    {
      #        allowOpenOrders = RetailMCRChannelTable::mcrEnableOrderCompletion(_salesTableExch);
      #
      #        startLengthyOperation();
      #
      #        if (!element.mcrCheckExchComplete(_salesTableExch, allowOpenOrders))
      #        {
      #            return;
      #        }
      #
      #        this.mcrCompleteExchMarkupTransCalc(_salesTableExch);
      #
      #        endLengthyOperation();
      #    }
      #}
    ENDSOURCE
    SOURCE #mcrCompleteExchMarkupTransCalc
      #/// <summary>
      #///     Begins the order completion process.
      #/// </summary>
      #/// <param name="_salesTableExch">
      #/// The sales order record.
      #/// </param>
      #/// <remarks>
      #///     Assumption is that coupons and discounts do not use MCRSalesOrderTotals
      #///     so call to outdated could come after them but before estimate and RBI
      #///     Order restrictions shown below: (as in B must precede C, D, E)
      #///     A) updateFinalDisc
      #///     B) Calculate coupons
      #///     C) Outdate totals (previous steps could have changed)
      #///     D) setEstimate (creates a totals object)
      #///     E) MCRUpdateRBI (creates a totals object).
      #/// </remarks>
      #void mcrCompleteExchMarkupTransCalc(SalesTable _salesTableExch)
      #{
      #    MCRCouponTrans          mcrCouponTrans;
      #
      #    if (mcrCallCenterEnabled)
      #    {
      #        // Only calc the total if the order is in an open status.
      #        // All other statuses do not need to recalculate the coupon amount.
      #        if (_salesTableExch.SalesStatus == SalesStatus::Backorder)
      #        {
      #            mcrCouponTrans = new mcrCouponTrans();
      #            mcrCouponTrans.parmSalesTable(_salesTableExch);
      #            mcrCouponTrans.writeMarkUpTrans();
      #        }
      #
      #        // Calculate total discount
      #        _salesTableExch.updateFinalDisc();
      #
      #        // Update the estimated amount if needed.
      #        _salesTableExch.setEstimate();
      #
      #        _salesTableExch.update();
      #    }
      #}
    ENDSOURCE
    SOURCE #mcrForceCompleteReturn
      #/// <summary>
      #/// Completes the return order of the order parameters are set to order completion process.
      #/// </summary>
      #/// <remarks>
      #/// If the status of the return being evaluated has had
      #/// its status changed to something other than open order
      #/// (backorder) clear out the buffer which indicates an open order.
      #/// </remarks>
      #void mcrForceCompleteReturn()
      #{
      #    if (mcrCallCenterEnabled
      #        && !salesTable.mcrOrderProcessed())
      #    {
      #        element.mcrComplete();
      #        element.mcrClearOpenReturnBuffer();
      #    }
      #}
    ENDSOURCE
    SOURCE #mcrLockForm
      #/// <summary>
      #///     Locks or unlocks the entire form.
      #/// </summary>
      #/// <param name="_lock">
      #///     <c>Boolean</c> to set the lock.
      #/// </param>
      #void mcrLockForm(boolean _lock)
      #{
      #    if (mcrCallCenterEnabled)
      #    {
      #        Tab.enabled(!_lock);
      #    }
      #}
    ENDSOURCE
    SOURCE #mcrSetHeaderControls
      #/// <summary>
      #///     Sets the visible, enable, etc. control
      #///     properties for controls at the header level.
      #/// </summary>
      #void mcrSetHeaderControls()
      #{
      #    boolean     statusAllowsUpdate;
      #    boolean     statusIsOpen;
      #    boolean     exchangeExists, returnExists;
      #
      #    statusAllowsUpdate = SalesTable.SalesStatus == SalesStatus::Backorder
      #        && (!enableOrderCompletion
      #        || SalesTable.MCROrderStopped == NoYes::Yes);
      #    statusIsOpen = (openReturnSalesTable.RecId != 0);
      #    exchangeExists = SalesTable.ReturnReplacementId ? true: false;
      #    returnExists = SalesTable.RecId ? true: false;
      #
      #    // Lock elements for performance while changing display.
      #    element.lock();
      #
      #    if (enableOrderCompletion)
      #    {
      #        MCRButtonComplete.enabled(returnExists
      #            && SalesTable.SalesStatus == SalesStatus::Backorder
      #            && SalesTable.MCROrderStopped == NoYes::Yes);
      #
      #        MCRButtonModify.enabled(!MCRButtonComplete.enabled());
      #
      #        if (MCRButtonModify.enabled())
      #        {
      #            MCRButtonModify.enabled((SalesTable.MCROrderStopped == NoYes::No
      #                && SalesTable.SalesStatus == SalesStatus::Backorder)
      #                || SalesTable.ReturnStatus == ReturnStatusHeader::Created);
      #        }
      #
      #        SalesTable_ds.allowEdit(statusAllowsUpdate);
      #
      #        MCRReturnSalesTable_ds.object(fieldNum(MCRReturnSalesTable, AdvanceCredit)).
      #        allowEdit(!exchangeExists && statusAllowsUpdate);
      #        MCRReturnSalesTable_ds.object(fieldNum(MCRReturnSalesTable, AdvanceExchange)).
      #            allowEdit(exchangeExists && statusAllowsUpdate);
      #        MCRReturnSalesTable_ds.object(fieldNum(MCRReturnSalesTable, ApplyCreditToExchange)).
      #            allowEdit(exchangeExists && statusAllowsUpdate);
      #    }
      #    element.redraw();
      #    element.unLock();
      #}
    ENDSOURCE
    SOURCE #mcrSetLineControls
      #/// <summary>
      #///     Sets the visible, enable, etc. control
      #///     properties for controls at the line level.
      #/// </summary>
      #void mcrSetLineControls()
      #{
      #    boolean     statusAllowsUpdate;
      #    boolean     exchangeExists, returnExists;
      #    boolean     selectedForReturn;
      #    boolean     isQuarantineControlled;
      #
      #    if (mcrCallCenterEnabled)
      #    {
      #        statusAllowsUpdate = SalesTable.SalesStatus == SalesStatus::Backorder;
      #        exchangeExists = SalesTable.ReturnReplacementId ? true: false;
      #        returnExists = SalesTable.RecId ? true: false;
      #
      #        isQuarantineControlled = InventModelGroup::find(InventTable::find(salesLine.ItemId).ModelGroupId()).QuarantineControl == NoYes::Yes;
      #
      #        selectedForReturn = salesLine.ExpectedRetQty < 0;
      #
      #        // Lock elements for performance while changing display.
      #        element.lock();
      #
      #        InventDim_ds.allowEdit(statusAllowsUpdate);
      #
      #        //Check Advacne credit
      #        MCRReturnSalesTable_ds.object(fieldNum(MCRReturnSalesTable, AdvanceCredit)).allowEdit(!exchangeExists
      #                                                                                        && statusAllowsUpdate);
      #        MCRReturnSalesTable_ds.object(fieldNum(MCRReturnSalesTable, AdvanceExchange)).allowEdit(exchangeExists
      #                                                                                        && statusAllowsUpdate);
      #        MCRReturnSalesTable_ds.object(fieldNum(MCRReturnSalesTable, ApplyCreditToExchange)).allowEdit(exchangeExists
      #                                                                                        && statusAllowsUpdate);
      #
      #        element.redraw();
      #        element.unLock();
      #    }
      #}
    ENDSOURCE
    SOURCE #parmPostalAddressLocation
      #public LogisticsLocationRecId parmPostalAddressLocation(LogisticsLocationRecId _postalAddressLocation = 0)
      #{
      #    if (!_postalAddressLocation)
      #    {
      #        // Set location by active datasource
      #        if (element.dataSource().name() == salesLine_ds.name())
      #        {
      #            _postalAddressLocation = salesLine.deliveryLocation();
      #        }
      #        else
      #        {
      #            _postalAddressLocation = salesTable.deliveryLocation();
      #        }
      #    }
      #
      #    postalAddressLocation = _postalAddressLocation;
      #    return postalAddressLocation;
      #}
    ENDSOURCE
    SOURCE #setEditItemCategoryAllowed
      #void setEditItemCategoryAllowed(boolean _allowEdit)
      #{
      #    salesLine_ds.object(fieldNum(SalesLine, ItemId)).allowEdit(_allowEdit);
      #    salesLine_ds.object(fieldNum(SalesLine, SalesCategory)).allowEdit(_allowEdit);
      #}
    ENDSOURCE
    SOURCE #setFilterAccess
      #void setFilterAccess()
      #{
      #    boolean     enterDate;
      #
      #    enterDate = filterRMAStatus.selection() != ReturnStatusFilter::All;
      #
      #    filterDate.allowEdit(enterDate);
      #}
    ENDSOURCE
    SOURCE #setHeaderDataSourceAccess
      #/// <summary>
      #///     Sets the access to the SalesTable data source.
      #/// </summary>
      #/// <remarks>
      #///     Access is set based on status and whether the form is called from another sales order record.
      #/// </remarks>
      #public void setHeaderDataSourceAccess()
      #{
      #    boolean     allowAccountEdit;
      #
      #    salesTable_ds.allowEdit(salesTableForm.editHeaderAllowed());
      #
      #    allowAccountEdit = salesTable.type().editCustAccount();
      #    salesTable_ds.object(fieldNum(SalesTable, CustAccount)).allowEdit(allowAccountEdit);
      #    salesTable_ds.object(fieldNum(SalesTable, CustAccount)).skip(!allowAccountEdit);
      #}
    ENDSOURCE
    SOURCE #setHeaderSiteLocationAccess
      #void setHeaderSiteLocationAccess()
      #{
      #    salesTable_ds.object(fieldNum(SalesTable, InventSiteId)).allowEdit(salesTable.ReturnStatus == ReturnStatusHeader::Created);
      #    salesTable_ds.object(fieldNum(SalesTable, InventLocationId)).allowEdit(salesTable.ReturnStatus == ReturnStatusHeader::Created);
      #}
    ENDSOURCE
    SOURCE #setLineDataSourceAccess
      #/// <summary>
      #///     Sets the access to the SalesLine data source.
      #/// </summary>
      #/// <remarks>
      #///     Access is set based mainly on status of the return order header.
      #/// </remarks>
      #public void setLineDataSourceAccess()
      #{
      #    element.setEditItemCategoryAllowed(salesLine.RecId? false : true);
      #
      #    salesLine_ds.allowCreate(salesTableForm.createLineAllowed(salesLine));
      #    salesLine_ds.allowEdit(salesTableForm.editLineAllowed());
      #    salesLine_ds.allowDelete(salesTableForm.deleteLineAllowed(salesLine));
      #}
    ENDSOURCE
    SOURCE #setTitleText
      #/// <summary>
      #/// Sets proper title for the Return Order details form.
      #/// </summary>
      #public void setTitleText()
      #{
      #    headerTitle.text(strFmt('%1 : %2 - %3',
      #                            salesTable.SalesId,
      #                            salesTable.CustAccount,
      #                            salesTable.customerName()));
      #}
    ENDSOURCE
    SOURCE #updateDesign
      #void updateDesign(InventDimFormDesignUpdate _mode)
      #{
      #    InventMovement movement = InventMovement::construct(salesLine);
      #
      #    switch (_mode)
      #    {
      #        case InventDimFormDesignUpdate::Init :
      #            if (!inventDimFormSetup)
      #            {
      #                inventDimFormSetup = InventDimCtrl_Frm_Mov_OrderLine::newFromFormMovement(element, movement);
      #            }
      #
      #        case InventDimFormDesignUpdate::Active :
      #            inventDimFormSetup.formActiveSetup(movement.inventDimGroupSetup(), movement);
      #            inventDimFormSetup.formSetControls(true);
      #            break;
      #
      #        case InventDimFormDesignUpdate::FieldChange :
      #            inventDimFormSetup.formActiveSetup(movement.inventDimGroupSetup(), movement);
      #            inventDimFormSetup.formSetControls(false);
      #            break;
      #
      #        default :
      #            // Incorrect parameter for the function %1
      #            throw error(strFmt("@SYS54195", funcName()));
      #    }
      #}
    ENDSOURCE
  ENDMETHODS
  OBJECTBANK
    PROPERTIES
    ENDPROPERTIES
    
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #SalesTable
          Table               #SalesTable
          Index               #SalesTypeIdx
          StartPosition       #Last
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD InventLocationId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    salesTable_ds.refresh();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventSiteId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    salesTable_ds.refresh();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD DeliveryPostalAddress
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    Common ret;
                #    LogisticsLocationSelectionLookup_Purch lookup;
                #
                #    lookup = LogisticsLocationSelectionLookup_Purch::newParameters(_formReferenceControl);
                #
                #    lookup.parmInventSiteId(salesTable.InventSiteId);
                #    lookup.parmInventLocationId(salesTable.InventLocationId);
                #
                #    lookup.addRoleByType(LogisticsLocationRoleType::Delivery);
                #    lookup.parmReturnLocation(false);
                #
                #    ret = lookup.performFormLookup();
                #    return ret;
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    salesTable_ds.refresh();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD WorkerSalesTaker
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #resolveReference
                #public Common resolveReference(FormReferenceControl _formReferenceControl)
                #{
                #    Common ret;
                #
                #    ret = super(_formReferenceControl);
                #
                #    if (!ret.RecId || !HcmWorkerLookup::newOnlyActiveWorkers().validateWorker(ret.RecId))
                #    {
                #        ret.clear();
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    return HcmWorkerLookup::newOnlyActiveWorkers().lookupWorker(_formReferenceControl);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD WorkerSalesResponsible
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    return HcmWorkerLookup::newOnlyActiveWorkers().lookupWorker(_formReferenceControl);
                #}
              ENDSOURCE
              SOURCE #resolveReference
                #public Common resolveReference(FormReferenceControl _formReferenceControl)
                #{
                #    Common ret;
                #
                #    ret = super(_formReferenceControl);
                #
                #    if (!ret.RecId || !HcmWorkerLookup::newOnlyActiveWorkers().validateWorker(ret.RecId))
                #    {
                #        ret.clear();
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #leaveRecord
          #public boolean leaveRecord(boolean _forceUpdate = false)
          #{
          #    boolean ret;
          #
          #    ret = super(_forceUpdate);
          #
          #    if (mcrCallCenterEnabled)
          #    {
          #        mcrParmsSet = false;
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    int ret;
          #
          #    ret = super();
          #
          #    salesTableForm.salesTable(salesTable);
          #
          #    this.editSales();
          #
          #    salesTable_ds.rereadReferenceDataSources();
          #
          #    element.setHeaderDataSourceAccess();
          #
          #    salesTableForm.interCompanyAllowIndirectCreationOrig(interCompanyAllowIndirectCreationOrig);
          #
          #    element.design().caption(strFmt("@SYS106617", salesTable.ReturnItemNum, salesTableForm.captionName()));
          #    element.setHeaderSiteLocationAccess();
          #    element.setTitleText();
          #
          #    if (mcrCallCenterEnabled)
          #    {
          #        if (!mcrParmsSet)
          #        {
          #            enableDirectedSelling = RetailMCRChannelTable::mcrEnableDirectedSelling(salesTable);
          #            enableOrderPriceControl = RetailMCRChannelTable::mcrEnableOrderPriceControl(salesTable);
          #            enableOrderCompletion = RetailMCRChannelTable::mcrEnableOrderCompletion(salesTable);
          #
          #            mcrPriceMatched.enabled(enableOrderPriceControl);
          #
          #            // Enable, disable buttons as needed for the order completion process
          #            mcrButtonComplete.enabled(enableOrderCompletion);
          #            mcrButtonModify.enabled(enableOrderCompletion);
          #
          #            mcrReturnSalesTable_ds.object(fieldNum(MCRReturnSalesTable, AdvanceCredit)).
          #                enabled(enableOrderCompletion);
          #            mcrReturnSalesTable_ds.object(fieldNum(MCRReturnSalesTable, AdvanceExchange)).
          #                enabled(enableOrderCompletion);
          #            mcrReturnSalesTable_ds.object(fieldNum(MCRReturnSalesTable, ApplyCreditToExchange)).
          #                enabled(enableOrderCompletion);
          #            mcrParmsSet = true;
          #        }
          #        element.mcrSetHeaderControls();
          #    }
          #
          #    // If caller form is Find sales order and user is trying to create a return order
          #    if (element.args().menuItemName() == menuitemDisplayStr(MCRCreateReturnOrder))
          #    {
          #        // Don't allow open returns.
          #        if (mcrCallCenterEnabled && enableOrderCompletion)
          #        {
          #            openReturnSalesTable = salesTable;
          #        }
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #create
          #void create(boolean _append = true)
          #{
          #    SalesTable   newSalesTable;
          #
          #    // Don't allow open returns.
          #    if(mcrCallCenterEnabled
          #        && !element.mcrCheckOpenOrder())
          #    {
          #        return;
          #    }
          #
          #    this.editSales();
          #
          #    if (salesTableForm.create())
          #    {
          #        salesTableForm.interCompanyAutoCreateOrders();
          #
          #        newSalesTable = SalesTable::find(salesTableForm.salesTable().SalesId,true);
          #
          #        if (newSalesTable)
          #        {
          #            newSalesTable.setReturnAddressFromInventLocationId(newSalesTable.InventLocationId);
          #            newSalesTable.update();
          #            super(_append);
          #
          #            salesTable.data(newSalesTable);
          #            element.args().record(salesTable);
          #            // update misc charges according to Reason code
          #            if (salesTable.ReturnReasonCodeId)
          #            {
          #                salesTable.modifiedField(fieldNum(SalesTable,ReturnReasonCodeId));
          #            }
          #
          #            salesTable_ds.rereadReferenceDataSources();
          #
          #            // <GEERU>
          #            if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
          #            {
          #                salesTable_RU.data(SysExtensionSerializerExtensionMap::findByBase(salesTable_RU.TableId,
          #                                                                                  salesTable.RecId,
          #                                                                                  true));
          #                salesTable_RU_DS.rereadReferenceDataSources();
          #            }
          #            // </GEERU>
          #
          #            //we should update the caption before set focus
          #            element.design().caption(strFmt("@SYS106617", salesTable.ReturnItemNum, salesTableForm.captionName()));
          #            lineViewLines.setFocus();
          #            // Don't allow open returns.
          #            if (mcrCallCenterEnabled)
          #            {
          #                mcrParmsSet = false;
          #                if (enableOrderCompletion)
          #                {
          #                    openReturnSalesTable = salesTable;
          #                }
          #            }
          #        }
          #    }
          #    else
          #    {
          #        if (TradeFormHelper::isCalledFromForm(element.args()))
          #        {
          #            element.close();
          #        }
          #    }
          #}
        ENDSOURCE
        SOURCE #editSales
          #public void editSales()
          #{
          #    element.setHeaderSiteLocationAccess();
          #    element.setLineDataSourceAccess();
          #
          #    if (mcrCallCenterEnabled)
          #    {
          #        element.mcrSetHeaderControls();
          #        element.mcrSetLineControls();
          #    }
          #}
        ENDSOURCE
        SOURCE #executeQuery
          #public void executeQuery()
          #{
          #    this.setFilter();
          #
          #    logisticsPostalAddress_ds.validTimeStateUpdate(ValidTimeStateUpdate::Correction);
          #    logisticsPostalAddress_ds.query().validTimeStateDateTimeRange(DateTimeUtil::minValue(),
          #                                                                  DateTimeUtil::maxValue());
          #
          #    super();
          #}
        ENDSOURCE
        SOURCE #init
          #public void init()
          #{
          #    super();
          #
          #    // Add range for filtering on RMA status
          #    qbrRMAStatusFilter = this.query().dataSourceTable(tableNum(SalesTable)).addRange(fieldNum(SalesTable, ReturnStatus));
          #
          #    // Add range for filtering on CreatedDate
          #    qbrCreatedDateFilter = this.query().dataSourceTable(tableNum(SalesTable)).addRange(fieldNum(SalesTable, CreatedDateTime));
          #}
        ENDSOURCE
        SOURCE #first
          #/// <summary>
          #/// Selects the first record on the sales table.
          #/// </summary>
          #/// <returns>
          #/// The first record on the sales table.
          #/// </returns>
          #/// <remarks>
          #/// This is not allowed if the user has an open return.
          #/// </remarks>
          #public int first()
          #{
          #    int ret;
          #
          #    if (mcrCallCenterEnabled
          #        && openReturnSalesTable
          #        && enableOrderCompletion)
          #    {
          #        return ret;
          #    }
          #
          #    ret = super();
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #last
          #/// <summary>
          #/// Selects the last record on the sales table.
          #/// </summary>
          #/// <returns>
          #/// The last record on the sales table.
          #/// </returns>
          #/// <remarks>
          #/// This is not allowed if the user has an open return.
          #/// </remarks>
          #public int last()
          #{
          #    int ret;
          #
          #    if (mcrCallCenterEnabled
          #        && openReturnSalesTable
          #        && enableOrderCompletion)
          #    {
          #        return ret;
          #    }
          #
          #    ret = super();
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #leave
          #public boolean leave()
          #{
          #    boolean ret;
          #
          #    ret = super();
          #
          #    salesTableForm.interCompanyAutoCreateOrders();
          #
          #    // Don't allow open returns.
          #    if (mcrCallCenterEnabled)
          #    {
          #        ret = ret && element.mcrCheckOpenOrder();
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #next
          #/// <summary>
          #/// Selects the next record on the sales table.
          #/// </summary>
          #/// <returns>
          #/// The next sales table record.
          #/// </returns>
          #/// <remarks>
          #/// This is not allowed if the user has an open return.
          #/// </remarks>
          #public int next()
          #{
          #    int ret;
          #
          #    if (mcrCallCenterEnabled
          #        && openReturnSalesTable
          #        && enableOrderCompletion)
          #    {
          #        return ret;
          #    }
          #
          #    ret = super();
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #nextPage
          #/// <summary>
          #/// Selects the first record on the next page of the sales table.
          #/// </summary>
          #/// <param name="_pageSize">
          #/// The page size.
          #/// </param>
          #/// <returns>
          #/// The next page.
          #/// </returns>
          #/// <remarks>
          #/// This is not allowed if the user has an open return.
          #/// </remarks>
          #public int nextPage(int _pageSize)
          #{
          #    int ret;
          #
          #    if (mcrCallCenterEnabled
          #        && openReturnSalesTable
          #        && enableOrderCompletion)
          #    {
          #        _pageSize = 0;
          #    }
          #
          #    ret = super(_pageSize);
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #prev
          #/// <summary>
          #/// Selects the previous record on the sales table.
          #/// </summary>
          #/// <returns>
          #/// The previous page.
          #/// </returns>
          #/// <remarks>
          #/// This is not allowed if the user has an open return.
          #/// </remarks>
          #public int prev()
          #{
          #    int ret;
          #
          #    if (mcrCallCenterEnabled
          #        && openReturnSalesTable
          #        && enableOrderCompletion)
          #    {
          #        return ret;
          #    }
          #
          #    ret = super();
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #reReadLines
          #void reReadLines()
          #{
          #    salesLine_ds.executeQuery();
          #}
        ENDSOURCE
        SOURCE #rereadReferenceDataSources
          #public void rereadReferenceDataSources()
          #{
          #    super();
          #    LogisticsLocationEntity::showHideEffectiveAddressMessageBar(element, logisticsPostalAddress);
          #}
        ENDSOURCE
        SOURCE #selectionChanged
          #public void selectionChanged()
          #{
          #    super();
          #
          #    salesTableForm.enableUpdateJournalButtonsMultipleOrders(salesTable,
          #        null,
          #        null,
          #        null,
          #        buttonUpdatePackingSlip,
          #        null,
          #        null,
          #        null,
          #        null,
          #        null);
          #}
        ENDSOURCE
        SOURCE #setFilter
          #/// <summary>
          #/// Passes the filter values from the form UI to the data scource query.
          #/// </summary>
          #void setFilter()
          #{
          #    switch(filterRMAStatus.selection())
          #    {
          #        case ReturnStatusFilter::All :
          #            qbrRMAStatusFilter.enabled(false);
          #        break;
          #
          #        case ReturnStatusFilter::Open :
          #            qbrRMAStatusFilter.enabled(true);
          #            qbrRMAStatusFilter.value(queryValue(ReturnStatusHeader::Open));
          #        break;
          #
          #        case ReturnStatusFilter::Created :
          #            qbrRMAStatusFilter.enabled(true);
          #            qbrRMAStatusFilter.value(queryValue(ReturnStatusHeader::Created));
          #        break;
          #
          #        case ReturnStatusFilter::Closed :
          #            qbrRMAStatusFilter.enabled(true);
          #            qbrRMAStatusFilter.value(queryValue(ReturnStatusHeader::Closed));
          #
          #        break;
          #
          #        case ReturnStatusFilter::Canceled :
          #            qbrRMAStatusFilter.enabled(true);
          #            qbrRMAStatusFilter.value(queryValue(ReturnStatusHeader::Canceled));
          #
          #        break;
          #    }
          #
          #    if (filterDate.valueStr())
          #    {
          #        qbrCreatedDateFilter.value(strFmt('..%1',queryValue(filterDate.valueStr())));
          #    }
          #}
        ENDSOURCE
        SOURCE #setTouched
          #void setTouched()
          #{
          #    // required by form MarkupTrans to communicate changes to the caller
          #    salesTableForm.setTouched(salesTable);
          #}
        ENDSOURCE
        SOURCE #validateWrite
          #boolean validateWrite()
          #{
          #    boolean         ret;
          #
          #    ret = super();
          #
          #    if (ret)
          #    {
          #        if (!salesTable.ReturnReasonCodeId && CustParameters::find().ReturnOrdersReasonReq == NoYes::Yes)
          #        {
          #            salesTable_ds.object(fieldNum(SalesTable, ReturnReasonCodeId)).mandatory(true);
          #            ret = checkFailed(strFmt("@SYS116347", fieldPName(SalesTable, ReturnReasonCodeId)));
          #        }
          #        salesTable2LineUpdatePrompt = SalesTable2LineUpdatePrompt::newFromSalesTable(salesTable);
          #
          #        if (!salesTable2LineUpdatePrompt.prompt())
          #        {
          #            ret = false;
          #        }
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #write
          #void write()
          #{
          #    DialogButton                copyAddress = DialogButton::YesToAll;
          #    boolean                     convertCurrency         = false;
          #    TradeCurencyConversion      tradeCurencyConversion  = TradeCurencyConversion::ExchRate;
          #    LogisticsPostalAddressRecId origDeliveryAddress    = salesTable.orig().DeliveryPostalAddress;
          #
          #    if (SalesLine::exist(salesTable.SalesId) || MarkupTrans::exist(salesTable.TableId, salesTable.RecId))
          #    {
          #        // Is the currency code changed
          #        if (salesTable.CurrencyCode != salesTable.orig().CurrencyCode)
          #        {
          #            // Prompt for currency conversion
          #            [convertCurrency, tradeCurencyConversion] = SalesTable::promptConvertCurrencyCode();
          #        }
          #    }
          #
          #    ttsbegin;
          #
          #    if (convertCurrency)
          #    {
          #        salesTable.convertCurrencyCode(salesTable.CurrencyCode, tradeCurencyConversion);
          #    }
          #
          #    salesTable.Touched = NoYes::No;
          #
          #    if (salesTableType)
          #    {
          #        salesTableType.formMethodDataSourceWrite(element, salesTable_ds);
          #    }
          #
          #    super();
          #
          #    salesTableForm.salesTable(salesTable);
          #
          #    if (salesTable2LineUpdatePrompt)
          #    {
          #        salesTable2LineUpdatePrompt.run();
          #        salesTable2LineUpdatePrompt = null;
          #    }
          #
          #    if (SalesLine::exist(salesTable.SalesId) && salesTable.DeliveryPostalAddress != origDeliveryAddress)
          #    {
          #        salesTable.copyAddressToLine(copyAddress, salesTable);
          #    }
          #
          #    ttscommit;
          #
          #    // Store off current open return
          #    // to prevent user from leaving return open.
          #    if (mcrCallCenterEnabled
          #        && salesTable.SalesStatus == SalesStatus::Backorder
          #        && enableOrderCompletion)
          #    {
          #        openReturnSalesTable = salesTable.data();
          #    }
          #
          #    salesTableType = null;
          #}
        ENDSOURCE
        SOURCE #displayOption
          #public void displayOption(Common _record, FormRowDisplayOption _options)
          #{
          #    MCRHoldOrderDisplayColor mcrHoldOrderDisplayColor;
          #
          #    SalesTable salesTableLocal =  _record;
          #
          #    if(salesTableLocal)
          #    {
          #        mcrHoldOrderDisplayColor = SalesParameters::find().mcrHoldOrderDisplayColor;
          #        if(mcrHoldOrderDisplayColor
          #            && MCRHoldCodeTrans::findActiveOrderHolds(salesTableLocal.SalesId))
          #        {
          #            _options.backColor(mcrHoldOrderDisplayColor);
          #        }
          #        else
          #        {
          #             _options.clearBackColor();
          #        }
          #    }
          #
          #    super(_record, _options);
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #SalesLine
          Table               #SalesLine
          Index               #SalesLineIdx
          CounterField        #LineNum
          JoinSource          #SalesTable
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD ItemId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void modified()
                #{
                #    ItemId  itemId;
                #
                #    super();
                #
                #    itemId = salesLine.ItemId;
                #
                #    salesTableForm.resetSalesLine(salesLine);
                #
                #    salesLine.ItemId = itemId;
                #
                #    salesLine_ds.setCostPriceAccess();
                #
                #    salesLine_ds.itemIdModified();
                #
                #    salesLine.LineAmount = salesLine.calcLineAmount(salesLine.ExpectedRetQty);
                #
                #    salesLine_ds.selectionChanged();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD SalesPrice
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    salesLine_ds.refresh();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD SalesUnit
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void  modified()
                #{
                #    super();
                #    interCompanyIsPriceDiscSearchNeeded = salesLine.RecId;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD Scrap
            PROPERTIES
              AllowEdit           #No
            ENDPROPERTIES
            
            METHODS
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventTransIdReturn
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #jumpRef
                #public void jumpRef()
                #{
                #    SalesLine::jumpRefInventTransIdSalesOrder(salesLine.InventTransIdReturn);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD SalesCategory
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #resolveReference
                #public Common resolveReference(FormReferenceControl _formReferenceControl)
                #{
                #    return EcoResCategory::resolveCategoryHierarchyRole(
                #        _formReferenceControl,
                #        EcoResCategoryNamedHierarchyRole::Sales);
                #}
              ENDSOURCE
              SOURCE #modified
                #/// <summary>
                #/// Initializes the sales line and resets the form controls applicable for a category based line.
                #/// </summary>
                #public void modified()
                #{
                #    SalesCategory   salesCategory;
                #
                #    // Reset line, but keep category
                #    salesCategory             = salesLine.SalesCategory;
                #
                #    salesTableForm.resetSalesLine(salesLine);
                #
                #    //Reassign saved category
                #    salesLine.SalesCategory   = salesCategory;
                #
                #    super();
                #
                #    // Enabled/disable fields
                #    salesLine_ds.changedInventoriedStatus();
                #
                #    if (salesLine.isCategoryBased())
                #    {
                #        if (salesLineForeignTradeCategory.SalesLineDataAreaId == '')
                #        {
                #            //Only create record if no one exists
                #            salesLineForeignTradeCategory_ds.allowCreate(true);
                #            salesLineForeignTradeCategory_ds.create();
                #            salesLineForeignTradeCategory_ds.allowEdit(true);
                #            salesLineForeignTradeCategory_ds.allowCreate(false);
                #        }
                #    }
                #    else
                #    {
                #        salesLineForeignTradeCategory.clearFormFields();
                #        salesLineForeignTradeCategory_ds.allowEdit(false);
                #        salesLineForeignTradeCategory_ds.refresh();
                #    }
                #}
              ENDSOURCE
              SOURCE #lookupReference
                #/// <summary>
                #/// Provides the lookup for aales category.
                #/// </summary>
                #/// <param name="_formReferenceControl">
                #/// The form control instance holding the sales category.
                #/// </param>
                #/// <returns>
                #/// An instance of the sales category table with sales category records for selection.
                #/// </returns>
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    return EcoResCategory::lookupCategoryHierarchyRole(_formReferenceControl, EcoResCategoryNamedHierarchyRole::Sales);
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          REFERENCEFIELD LedgerDimension
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #resolveReference
                #public Common resolveReference(FormReferenceControl _formReferenceControl)
                #{
                #    return ledgerDefaultAccountController.resolveReference();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD ReturnAllowReservation
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    salesLine_ds.write();
                #    return_ReturnDispositionCodeId.enabled(!salesLine.ReturnAllowReservation);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ExpectedRetQty
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #void  modified()
                #{
                #    super();
                #    interCompanyIsPriceDiscSearchNeeded = salesLine.RecId;
                #
                #    if (mcrCallCenterEnabled)
                #    {
                #        element.mcrSetLineControls();
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ReturnDispositionCodeId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    return_ReturnAllowReservation.enabled(salesLine.ReturnStatus == ReturnStatusLine::Awaiting && !salesLine.ReturnDispositionCodeId);
                #
                #    // Update inventDim with new data which has been set due to modification
                #    inventDim.data(salesLine.inventDim());
                #    inventDim_ds.setCurrent();
                #    inventDim_ds.refresh();
                #}
              ENDSOURCE
              SOURCE #lookup
                #public void lookup(FormControl _formControl, str _filterStr)
                #{
                #    Set dispositionActions = new Set(Types::Enum);
                #
                #    dispositionActions.add(DispositionAction::CreditOnly);
                #    ReturnDispositionCode::lookupDispositionCode(_formControl, _filterStr, dispositionActions);
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret && salesLine.ReturnDispositionCodeId && salesLine.ReturnDispositionCodeId != salesLine.orig().ReturnDispositionCodeId
                #        && ReturnDispositionCode::find(salesLine.ReturnDispositionCodeId).DispositionAction != DispositionAction::CreditOnly)
                #    {
                #        // The entered value '%1' is not a valid Disposition code.
                #        ret = checkFailed(strFmt("@SYS121768", salesLine.ReturnDispositionCodeId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          REFERENCEFIELD DeliveryPostalAddress
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #lookupReference
                #public Common lookupReference(FormReferenceControl _formReferenceControl)
                #{
                #    Common ret;
                #    LogisticsLocationSelectionLookup_Purch lookup;
                #
                #    lookup = LogisticsLocationSelectionLookup_Purch::newParameters(_formReferenceControl);
                #
                #    lookup.parmInventSiteId(inventDim.InventSiteId);
                #    lookup.parmInventLocationId(inventDim.InventLocationId);
                #
                #    lookup.addRoleByType(LogisticsLocationRoleType::Delivery);
                #    lookup.parmReturnLocation(false);
                #
                #    ret = lookup.performFormLookup();
                #    return ret;
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    salesLine_ds.refresh();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDREFERENCEFIELD
          
          DATAFIELD PdsCWExpectedRetQty
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #    salesLine.setExpectedReturnQuantityFromCWQuantity(inventDim);
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #active
          #int active()
          #{
          #    int     ret;
          #    boolean inventTransExist     = InventTrans::findTransId(salesLine.InventTransId).RecId;
          #    boolean wmsJournalTransExist = WMSJournalTrans::existInventTransId(salesLine.InventTransId);
          #
          #    ret = super();
          #
          #    element.setLineDataSourceAccess();
          #
          #    salesTableForm.interCompanySetLineAccess(salesLine);
          #
          #    if (!salesTable.isInterCompanyOrder())
          #    {
          #        salesLine_ds.object(fieldNum(SalesLine, SalesUnit)).allowEdit(salesLine.ReturnStatus == ReturnStatusLine::Awaiting && salesLine.InventTransIdReturn == #blank);
          #        salesLine_ds.object(fieldNum(SalesLine, SalesPrice)).allowEdit(salesLine.InventTransIdReturn == #blank);
          #        salesLine_ds.object(fieldNum(SalesLine, ExpectedRetQty)).allowEdit(salesLine.ReturnStatus == ReturnStatusLine::Awaiting);
          #    }
          #
          #    salesLine_ds.setCostPriceAccess();
          #
          #    if (formCtrl)
          #    {
          #        formCtrl.dataSourceActivePost();
          #    }
          #
          #    element.updateDesign(InventDimFormDesignUpdate::Active);
          #
          #    return_ReturnAllowReservation.enabled(salesLine.ReturnStatus == ReturnStatusLine::Awaiting && !salesLine.ReturnDispositionCodeId && !wmsJournalTransExist && salesLine.isStocked());
          #    return_ReturnDispositionCodeId.enabled(!salesLine.ReturnAllowReservation && !inventTransExist);
          #
          #    if (mcrCallCenterEnabled)
          #    {
          #        element.mcrSetLineControls();
          #    }
          #
          #    return ret;
          #}
          #
        ENDSOURCE
        SOURCE #delete
          #public void delete()
          #{
          #    SalesId salesId;
          #    boolean interCompanySalesLineExist;
          #
          #    if (salesLine.checkDelete())
          #    {
          #        salesId                    = salesLine.SalesId;
          #        interCompanySalesLineExist = salesLine.interCompanySalesLineExist();
          #
          #        super();
          #
          #        if (SalesTable::exist(salesId))
          #        {
          #            if (SalesParameters::find().DeleteHeading == NoYes::Yes && SalesTable::find(salesId).SalesStatus == SalesStatus::Invoiced)
          #            {
          #                salesTable.delete();
          #                salesTable_ds.research();
          #            }
          #            else
          #            {
          #                salesTable_ds.reread();
          #                salesTable_ds.refresh();
          #            }
          #        }
          #        else
          #        {
          #            salesTable_ds.research();
          #        }
          #
          #        salesTableForm.setTouched(salesTable);
          #    }
          #}
        ENDSOURCE
        SOURCE #changedInventoriedStatus
          #/// <summary>
          #///     Updates the form to reflect the current inventoried status inventoried status, i.e. after a change to the itemid, category, or inventoried field.
          #/// </summary>
          #/// <param name="_resetPrice">
          #///     A Boolean value that indicates whether to recalculate price and discounts; optional.
          #/// </param>
          #void changedInventoriedStatus(
          #    boolean _resetPrice = true
          #)
          #{
          #    // Update inventDim with new data which has been set due to modification
          #    inventDim.data(InventDim::find(salesLine.InventDimId));
          #
          #    salesLine.modifyInventDim(inventDim, fieldNum(InventDim,InventLocationId)
          #        , _resetPrice
          #    );
          #    InventMovement::bufferSetTransQtyUnit(salesLine);
          #    // Update inventdim fields
          #    element.updateDesign(InventDimFormDesignUpdate::FieldChange);
          #
          #    // Disable category editing if itemid is selected
          #    salesLine_ds.object(fieldNum(SalesLine, SalesCategory)).allowEdit(salesLine.ItemId == '');
          #    // Disable itemid editing if only a category is selected
          #    salesLine_ds.object(fieldNum(SalesLine, ItemId)).allowEdit(!salesLine.isCategoryBased());
          #}
          #
        ENDSOURCE
        SOURCE #create
          #void create(boolean _append = true)
          #{
          #    element.setEditItemCategoryAllowed(true);
          #
          #    if (salesTable.checkUpdate())
          #    {
          #        super(_append);
          #    }
          #
          #    if (salesLine.ItemId)
          #    {
          #        this.itemIdModified();
          #    }
          #    else if (salesLine.SalesCategory)
          #    {
          #        this.changedInventoriedStatus();
          #    }
          #
          #    salesLine_ds.refresh();
          #
          #    salesTableForm.salesLine_Create(salesLine);
          #
          #    if (salesTable)
          #    {
          #        salesLine_ItemIdGrid.setFocus();
          #    }
          #}
          #
        ENDSOURCE
        SOURCE #itemIdModified
          #void itemIdModified()
          #{
          #    salesLine.itemIdChanged();
          #    salesLine.SalesQty = 0;
          #
          #    this.changedInventoriedStatus(false);
          #    if (formCtrl)
          #    {
          #        salesLine.PdsCWQty = 0;
          #        formCtrl.fieldModified(fieldNum(SalesLine, ItemId));
          #    }
          #}
        ENDSOURCE
        SOURCE #initValue
          #void initValue()
          #{
          #    salesLine.SalesType = SalesType::ReturnItem;
          #    salesLine.initFromSalesTable(salesTable);
          #    super();
          #}
        ENDSOURCE
        SOURCE #executeQuery
          #public void executeQuery()
          #{
          #    super();
          #    if (!wasQueryExecuted)
          #    {
          #        wasQueryExecuted = true;
          #        if (salesTable)
          #        {
          #            // Note that this focus value will be overwritten if a create event will be triggered
          #            salesLine_ExpectedRetQtyGrid.setFocus();
          #        }
          #    }
          #}
        ENDSOURCE
        SOURCE #setCostPriceAccess
          #void setCostPriceAccess()
          #{
          #    salesLine_ds.object(fieldNum(SalesLine, CostPrice)).allowEdit(
          #            salesLine.InventTransIdReturn == #blank
          #        && !InventTable::find(salesLine.ItemId).modelGroup().StandardCost);
          #}
        ENDSOURCE
        SOURCE #init
          #/// <summary>
          #/// Standard Init method
          #/// </summary>
          #/// <remarks>
          #/// Method overriden to add custom form control
          #/// </remarks>
          #void init()
          #{
          #    super();
          #
          #    if (formCtrl)
          #    {
          #        formCtrl.dataSourceInitPost(salesLine);
          #    }
          #}
        ENDSOURCE
        SOURCE #write
          #void  write()
          #{
          #    SalesLine   localSalesLine;
          #
          #    try
          #    {
          #        salesLine.InventDimId = InventDim::findOrCreate(inventDim).InventDimId;
          #
          #        salesTableForm.salesLine_Write(salesLine);
          #
          #        super();
          #
          #        if (salesLine.isCategoryBased() && !salesLineForeignTradeCategory.SalesLineInventTransId)
          #        {
          #            salesLineForeignTradeCategory.initFromSalesLine(salesLine);
          #            salesLineForeignTradeCategory_ds.write();
          #            salesLine.type().updatePendingRegistrationsNonStocked(false);
          #        }
          #
          #        if (salesLine.InventDimId != inventDim.InventDimId)
          #        {
          #            inventDim.data(InventDim::find(salesLine.InventDimId));
          #            inventDim_ds.setCurrent();
          #        }
          #        if (mcrCallCenterEnabled
          #            && !mcrSalesLine.RecId)
          #        {
          #            // need to force the write in the create case since the form won't do it.
          #            mcrSalesLine.SalesLine = salesLine.RecId;
          #            mcrSalesLine_ds.write();
          #        }
          #
          #        salesLine_ds.reread();
          #
          #        if (PurchTable::find(salesLine.InventRefId).InterCompanyOrder
          #        ||  salesTable.InterCompanyOrder)
          #        {
          #            localSalesLine.data(salesLine.data());
          #            salesLine_ds.executeQuery();
          #            salesLine_ds.findRecord(localSalesLine);
          #        }
          #        salesTable_ds.reread();
          #        salesTable_ds.refresh();
          #        salesTable_ds.setTouched();
          #        element.setHeaderSiteLocationAccess();
          #
          #        interCompanyIsPriceDiscSearchNeeded = 0;
          #    }
          #    catch (Exception::Error)
          #    {
          #        //intentionally no retry. No refresh of line if error in write
          #        salesLine_ds.reread();
          #        salesTable_ds.reread();
          #    }
          #
          #    // Store off current open return
          #    // to prevent user from leaving return open.
          #    if (mcrCallCenterEnabled
          #        && salesTable.SalesStatus == SalesStatus::Backorder)
          #    {
          #        openReturnSalesTable = salesTable.data();
          #    }
          #}
        ENDSOURCE
        SOURCE #validateWrite
          #public boolean validateWrite()
          #{
          #    boolean                 ret;
          #
          #    salesTableForm.setTouched(salesTable);
          #    salesLine.InventDimId = InventDim::findOrCreate(inventDim).InventDimId;
          #
          #    ret = super();
          #
          #    ret = ret && salesTable.checkUpdate();
          #    if (!ret)
          #    {
          #        salesLine_ds.reread();
          #        salesTable_ds.reread();
          #    }
          #
          #    if (ret)
          #    {
          #       ret = salesTableForm.salesLine_validateWrite(salesLine, inventDim);
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #InventDim
          Table               #InventDim
          JoinSource          #SalesLine
          LinkType            #InnerJoin
          DelayActive         #No
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD inventBatchId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    salesLine.modifyInventDim(inventDim,fieldNum(InventDim,InventBatchId));
                #    salesLine.setExpectedReturnQuantityFromCWQuantity(inventDim);
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    ret = ret && salesLine.validateModifyInventDim(inventDim,fieldNum(InventDim,InventBatchId));
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD wMSLocationId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    salesLine.modifyInventDim(inventDim,fieldNum(InventDim,wmsLocationId));
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = salesLine.validateModifyInventDim(inventDim,fieldNum(InventDim,wmsLocationId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD wMSPalletId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    salesLine.modifyInventDim(inventDim,fieldNum(InventDim,wmsPalletId));
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = salesLine.validateModifyInventDim(inventDim,fieldNum(InventDim,wmsPalletId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD inventSerialId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    SalesCalcAvailableDlvDates salesCalcAvailableDlvDates;
                #
                #    super();
                #
                #    salesLine.modifyInventDim(inventDim,fieldNum(InventDim,InventSerialId));
                #
                #    if (salesLine.DeliveryDateControlType)
                #    {
                #        salesCalcAvailableDlvDates = SalesCalcAvailableDlvDates::newCommonSalesDlvDateType(salesLine,0,inventDim);
                #        salesCalcAvailableDlvDates.modifiedFieldBeforeInsert(salesLine);
                #    }
                #    salesLine.setExpectedReturnQuantityFromCWQuantity(inventDim);
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    ret = ret && salesLine.validateModifyInventDim(inventDim,fieldNum(InventDim,InventSerialId));
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventLocationId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    salesLine.modifyInventDim(inventDim,fieldNum(InventDim,InventLocationId));
                #
                #    if (salesLine_ds && salesLine)
                #    {
                #        salesLine_ds.refresh();
                #    }
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = salesLine.validateModifyInventDim(inventDim,fieldNum(InventDim,InventLocationId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD configId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    salesLine.modifyInventDim(inventDim,fieldNum(InventDim,ConfigId));
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = salesLine.validateModifyInventDim(inventDim,fieldNum(InventDim,ConfigId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventSizeId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    salesLine.modifyInventDim(inventDim,fieldNum(InventDim,InventSizeId));
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = salesLine.validateModifyInventDim(inventDim,fieldNum(InventDim,InventSizeId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventColorId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    salesLine.modifyInventDim(inventDim,fieldNum(InventDim,InventColorId));
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = salesLine.validateModifyInventDim(inventDim,fieldNum(InventDim,InventColorId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventSiteId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    salesLine.modifyInventDim(inventDim,fieldNum(InventDim,InventSiteId));
                #    salesLine_ds.refresh();
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = salesLine.validateModifyInventDim(inventDim,fieldNum(InventDim,InventSiteId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventGtdId_RU
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    SalesCalcAvailableDlvDates salesCalcAvailableDlvDates;
                #
                #    super();
                #
                #    salesLine.modifyInventDim(inventDim, fieldNum(InventDim, InventGtdId_RU));
                #
                #    if (salesLine.DeliveryDateControlType)
                #    {
                #        salesCalcAvailableDlvDates = SalesCalcAvailableDlvDates::newCommonSalesDlvDateType(salesLine, 0, inventDim);
                #        salesCalcAvailableDlvDates.modifiedFieldBeforeInsert(salesLine);
                #    }
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = salesLine.validateModifyInventDim(inventDim, fieldNum(InventDim, InventGtdId_RU));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventProfileId_RU
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = salesLine.validateModifyInventDim(inventDim, fieldNum(InventDim, InventProfileId_RU));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
              SOURCE #modified
                #public void modified()
                #{
                #    SalesCalcAvailableDlvDates salesCalcAvailableDlvDates;
                #
                #    super();
                #
                #    salesLine.modifyInventDim(inventDim, fieldNum(InventDim, InventProfileId_RU));
                #
                #    if (salesLine.DeliveryDateControlType)
                #    {
                #        salesCalcAvailableDlvDates = SalesCalcAvailableDlvDates::newCommonSalesDlvDateType(salesLine,0,inventDim);
                #        salesCalcAvailableDlvDates.modifiedFieldBeforeInsert(salesLine);
                #    }
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventOwnerId_RU
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    SalesCalcAvailableDlvDates salesCalcAvailableDlvDates;
                #
                #    super();
                #
                #    salesLine.modifyInventDim(inventDim, fieldNum(InventDim, InventOwnerId_RU));
                #
                #    if (salesLine.DeliveryDateControlType)
                #    {
                #        salesCalcAvailableDlvDates = SalesCalcAvailableDlvDates::newCommonSalesDlvDateType(salesLine, 0, inventDim);
                #        salesCalcAvailableDlvDates.modifiedFieldBeforeInsert(salesLine);
                #    }
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    ret = ret && salesLine.validateModifyInventDim(inventDim, fieldNum(InventDim, InventOwnerId_RU));
                #
                #    return ret;
                #}
                #
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD InventStyleId
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    salesLine.modifyInventDim(inventDim,fieldNum(InventDim,InventStyleId));
                #}
              ENDSOURCE
              SOURCE #validate
                #public boolean validate()
                #{
                #    boolean ret;
                #
                #    ret = super();
                #
                #    if (ret)
                #    {
                #        ret = salesLine.validateModifyInventDim(inventDim,fieldNum(InventDim,InventStyleId));
                #    }
                #
                #    return ret;
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #write
          #public void write()
          #{
          #//  don't call super() as updating of InventDim is handled by the table holding the relation;
          #}
        ENDSOURCE
        SOURCE #initValue
          #void initValue()
          #{
          #    inventDim.data(InventDim::find(salesLine.InventDimId));
          #
          #    super();
          #}
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    int ret;
          #    List            dimFieldsList = InventDim::dimProductDimFieldList();
          #    ListEnumerator  enumerator = (dimFieldsList) ? dimFieldsList.getEnumerator() : null;
          #
          #    FormLookupButton formLookupButtonMode = (!salesLine.InventTransIdReturn || !salesLine.isStocked()) ? FormLookupButton::Hidden : FormLookupButton::Auto;
          #
          #    ret = super();
          #
          #    if (enumerator)
          #    {
          #        while (enumerator.moveNext())
          #        {
          #            this.object(enumerator.current()).allowEdit(salesLine.SalesQty == salesLine.RemainSalesPhysical && salesLine.InventTransIdReturn == #blank);
          #        }
          #    }
          #
          #    inventoryDimensions_inventSerialId.lookupButton(formLookupButtonMode);
          #    inventoryDimensions_inventBatchId.lookupButton(formLookupButtonMode);
          #    inventoryDimensionsGrid_inventSerialId.lookupButton(formLookupButtonMode);
          #    inventoryDimensionsGrid_inventBatchId.lookupButton(formLookupButtonMode);
          #
          #    return ret;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #SalesLineForeignTradeCategory
          Table               #SalesLineForeignTradeCategory
          AllowEdit           #No
          AllowCreate         #No
          JoinSource          #SalesLine
          LinkType            #OuterJoin
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #write
          #/// <summary>
          #/// Updates the <c>SalesLineForeignTradeCategory</c> record for a category based <c>SalesLine</c>.
          #/// </summary>
          #public void write()
          #{
          #    if (salesLine.RecId && salesLine.isCategoryBased())
          #    {
          #        super();
          #    }
          #}
          #
        ENDSOURCE
        SOURCE #create
          #public void create(boolean _append = false)
          #{
          #    if (salesLine.isCategoryBased())
          #    {
          #        super(_append);
          #    }
          #}
          #
        ENDSOURCE
        SOURCE #validateWrite
          #/// <summary>
          #/// Validates the <c>SalesLineForeignTradeCategory</c> record for a category based <c>SalesLine</c>.
          #/// </summary>
          #/// <returns>
          #///  true if the validation succeeds; otherwise, false.
          #/// </returns>
          #public boolean validateWrite()
          #{
          #    boolean ret = true;
          #
          #    if (salesLine.RecId && salesLine.isCategoryBased())
          #    {
          #        ret = super();
          #    }
          #
          #    return ret;
          #}
          #
        ENDSOURCE
        SOURCE #active
          #public int active()
          #{
          #    int     ret;
          #
          #    ret = super();
          #
          #    if (salesLine.isCategoryBased())
          #    {
          #        salesLineForeignTradeCategory_ds.allowEdit(salesTableForm.editLineAllowed());
          #    }
          #    else
          #    {
          #        salesLineForeignTradeCategory_ds.allowEdit(false);
          #    }
          #
          #    element.redraw();
          #
          #    return ret;
          #}
          #
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #SalesTable_RU
          Table               #SalesTable_RU
          Index               #SalesTable
          JoinSource          #SalesTable
          LinkType            #Passive
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #init
          #// <GEERU>
          #public void init()
          #{
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
          #    {
          #        this.linkType(FormLinkType::OuterJoin);
          #    }
          #
          #    super();
          #}
          #// </GEERU>
          #
        ENDSOURCE
        SOURCE #write
          #// <GEERU>
          #public void write()
          #{
          #    if (SysCountryRegionCode::isLegalEntityInCountryRegion([#isoRU]))
          #    {
          #        salesTable_RU.SalesTable = salesTable.RecId;
          #    }
          #
          #    super();
          #}
          #// </GEERU>
          #
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #SalesLine_IN
          Table               #SalesLine_IN
          JoinSource          #SalesLine
          LinkType            #Passive
          DelayActive         #No
          InsertAtEnd         #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #write
          #/// <summary>
          #/// Write on <c>SalesLine_IN</c> form datasource.
          #/// </summary>
          #// <GIN>
          #public void write()
          #{
          #    if (isSalesLine_INEnabled && salesLine_IN.SalesLine != 0)
          #    {
          #        // no-op because a record with an empty FK is not valid
          #        super();
          #    }
          #}
          #// </GIN>
        ENDSOURCE
        SOURCE #initValue
          #/// <summary>
          #/// Initialize the <c>SalesLine_IN</c> form datasource.
          #/// </summary>
          #// <GIN>
          #public void initValue()
          #{
          #    super();
          #
          #    if (isSalesLine_INEnabled)
          #    {
          #        salesLine_IN.TaxModelDocLineExtensionIN::init(salesLine.salesLineView_IN());
          #    }
          #}
          #// </GIN>
        ENDSOURCE
        SOURCE #init
          #/// <summary>
          #/// Initialize the <c>SalesLine_IN</c> form datasource.
          #/// </summary>
          #// <GIN>
          #public void init()
          #{
          #    if (isSalesLine_INEnabled)
          #    {
          #        this.linkType(FormLinkType::OuterJoin);
          #    }
          #    super();
          #}
          #// </GIN>
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #MCRReturnSalesTable
          Table               #MCRReturnSalesTable
          JoinSource          #SalesTable
          DelayActive         #No
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
          DATAFIELD AdvanceCredit
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #public void modified()
                #{
                #    super();
                #
                #    element.mcrSetHeaderControls();
                #    element.mcrSetLineControls();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
          DATAFIELD ApplyCreditToExchange
            PROPERTIES
            ENDPROPERTIES
            
            METHODS
              SOURCE #modified
                #/// <summary>
                #///     Sets controls when the user chooses to apply
                #///     the credit to the exchange order.
                #/// </summary>
                #public void modified()
                #{
                #    super();
                #
                #    element.mcrSetHeaderControls();
                #}
              ENDSOURCE
            ENDMETHODS
          ENDDATAFIELD
          
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #write
          #public void write()
          #{
          #    if (mcrReturnSalesTable.SalesTable)
          #    {
          #        // no-op because a record with an empty FK is not valid.
          #        super();
          #    }
          #}
        ENDSOURCE
        SOURCE #create
          #public void create(boolean _append = false)
          #{
          #    if (!mcrReturnSalesTable.RecId
          #        && !mcrReturnSalesTable.SalesTable)
          #    {
          #        super(_append);
          #    }
          #    else
          #    {
          #        salesLine_ds.create();
          #    }
          #}
        ENDSOURCE
        SOURCE #leaveRecord
          #public boolean leaveRecord(boolean _forceUpdate = false)
          #{
          #    boolean ret;
          #
          #    if(mcrReturnSalesTable.SalesTable)
          #    {
          #        ret = super(_forceUpdate);
          #    }
          #    else
          #    {
          #        ret = true;
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #MCRSalesLine
          Table               #MCRSalesLine
          AllowCheck          #No
          JoinSource          #SalesLine
          LinkType            #OuterJoin
          DelayActive         #No
          InsertAtEnd         #No
          InsertIfEmpty       #No
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
        SOURCE #leaveRecord
          #public boolean leaveRecord(boolean _forceUpdate = false)
          #{
          #    boolean ret;
          #
          #    if(mcrSalesLine.SalesLine)
          #    {
          #        ret = super(_forceUpdate);
          #    }
          #    else
          #    {
          #        ret = true;
          #    }
          #
          #    return ret;
          #}
        ENDSOURCE
        SOURCE #write
          #public void write()
          #{
          #    if (mcrSalesLine.SalesLine)
          #    {
          #        // no-op because a record with an empty FK is not valid.
          #        super();
          #    }
          #}
        ENDSOURCE
        SOURCE #create
          #public void create(boolean _append = false)
          #{
          #    if (!mcrSalesLine.RecId
          #        && !mcrSalesLine.SalesLine)
          #    {
          #        super(_append);
          #    }
          #    else
          #    {
          #        salesLine_ds.create();
          #    }
          #}
        ENDSOURCE
      ENDMETHODS
    ENDDATASOURCE
  ENDOBJECTBANK
  
  REFERENCEDATASOURCES
    DATASOURCE
      OBJECTPOOL
        PROPERTIES
          Name                #LogisticsPostalAddress
          Table               #LogisticsPostalAddress
          JoinSource          #SalesTable
          JoinRelation        #DeliveryPostalAddress_FK
        ENDPROPERTIES
        
        FIELDLIST
        ENDFIELDLIST
      ENDOBJECTPOOL
      METHODS
      ENDMETHODS
    ENDDATASOURCE
  ENDREFERENCEDATASOURCES
  
  JOINS
    SalesLine SalesTable
    InventDim SalesLine
    SalesLineForeignTradeCategory SalesLine
    SalesTable_RU SalesTable
    SalesLine_IN SalesLine
    MCRReturnSalesTable SalesTable
    MCRSalesLine SalesLine
    LogisticsPostalAddress SalesTable
  ENDJOINS
  
  PARTREFERENCES
    PARTREFERENCE #LatestReturnOrders
      PROPERTIES
        Name                #LatestReturnOrders
        MenuItemName        #SalesLatestReturnOrdersPart
        DataSource          #SalesTable
        DataSourceRelation  #EDT.SalesTable.CustAccount
        ElementPosition     #536870911
      ENDPROPERTIES
      
    ENDPARTREFERENCE
    
    PARTREFERENCE #LatestSalesOrders
      PROPERTIES
        Name                #LatestSalesOrders
        MenuItemName        #SalesLatestOrdersPart
        DataSource          #SalesTable
        DataSourceRelation  #EDT.SalesTable.CustAccount
        ElementPosition     #1073741822
      ENDPROPERTIES
      
    ENDPARTREFERENCE
    
    PARTREFERENCE #CustRelatedInfo
      PROPERTIES
        Name                #CustRelatedInfo
        MenuItemName        #CustRelatedInfo
        DataSource          #SalesTable
        IsLinked            #Yes
        ElementPosition     #1610612733
      ENDPROPERTIES
      
    ENDPARTREFERENCE
    
  ENDPARTREFERENCES
  
  DESIGN
    PROPERTIES
      Caption             #@SYS104918
      DataSource          #SalesTable
      Columns             #3
      ArrangeGuide        
        ARRAY INDEX Columns 
          #0
          #0
          #0
        ENDARRAY
      Style               #DetailsFormTransaction
    ENDPROPERTIES
    
    CONTAINER
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #ActionPaneLineGrid
          ElementPosition     #1073741822
          HierarchyParent     #LineViewLines
          Style               #Strip
          DataSource          #SalesLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANE
        PROPERTIES
          Name                #HeaderActionPane
          AutoDeclaration     #Yes
          VerticalSpacing     #0
          ElementPosition     #715827882
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #ActionPaneTab
          ElementPosition     #1431655764
          HierarchyParent     #ActionPaneLineGrid
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #General
          ElementPosition     #1610612733
          HierarchyParent     #HeaderActionPane
          Caption             #@SYS114913
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #Manage
          ElementPosition     #1879048189
          HierarchyParent     #HeaderActionPane
          Caption             #@SYS115306
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL ACTIONPANETAB
        PROPERTIES
          Name                #ReturnOrderTab
          ElementPosition     #1073741822
          HierarchyParent     #HeaderActionPane
          Caption             #@SYS105841
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #GroupAttachments
          AutoDeclaration     #Yes
          ElementPosition     #1968526673
          HierarchyParent     #ReturnOrderTab
          Caption             #@SYS316708
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #GroupCharges
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #ReturnOrderTab
          Caption             #@SYS114608
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #GroupJournals
          AutoDeclaration     #Yes
          ElementPosition     #1610612730
          HierarchyParent     #ReturnOrderTab
          Caption             #@SYS9020
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #GroupProcess
          AutoDeclaration     #Yes
          ElementPosition     #1431655760
          HierarchyParent     #ReturnOrderTab
          Caption             #@SYS318742
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #GroupRelatedInformation
          AutoDeclaration     #Yes
          ElementPosition     #1610612734
          HierarchyParent     #General
          Caption             #@SYS111665
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #GroupReturn
          AutoDeclaration     #Yes
          ElementPosition     #894784850
          HierarchyParent     #ReturnOrderTab
          Caption             #@SYS108715
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #GroupSend
          AutoDeclaration     #Yes
          ElementPosition     #1252698790
          HierarchyParent     #ReturnOrderTab
          Caption             #@SYS50570
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #IntercompanyTracing
          ConfigurationKey    #TradeInterCompany
          ElementPosition     #1073741822
          HierarchyParent     #General
          Caption             #@SYS121366
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #LineOverviewActionButtonGroup
          ElementPosition     #1610612733
          HierarchyParent     #ActionPaneTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #LineOverviewMainActionButtonGroup
          ElementPosition     #1073741822
          HierarchyParent     #ActionPaneTab
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ListGroup
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1789569700
          HierarchyParent     #ReturnOrderTab
          Caption             #@SYS118440
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #MaintainGroup
          ElementPosition     #536870910
          HierarchyParent     #ReturnOrderTab
          Caption             #@SYS316703
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ManageCreditCard
          ElementPosition     #1431655764
          HierarchyParent     #Manage
          Caption             #@ACC1423
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #NewGroup
          AutoDeclaration     #Yes
          ElementPosition     #357913940
          HierarchyParent     #ReturnOrderTab
          Caption             #@SYS2055
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTONGROUP
        PROPERTIES
          Name                #ShowGroup
          AutoDeclaration     #Yes
          ElementPosition     #715827880
          HierarchyParent     #ReturnOrderTab
          Caption             #@SYS317437
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #GridHeader
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612734
          HierarchyParent     #EditableGrid
          VisibleCols         #7
          VisibleRows         #9
          DataSource          #SalesTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GRID
        PROPERTIES
          Name                #SalesLineGrid
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612733
          HierarchyParent     #LineViewLines
          VisibleRows         #5
          DataSource          #SalesLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #AddressGroup1
          ElementPosition     #1073741822
          HierarchyParent     #TabHeaderAddress
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #AddressGroup2
          ElementPosition     #1610612733
          HierarchyParent     #TabHeaderAddress
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Administration
          ElementPosition     #858993458
          HierarchyParent     #TabHeaderSetup
          Caption             #@SYS9853
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Customer
          ElementPosition     #1288490187
          HierarchyParent     #LineViewHeader
          Caption             #@SYS80104
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #CustomerReturns_IN
          AutoDeclaration     #Yes
          CountryRegionCodes  #IN
          ElementPosition     #2013265915
          HierarchyParent     #TabLineGeneral
          Caption             #@SYS4004286
          DataSource          #SalesLine_IN
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #DateAndTime
          ElementPosition     #1717986916
          HierarchyParent     #TabHeaderSetup
          Caption             #@SYS112412
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #DeliveryAddress
          ElementPosition     #1610612733
          HierarchyParent     #AddressGroup1
          Style               #MarginlessContainer
          Columns             #3
          Columnspace         #4
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #EditableGrid
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #TabPageGrid
          FrameType           #None
          Style               #BorderlessGridContainer
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ExternalReference
          ElementPosition     #805306365
          HierarchyParent     #TabLineGeneral
          Caption             #@SYS21697
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Filter
          ElementPosition     #1073741822
          HierarchyParent     #EditableGrid
          FrameType           #Edged 3D
          Caption             #@SYS2163
          ArrangeMethod       #Horizontal, flush right
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeaderCustomerGroup
          ElementPosition     #920350134
          HierarchyParent     #TabHeaderGeneral
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeaderInfo
          Width               #Column width
          ElementPosition     #1073741822
          HierarchyParent     #TabPageDetails
          FrameType           #None
          Style               #DetailTitleContainer
          BottomMargin        #0
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeaderReturnOrderGroup
          ElementPosition     #613566756
          HierarchyParent     #TabHeaderGeneral
          Caption             #@SYS105841
          DataSource          #SalesTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #HeaderStorageDimensions
          ElementPosition     #1840700268
          HierarchyParent     #TabHeaderGeneral
          Caption             #@SYS333537
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #InterCompany
          ConfigurationKey    #TradeInterCompany
          ElementPosition     #1288490187
          HierarchyParent     #TabHeaderSetup
          FrameType           #None
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #InterCompanyAdmin
          ElementPosition     #1073741822
          HierarchyParent     #InterCompany
          DataSource          #SalesTable
          DataGroup           #IntercompanyAdmin
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #InventoryDimensionsGrid
          ElementPosition     #1252698790
          HierarchyParent     #SalesLineGrid
          BackgroundColor     #Window background
          DataSource          #InventDim
          DataGroup           #InventoryDimensions
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #InventProfile_RU
          ElementPosition     #572662304
          HierarchyParent     #TabHeaderSetup
          DataSource          #SalesTable_RU
          DataGroup           #InventProfile_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ItemReference
          AllowEdit           #No
          ElementPosition     #1789569705
          HierarchyParent     #TabLineDimension
          DataSource          #SalesLine
          DataGroup           #ItemReference
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #LineDateAndTime
          ElementPosition     #1879048185
          HierarchyParent     #TabLineGeneral
          Caption             #@SYS112412
          DataSource          #SalesLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #LineForeignTradeGroup
          ElementPosition     #1073741822
          HierarchyParent     #TabLineForeignTrade
          DataSource          #SalesLineForeignTradeCategory
          DataGroup           #ForeignTrade
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #LineMeasurementGroup
          ElementPosition     #1610612733
          HierarchyParent     #TabLineForeignTrade
          DataSource          #SalesLineForeignTradeCategory
          DataGroup           #Measurement
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Posting
          ElementPosition     #715827882
          HierarchyParent     #TabLineDimension
          DataSource          #SalesLine
          DataGroup           #Posting
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ProductDimensions
          ElementPosition     #715827882
          HierarchyParent     #TabLineDimension
          DataSource          #InventDim
          DataGroup           #ProductDimensions
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Return
          ElementPosition     #1610612730
          HierarchyParent     #TabLineGeneral
          Caption             #@SYS16512
          DataSource          #SalesLine
          DataGroup           #ReturnGroupRMA
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ReturnHeaderReplacement
          ElementPosition     #1533916890
          HierarchyParent     #TabHeaderGeneral
          DataSource          #SalesTable
          DataGroup           #ReturnReplacement
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ReturnOrder
          ElementPosition     #858993458
          HierarchyParent     #LineViewHeader
          Caption             #@SYS105841
          DataSource          #SalesTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #ReturnReplacement
          ElementPosition     #1717986916
          HierarchyParent     #LineViewHeader
          Caption             #@SYS84714
          DataSource          #SalesTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Sales
          ElementPosition     #536870910
          HierarchyParent     #TabLineGeneral
          Caption             #@SYS22920
          DataSource          #SalesLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #SalesLineIntercompany
          ElementPosition     #1342177275
          HierarchyParent     #TabLineGeneral
          DataSource          #SalesLine
          DataGroup           #Intercompany
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #Status
          ElementPosition     #1227133512
          HierarchyParent     #TabHeaderGeneral
          Caption             #@SYS25587
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #StatusGroup
          ElementPosition     #1073741820
          HierarchyParent     #TabLineGeneral
          Caption             #@SYS80127
          DataSource          #SalesLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #StorageDimensions
          ElementPosition     #1431655764
          HierarchyParent     #TabLineDimension
          Caption             #@SYS108783
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL GROUP
        PROPERTIES
          Name                #TrackingDimensions
          ElementPosition     #1073741823
          HierarchyParent     #TabLineDimension
          Caption             #@SYS317445
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #ButtonLineGridInventory
          AutoDeclaration     #Yes
          HelpText            #@SYS69645
          ElementPosition     #1288490187
          HierarchyParent     #LineOverviewActionButtonGroup
          Text                #@SYS981
          ButtonDisplay       #Text & Image left
          NormalImage         #10932
          ImageLocation       #EmbeddedResource
          SaveRecord          #No
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    SalesTableType menuSalesTableType = salesTable.type();
            #
            #    salesTableForm.enableLineInventoryButtons(salesLine, buttonLineGridInventTrans, buttonLineGridInventOnHand, buttonLineGridInventLot, buttonLineGridInventDimTracking);
            #
            #    buttonLineGridInventOnhandInterCompany.enabled(salesTableForm.allowEnableInterCompanyOnHandButton(salesLine));
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #GenerateLineGridMenuButton
          HelpText            #@SYS34835
          ElementPosition     #858993458
          HierarchyParent     #LineOverviewActionButtonGroup
          Text                #@SYS328600
          ButtonDisplay       #Text & Image left
          NormalImage         #11046
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUBUTTON
        PROPERTIES
          Name                #Update
          HelpText            #@SYS28285
          ElementPosition     #1717986916
          HierarchyParent     #LineOverviewActionButtonGroup
          Text                #@SYS58728
          ButtonDisplay       #Text & Image left
          NormalImage         #12545
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #SalesLine_SalesCategory
          ElementPosition     #858993458
          HierarchyParent     #Sales
          DataSource          #SalesLine
          ReferenceField      #SalesCategory
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #SalesLine_SalesCategoryGrid
          ElementPosition     #1828716542
          HierarchyParent     #SalesLineGrid
          DataSource          #SalesLine
          ReferenceField      #SalesCategory
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #SalesTable_DeliveryPostalAddress1
          ElementPosition     #858993458
          HierarchyParent     #DeliveryAddress
          DataSource          #SalesTable
          ReferenceField      #DeliveryPostalAddress
          ReplacementFieldGroup #LocationReference
          Label               #@SYS7924
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REFERENCEGROUP
        PROPERTIES
          Name                #SalesTable_WorkerSalesTaker
          ElementPosition     #858993458
          HierarchyParent     #Administration
          DataSource          #SalesTable
          ReferenceField      #WorkerSalesTaker
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #DetailsTab
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612733
          HierarchyParent     #TabPageDetails
          ShowTabs            #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #HeaderDetailsTab
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #HeaderView
          Style               #FastTabs
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #LineDetailsTab
          Width               #Column width
          ElementPosition     #1431655764
          HierarchyParent     #LineViewLineDetails
          Tabs                #5
          Style               #IndexTabs
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #LineViewTab
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #LineView
          Style               #FastTabs
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TAB
        PROPERTIES
          Name                #Tab
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          ShowTabs            #No
        ENDPROPERTIES
        
        METHODS
          SOURCE #tabChanged
            #public void tabChanged(int _fromTab, int _toTab)
            #{
            #    super(_fromTab, _toTab);
            #
            #    element.lock();
            #
            #    // Buttons to show in Grid View
            #    listGroup.visible(tabPageGrid.isActivePage());
            #    editDetailsButton.visible(tabPageGrid.isActivePage());
            #
            #    // Buttons to show in Details View
            #    showGroup.visible(!tabPageGrid.isActivePage());
            #    editRecordButton.visible(!tabPageGrid.isActivePage());
            #
            #    element.unLock();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #HeaderView
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612733
          HierarchyParent     #DetailsTab
          BackgroundColor     #Dyn Background blue
          TopMargin           #0
          BottomMargin        #0
          LeftMargin          #0
          RightMargin         #0
          Style               #DetailsFormDetails
          PanelStyle          #DetailsHeader
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #LineView
          Width               #Column width
          Height              #Column height
          ElementPosition     #1073741822
          HierarchyParent     #DetailsTab
          BackgroundColor     #Dyn Background blue
          TopMargin           #0
          BottomMargin        #0
          LeftMargin          #0
          RightMargin         #0
          Style               #DetailsFormDetails
          PanelStyle          #DetailsLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #LineViewHeader
          Width               #Column width
          ElementPosition     #954437176
          HierarchyParent     #LineViewTab
          Caption             #@SYS340851
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
          FastTabExpanded     #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #LineViewLineDetails
          Width               #Column width
          ElementPosition     #1789569705
          HierarchyParent     #LineViewTab
          Caption             #@SYS23823
          DataSource          #SalesLine
          TopMargin           #0
          BottomMargin        #0
          LeftMargin          #0
          RightMargin         #0
          FastTabExpanded     #No
          Scrollbars          #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #LineViewLines
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1431655764
          HierarchyParent     #LineViewTab
          BackgroundColor     #Window background
          Caption             #@SYS15451
          DataSource          #SalesLine
          FastTabExpanded     #Always
          PanelStyle          #DetailsLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabHeaderAddress
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #1717986916
          HierarchyParent     #HeaderDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS9362
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabHeaderGeneral
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #858993458
          HierarchyParent     #HeaderDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS2952
          DataSource          #SalesTable
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
          FastTabExpanded     #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #pageActivated
            #public void pageActivated()
            #{
            #    if (salesTable.ReturnReplacementId)
            #    {
            #        salesTable_ds.reread();
            #    }
            #
            #    super();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabHeaderSetup
          AutoDeclaration     #Yes
          Width               #Column width
          ElementPosition     #1288490187
          HierarchyParent     #HeaderDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS2186
          DataSource          #SalesTable
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabLineDimension
          AutoDeclaration     #Yes
          ElementPosition     #920350134
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS103105
          DataSource          #SalesLine
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabLineForeignTrade
          ElementPosition     #1227133512
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS27650
          Columns             #2
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabLineGeneral
          AutoDeclaration     #Yes
          ElementPosition     #613566756
          HierarchyParent     #LineDetailsTab
          BackgroundColor     #Window background
          Caption             #@SYS2952
          DataSource          #SalesLine
          Columns             #3
          ArrangeGuide        
            ARRAY INDEX Columns 
              #0
              #0
              #0
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageDetails
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1073741822
          HierarchyParent     #Tab
          BackgroundColor     #Dyn Background blue
          TopMargin           #0
          BottomMargin        #0
          LeftMargin          #0
          RightMargin         #0
          Style               #DetailsFormDetails
          PanelStyle          #Details
          ParentPage          #TabPageDetails
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL TABPAGE
        PROPERTIES
          Name                #TabPageGrid
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #1610612734
          HierarchyParent     #Tab
          BackgroundColor     #Dyn Background blue
          TopMargin           #0
          BottomMargin        #0
          LeftMargin          #0
          RightMargin         #0
          ViewEditMode        #Edit
          Style               #DetailsFormGrid
          PanelStyle          #Grid
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonInterCompanyOriginalSalesTable
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS94563
          ElementPosition     #1073741823
          HierarchyParent     #IntercompanyTracing
          Text                #@SYS120343
          ButtonDisplay       #Text & Image above
          NormalImage         #10664
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #
            #    TradeInterCompany::construct(salesTable,true).formRun(formStr(ReturnTable),element);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonInterCompanyPurchTable
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          HelpText            #@SYS94560
          ElementPosition     #1789569705
          HierarchyParent     #IntercompanyTracing
          Text                #@SYS75319
          ButtonDisplay       #Text & Image above
          NormalImage         #10603
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #
            #    TradeInterCompany::construct(salesTable).formRun(formStr(PurchTable),element);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ButtonInterCompanySalesTable
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS94562
          ElementPosition     #715827882
          HierarchyParent     #IntercompanyTracing
          Text                #@SYS342794
          ButtonDisplay       #Text & Image above
          NormalImage         #10604
          ImageLocation       #EmbeddedResource
          Big                 #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #
            #    TradeInterCompany::construct(salesTable.referencePurchTable()).formRun(formStr(ReturnTable),element);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #buttonReplacementOrder
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS105835
          ElementPosition     #1288490187
          HierarchyParent     #GroupRelatedInformation
          Text                #@SYS105911
          ButtonDisplay       #Text & Image above
          NormalImage         #12020
          ImageLocation       #EmbeddedResource
          Big                 #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #    salesTableForm.buttonReplacementOrder();
            #    element.MCRSetHeaderControls();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #CreateLink
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS305729
          ConfigurationKey    #TradeBlanketOrder
          ElementPosition     #1717986916
          HierarchyParent     #Update
          Text                #@SYS132301
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    if (salesTableForm.createLineAgreementLink(salesLine))
            #    {
            #        salesTable_ds.reread();
            #    }
            #    salesLine_ds.reread();
            #
            #    if (salesLine.MatchingAgreementLine != 0)
            #    {
            #        //Re-evaluate agreement line actions
            #        element.enableLineAgreementActions();
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #InterCompanyRemoveMarkingGrid
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS94561
          ConfigurationKey    #TradeInterCompany
          ElementPosition     #1561806288
          HierarchyParent     #ButtonLineGridInventory
          Text                #@SYS67038
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #
            #    TradeInterCompany::removeMarking(salesLine,element);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #MCRButtonComplete
          AutoDeclaration     #Yes
          HelpText            #@MCR23957
          ConfigurationKey    #MCRCallCenter
          ElementPosition     #1342177276
          HierarchyParent     #MaintainGroup
          Text                #@SYS77770
          ButtonDisplay       #Text & Image above
          NormalImage         #11030
          ImageLocation       #EmbeddedResource
          Big                 #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #/// <summary>
            #///     Calls the complete logic for the return.
            #/// </summary>
            #void clicked()
            #{
            #    element.mcrComplete();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #MCRButtonModify
          AutoDeclaration     #Yes
          HelpText            #@MCR22896
          ConfigurationKey    #MCRCallCenter
          ElementPosition     #1610612732
          HierarchyParent     #MaintainGroup
          Text                #@SYS71028
          ButtonDisplay       #Text & Image above
          NormalImage         #11030
          ImageLocation       #EmbeddedResource
          Big                 #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #/// <summary>
            #///     Allows the return to be opened so the user can modify it.
            #/// </summary>
            #void clicked()
            #{
            #    if (SalesTable.SalesStatus == SalesStatus::Backorder)
            #    {
            #        // Roll back the sales order status.
            #        SalesTable.mcrOpenSalesOrder();
            #
            #        salesTable_ds.active();
            #        element.mcrSetLineControls();
            #        SalesTable_ds.refresh();
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #MCROrderHolds
          AutoDeclaration     #Yes
          HelpText            #@MCR10900
          ElementPosition     #1789569705
          HierarchyParent     #GroupProcess
          Text                #@MCR10491
          ButtonDisplay       #Text & Image right
          NormalImage         #11153
          ImageLocation       #EmbeddedResource
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    // Displays a form to manage hold codes for the active sales order
            #    SalesTableForm::MCRPromptHoldOrder(SalesTable);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #RemoveLink
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS305731
          ConfigurationKey    #TradeBlanketOrder
          ElementPosition     #2004318069
          HierarchyParent     #Update
          Text                #@SYS67038
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    if (salesTableForm.removeLineAgreementLink(salesLine))
            #    {
            #        salesTable_ds.reread();
            #    }
            #    salesLine_ds.reread();
            #
            #    element.enableLineAgreementActions();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ReturnCancel
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS104951
          ElementPosition     #1879048188
          HierarchyParent     #MaintainGroup
          Text                #@SYS117673
          ButtonDisplay       #Text & Image above
          NormalImage         #10406
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #    salesTableForm.returnCancel();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL BUTTON
        PROPERTIES
          Name                #ReturnCreateReplacement
          AutoDeclaration     #Yes
          NeededPermission    #Create
          HelpText            #@SYS105835
          ElementPosition     #1288490187
          HierarchyParent     #NewGroup
          Text                #@SYS119221
          ButtonDisplay       #Text & Image above
          NormalImage         #11130
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    super();
            #    salesTableForm.returnCreateReplacement();
            #
            #    SalesLine_ds.executeQuery();
            #    element.mcrSetHeaderControls();
            #    MCRReturnSalesTable.data(SalesTable.mcrReturnSalesTable());
            #    MCRReturnSalesTable_ds.refresh();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #MCRReturnSalesTable_AdvanceCredit
          ElementPosition     #1840700268
          HierarchyParent     #ReturnReplacement
          DataSource          #MCRReturnSalesTable
          DataField           #AdvanceCredit
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #MCRReturnSalesTable_ApplyCreditToExchange
          ElementPosition     #1227133512
          HierarchyParent     #ReturnReplacement
          DataSource          #MCRReturnSalesTable
          DataField           #ApplyCreditToExchange
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #Return_ReturnAllowReservation
          AutoDeclaration     #Yes
          HelpText            #@SYS121714
          ElementPosition     #1789569705
          HierarchyParent     #Return
          DataSource          #SalesLine
          DataField           #ReturnAllowReservation
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #ReturnReplacement_ReturnReplacementCreated
          ElementPosition     #920350134
          HierarchyParent     #ReturnReplacement
          DataSource          #SalesTable
          DataField           #ReturnReplacementCreated
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #SalesTable_MCROrderStopped
          AutoDeclaration     #Yes
          ElementPosition     #1610612734
          HierarchyParent     #Status
          DataSource          #SalesTable
          DataField           #MCROrderStopped
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL CHECKBOX
        PROPERTIES
          Name                #SalesTable_MCROrderStoppedGrid
          AutoDeclaration     #Yes
          ElementPosition     #1644167163
          HierarchyParent     #GridHeader
          BackgroundColor     #Window background
          DataSource          #SalesTable
          DataField           #MCROrderStopped
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #filterRMAStatus
          AutoDeclaration     #Yes
          NeededPermission    #Create
          ElementPosition     #1073741822
          HierarchyParent     #Filter
          EnumType            #ReturnStatusFilter
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    if (filterRMAStatus.selection() == ReturnStatusFilter::All)
            #    {
            #        filterDate.dateValue(dateNull());
            #    }
            #
            #    element.setFilterAccess();
            #
            #    if (ret)
            #    {
            #        element.lock();
            #
            #        salesTable_ds.executeQuery();
            #        salesTable_ds.refresh();
            #
            #        element.unLock();
            #    }
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #MCRReturnSalesTable_AdvanceExchange
          ElementPosition     #1533916890
          HierarchyParent     #ReturnReplacement
          DataSource          #MCRReturnSalesTable
          DataField           #AdvanceExchange
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #ReturnStatus
          ElementPosition     #1073741822
          HierarchyParent     #Status
          DataSource          #SalesTable
          DataField           #ReturnStatus
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #SalesLine_ReturnStatus
          ElementPosition     #715827882
          HierarchyParent     #StatusGroup
          DataSource          #SalesLine
          DataField           #ReturnStatus
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #SalesLine_ReturnStatusGrid
          ElementPosition     #1968526673
          HierarchyParent     #SalesLineGrid
          DataSource          #SalesLine
          DataField           #ReturnStatus
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #SalesTable_ReturnStatus
          ElementPosition     #1879048188
          HierarchyParent     #GridHeader
          DataSource          #SalesTable
          DataField           #ReturnStatus
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMBOBOX
        PROPERTIES
          Name                #StatusInTitle
          Left                #Right edge
          Skip                #Yes
          ElementPosition     #1610612733
          HierarchyParent     #HeaderInfo
          ShowLabel           #No
          DataSource          #SalesTable
          DataField           #ReturnStatus
          ViewEditMode        #View
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #Attachments
          AutoDeclaration     #Yes
          NeededPermission    #Manual
          HelpText            #@SYS22624
          SecurityKey         #BasicMisc
          ElementPosition     #1431655764
          HierarchyParent     #GroupAttachments
          Text                #@SYS316708
          NormalImage         #10442
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Command             #2853
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #Delete
          AutoDeclaration     #Yes
          ElementPosition     #1073741820
          HierarchyParent     #MaintainGroup
          Text                #@SYS14425
          NormalImage         #10121
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          SaveRecord          #No
          MultiSelect         #Yes
          Primary             #Yes
          AutoRefreshData     #Yes
          NeedsRecord         #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #DeleteLineGridCmdButton
          ElementPosition     #1610612733
          HierarchyParent     #LineOverviewMainActionButtonGroup
          Text                #@SYS135131
          ButtonDisplay       #Text & Image left
          NormalImage         #11400
          ImageLocation       #EmbeddedResource
          SaveRecord          #No
          MultiSelect         #Yes
          NeedsRecord         #Yes
          Command             #2832
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #EditRecordButton
          AutoDeclaration     #Yes
          ElementPosition     #536870910
          HierarchyParent     #MaintainGroup
          Text                #@SYS317438
          ButtonDisplay       #Text & Image left
          NormalImage         #10040
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          Command             #4471
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #ExportToExcelButton
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #ListGroup
          NormalImage         #10156
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          NeedsRecord         #Yes
          Command             #4436
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #HeaderViewButton
          ElementPosition     #1073741822
          HierarchyParent     #ShowGroup
          NormalImage         #12133
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          Primary             #Yes
          Command             #1320
          ToggleButton        #Radio
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #LineAttachmentsLineStripAction
          ElementPosition     #1521134245
          HierarchyParent     #GenerateLineGridMenuButton
          Text                #@SYS114630
          ShowShortCut        #No
          NeedsRecord         #Yes
          Command             #2853
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #LineViewButton
          ElementPosition     #1610612733
          HierarchyParent     #ShowGroup
          NormalImage         #12134
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          Primary             #Yes
          Command             #1321
          ToggleButton        #Radio
          ToggleValue         #On
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #NewCmdButton
          HelpText            #@SYS127763
          ElementPosition     #858993458
          HierarchyParent     #NewGroup
          Text                #@SYS119222
          ButtonDisplay       #Text & Image above
          NormalImage         #12021
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MultiSelect         #Yes
          Big                 #Yes
          Primary             #Yes
          Command             #260
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #NewLineGridCmdButton
          ElementPosition     #1073741822
          HierarchyParent     #LineOverviewMainActionButtonGroup
          Text                #@SYS319116
          ButtonDisplay       #Text & Image left
          NormalImage         #10009
          ImageLocation       #EmbeddedResource
          MultiSelect         #Yes
          Command             #260
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL COMMANDBUTTON
        PROPERTIES
          Name                #RefreshButton
          HelpText            #@SYS315818
          ElementPosition     #1073741822
          HierarchyParent     #ListGroup
          NormalImage         #11437
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          Command             #2875
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #filterDate
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #Filter
          LookupButton        #Always
          Label               #@SYS4244
          ExtendedDataType    
            ARRAY 
              #ReturnClosedDate
              #
            ENDARRAY
        ENDPROPERTIES
        
        METHODS
          SOURCE #modified
            #public boolean modified()
            #{
            #    boolean ret;
            #
            #    ret = super();
            #
            #    if (ret)
            #    {
            #        element.lock();
            #
            #        salesTable_ds.executeQuery();
            #        salesTable_ds.refresh();
            #
            #        element.unLock();
            #    }
            #
            #    return ret;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #ReturnOrder_ReturnDeadline
          ElementPosition     #920350134
          HierarchyParent     #ReturnOrder
          DataSource          #SalesTable
          DataField           #ReturnDeadline
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #ReturnOrderHeaderReturnDeadline
          ElementPosition     #1073741820
          HierarchyParent     #HeaderReturnOrderGroup
          DataSource          #SalesTable
          DataField           #ReturnDeadline
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #SalesLine_ReturnArrivalDate
          ElementPosition     #1431655764
          HierarchyParent     #StatusGroup
          DataSource          #SalesLine
          DataField           #ReturnArrivalDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #SalesLine_ReturnClosedDate
          ElementPosition     #1789569705
          HierarchyParent     #StatusGroup
          DataSource          #SalesLine
          DataField           #ReturnClosedDate
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #SalesLine_ReturnDeadline
          ElementPosition     #1073741823
          HierarchyParent     #StatusGroup
          DataSource          #SalesLine
          DataField           #ReturnDeadline
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL DATEEDIT
        PROPERTIES
          Name                #SalesTable_ReturnDeadline
          ElementPosition     #1409286138
          HierarchyParent     #GridHeader
          DataSource          #SalesTable
          DataField           #ReturnDeadline
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonAcknowledgement
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #GroupSend
          Text                #@SYS96733
          ButtonDisplay       #Text & Image left
          NormalImage         #12022
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MenuItemType        #Output
          MenuItemName        #ReturnAcknowledgment_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonJournalInvoice
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #GroupJournals
          Text                #@SYS114667
          ButtonDisplay       #Text & Image left
          NormalImage         #10612
          ImageLocation       #EmbeddedResource
          DataSource          #SalesTable
          MenuItemName        #CustInvoiceJournal
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonLineGridInventDimTracking
          AutoDeclaration     #Yes
          ElementPosition     #1952257860
          HierarchyParent     #ButtonLineGridInventory
          Text                #@SYS5951
          DataSource          #SalesLine
          MenuItemName        #InventDimTracking
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonLineGridInventLot
          AutoDeclaration     #Yes
          ElementPosition     #780903144
          HierarchyParent     #ButtonLineGridInventory
          DataSource          #SalesLine
          MenuItemName        #InventLot
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonLineGridInventOnHand
          AutoDeclaration     #Yes
          ElementPosition     #585677358
          HierarchyParent     #ButtonLineGridInventory
          DataSource          #SalesLine
          MenuItemName        #InventOnhand
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonLineGridInventOnhandInterCompany
          AutoDeclaration     #Yes
          ElementPosition     #1366580502
          HierarchyParent     #ButtonLineGridInventory
          Text                #@SYS4118
          MenuItemName        #InventOnhandInterCompany
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonLineGridInventTrans
          AutoDeclaration     #Yes
          ElementPosition     #976128930
          HierarchyParent     #ButtonLineGridInventory
          DataSource          #SalesLine
          MenuItemName        #InventTrans
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonMarkupTransHeading
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #GroupCharges
          Text                #@SYS313570
          ButtonDisplay       #Text & Image above
          NormalImage         #10646
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemName        #MarkupTrans_HeadingSales
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonMarkupTransLineGrid
          AutoDeclaration     #Yes
          ElementPosition     #1252698790
          HierarchyParent     #GenerateLineGridMenuButton
          Text                #@SYS313570
          NeedsRecord         #Yes
          DataSource          #SalesLine
          MenuItemName        #MarkupTrans_LineSales
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonPackingSlipJournal
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #GroupJournals
          ButtonDisplay       #Text & Image left
          NormalImage         #10667
          ImageLocation       #EmbeddedResource
          MenuItemName        #CustPackingSlipJournal
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonPurchTable
          AutoDeclaration     #Yes
          ElementPosition     #1717986916
          HierarchyParent     #GroupRelatedInformation
          ButtonDisplay       #Text & Image above
          NormalImage         #10724
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          MenuItemName        #PurchTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonPurchTableThisCompany
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #IntercompanyTracing
          ButtonDisplay       #Text & Image above
          NormalImage         #10724
          ImageLocation       #EmbeddedResource
          MenuItemName        #PurchTable
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    TradeInterCompany::construct(salesTable).referenceForm();
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ButtonReturnOrder
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #GroupSend
          Text                #@SYS119222
          ButtonDisplay       #Text & Image left
          NormalImage         #12023
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          MenuItemType        #Output
          MenuItemName        #ReturnDocument_Action
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #buttonUpdatePackingSlip
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #GroupProcess
          ButtonDisplay       #Text & Image above
          NormalImage         #10665
          ImageLocation       #EmbeddedResource
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemType        #Action
          MenuItemName        #SalesFormLetter_PackingSlip
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CreditCardTable
          AutoDeclaration     #Yes
          ElementPosition     #1288490187
          HierarchyParent     #ManageCreditCard
          ButtonDisplay       #Text & Image left
          ShowShortCut        #No
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #CreditCardTableAdd
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #CreditCardTrans
          ElementPosition     #1717986916
          HierarchyParent     #ManageCreditCard
          Text                #@SYS1084
          DataSource          #SalesTable
          MenuItemName        #CreditCardTRans
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #DirPartyPostalAddressNew
          HelpText            #@SYS342027
          ElementPosition     #1717986916
          HierarchyParent     #DeliveryAddress
          Text                #@SYS111834
          ButtonDisplay       #Image only
          MenuItemName        #CustDirPartyPostalAddressNew
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #EditDetailsButton
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #805306365
          HierarchyParent     #MaintainGroup
          Text                #@SYS317438
          NormalImage         #10040
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          NeedsRecord         #Yes
          DataSource          #SalesTable
          OpenMode            #Edit
          CopyCallerQuery     #Yes
          FormViewOption      #Details
          MenuItemName        #ReturnTableForEdit
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #IntercompanyReferences
          AutoDeclaration     #Yes
          ElementPosition     #858993458
          HierarchyParent     #GroupRelatedInformation
          ButtonDisplay       #Text & Image above
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemName        #ReturnTableReferences
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #InventDimParmFixed
          AutoDeclaration     #Yes
          ElementPosition     #1879048188
          HierarchyParent     #GenerateLineGridMenuButton
          Text                #@SYS5951
          SaveRecord          #No
          MenuItemName        #InventDimParmFixed
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #InventTransRegister
          AutoDeclaration     #Yes
          ElementPosition     #1049880892
          HierarchyParent     #Update
          DataSource          #SalesLine
          MenuItemType        #Action
          MenuItemName        #TradeOrderLineRegister
        ENDPROPERTIES
        
        METHODS
          SOURCE #clicked
            #void clicked()
            #{
            #    ReturnExpectedRetQty localExpectedRetQty = salesLine.ExpectedRetQty;
            #
            #    super();
            #
            #    salesTable_ds.reread();
            #    salesTable_ds.refresh();
            #    salesTable_ds.selectionChanged();
            #
            #    // Researching salesLine_ds is necessary  if a new line was added during the registration process.
            #    //  - If expected return qty has changed the line in question was splitted.
            #    //  - If disposition action is of type ReturnToCust a copy of the original line with positive qty has been added.
            #    if (localExpectedRetQty != salesLine.ExpectedRetQty
            #        || ReturnDispositionCode::find(salesLine.ReturnDispositionCodeId).DispositionAction == DispositionAction::ReturnToCust)
            #    {
            #        salesLine_ds.research();
            #    }
            #    else
            #    {
            #        salesLine_ds.reread();
            #        salesLine_ds.refresh();
            #    }
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #LogisticsLocationSelect
          HelpText            #@SYS342026
          ElementPosition     #1288490187
          HierarchyParent     #DeliveryAddress
          ButtonDisplay       #Image only
          MenuItemName        #LogisticsLocationSelect
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #MCROrderEvent
          HelpText            #@MCR24521
          ElementPosition     #1932735281
          HierarchyParent     #GroupRelatedInformation
          NormalImage         #10067
          ImageLocation       #EmbeddedResource
          DataSource          #SalesTable
          MenuItemName        #MCROrderEventTable
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #PurchCreateFromSalesReturn
          AutoDeclaration     #Yes
          ElementPosition     #1717986916
          HierarchyParent     #NewGroup
          Big                 #Yes
          MenuItemType        #Action
          MenuItemName        #PurchCreateFromSalesReturn
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ReturnFindSalesOrder
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #GroupReturn
          NormalImage         #12010
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          DataSource          #SalesTable
          MenuItemName        #ReturnFindSalesOrder
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ReturnReplaceItemLineGrid
          AutoDeclaration     #Yes
          ElementPosition     #715827880
          HierarchyParent     #GenerateLineGridMenuButton
          DataSource          #SalesLine
          MenuItemName        #ReturnReplaceItem
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #ReturnTableCC
          AutoDeclaration     #Yes
          ElementPosition     #858993458
          HierarchyParent     #ManageCreditCard
          Text                #@ACC1514
          ButtonDisplay       #Text & Image above
          NormalImage         #12464
          ImageLocation       #EmbeddedResource
          ShowShortCut        #No
          Big                 #Yes
          Primary             #Yes
          DataSource          #SalesTable
          MenuItemName        #ReturnTableCC
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL MENUITEMBUTTON
        PROPERTIES
          Name                #SalesAgreementLine
          AutoDeclaration     #Yes
          ElementPosition     #1861152492
          HierarchyParent     #Update
          Text                #@SYS26568
          DataSource          #SalesLine
          MenuItemName        #SalesAgreementLine
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #pdsCWreturnedQty
          AllowEdit           #No
          ElementPosition     #1700091215
          HierarchyParent     #SalesLineGrid
          Label               #@PDS619
          DataSource          #SalesLine
          DataField           #PdsCWQty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #returnedQtyGrid
          AllowEdit           #No
          HelpText            #@SYS127574
          ElementPosition     #1789569700
          HierarchyParent     #SalesLineGrid
          Label               #@SYS103786
          DataSource          #SalesLine
          DataField           #SalesQty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #SalesLine_ExpectedRetQtyGrid
          AutoDeclaration     #Yes
          ElementPosition     #894784850
          HierarchyParent     #SalesLineGrid
          DataSource          #SalesLine
          DataField           #ExpectedRetQty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #SalesLine_LineAmountGrid
          ElementPosition     #1610612730
          HierarchyParent     #SalesLineGrid
          DataSource          #SalesLine
          DataField           #LineAmount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #SalesLine_PdsCWExpectedRetQty
          ElementPosition     #656175556
          HierarchyParent     #SalesLineGrid
          DataSource          #SalesLine
          DataField           #PdsCWExpectedRetQty
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL REALEDIT
        PROPERTIES
          Name                #SalesLine_SalesPriceGrid
          ElementPosition     #1431655760
          HierarchyParent     #SalesLineGrid
          ShowZero            #No
          DataSource          #SalesLine
          DataField           #SalesPrice
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEGMENTEDENTRY
        PROPERTIES
          Name                #Posting_LedgerDimension
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #Posting
          DataSource          #SalesLine
          ReferenceField      #LedgerDimension
        ENDPROPERTIES
        
        METHODS
          SOURCE #jumpRef
            #public void jumpRef()
            #{
            #    ledgerDefaultAccountController.jumpRef();
            #}
          ENDSOURCE
          SOURCE #loadAutoCompleteData
            #public void loadAutoCompleteData(LoadAutoCompleteDataEventArgs _e)
            #{
            #    ledgerDefaultAccountController.loadAutoCompleteData(_e);
            #    super(_e);
            #}
          ENDSOURCE
          SOURCE #loadSegments
            #public void loadSegments()
            #{
            #    super();
            #    ledgerDefaultAccountController.loadSegments();
            #}
          ENDSOURCE
          SOURCE #segmentValueChanged
            #public void segmentValueChanged(SegmentValueChangedEventArgs _e)
            #{
            #    super(_e);
            #    ledgerDefaultAccountController.segmentValueChanged(_e);
            #}
          ENDSOURCE
          SOURCE #validate
            #public boolean validate()
            #{
            #    boolean isValid;
            #
            #    isValid = super();
            #    isValid = ledgerDefaultAccountController.validate() && isValid;
            #
            #    return isValid;
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #ChargesSeparator
          ElementPosition     #1073741820
          HierarchyParent     #GenerateLineGridMenuButton
          Text                #@SYS114608
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #DisplaytSeparator
          ElementPosition     #1610612730
          HierarchyParent     #GenerateLineGridMenuButton
          Text                #@SYS53465
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #IntercompanySeparator
          ConfigurationKey    #TradeInterCompany
          ElementPosition     #1171354716
          HierarchyParent     #ButtonLineGridInventory
          Text                #@SYS316397
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripSalesLineAttachmensSeparator
          ElementPosition     #1431655760
          HierarchyParent     #GenerateLineGridMenuButton
          Text                #@SYS114630
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #LineStripUpdateAgreementSeparator
          ConfigurationKey    #TradeBlanketOrder
          ElementPosition     #1574821340
          HierarchyParent     #Update
          Text                #@SYS190135
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #SetupSeparator
          ElementPosition     #536870910
          HierarchyParent     #GenerateLineGridMenuButton
          Text                #@SYS128918
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #Trace_Separator
          Height              #100
          ElementPosition     #1757032074
          HierarchyParent     #ButtonLineGridInventory
          Text                #@SYS26038
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL SEPARATOR
        PROPERTIES
          Name                #ViewSeparator
          ElementPosition     #390451572
          HierarchyParent     #ButtonLineGridInventory
          Text                #@SYS316707
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #HeaderDeliveryAddress_DeliveryName
          ElementPosition     #1073741822
          HierarchyParent     #AddressGroup1
          MultiLine           #Yes
          DataSource          #SalesTable
          DataField           #DeliveryName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #HeaderInventoryDimensions_InventSiteId
          ElementPosition     #1073741822
          HierarchyParent     #HeaderStorageDimensions
          DataSource          #SalesTable
          DataField           #InventSiteId
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #HeaderInventoryDimInventLocationId
          ElementPosition     #1610612733
          HierarchyParent     #HeaderStorageDimensions
          DataSource          #SalesTable
          DataField           #InventLocationId
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #HeaderTitle
          AutoDeclaration     #Yes
          Width               #Column width
          Skip                #Yes
          AlignControl        #No
          ElementPosition     #1073741822
          HierarchyParent     #HeaderInfo
          Border              #None
          ColorScheme         #Windows palette
          ForegroundColor     #Dyn Title green
          FontSize            #11
          ShowLabel           #No
          ViewEditMode        #View
          Style               #TitleField
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #interCompanyAllowIndirectCreationOrig
          AutoDeclaration     #Yes
          AllowEdit           #No
          AlignControl        #No
          ElementPosition     #1610612733
          HierarchyParent     #InterCompany
          MultiLine           #Yes
          ShowLabel           #No
          DataSource          #SalesTable
          DataMethod          #interCompanyAllowIndirectCreationTxt
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_configId
          ElementPosition     #858993458
          HierarchyParent     #ProductDimensions
          DataSource          #InventDim
          DataField           #configId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_inventBatchId
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #TrackingDimensions
          DataSource          #InventDim
          DataField           #inventBatchId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_InventColorId
          ElementPosition     #1717986916
          HierarchyParent     #ProductDimensions
          DataSource          #InventDim
          DataField           #InventColorId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_InventGtdId_RU
          ElementPosition     #1879048190
          HierarchyParent     #TrackingDimensions
          DataSource          #InventDim
          DataField           #InventGtdId_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_InventLocationId
          ElementPosition     #1073741823
          HierarchyParent     #StorageDimensions
          DataSource          #InventDim
          DataField           #InventLocationId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_InventProfileId_RU
          ElementPosition     #2080374782
          HierarchyParent     #StorageDimensions
          DataSource          #InventDim
          DataField           #InventProfileId_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_inventSerialId
          AutoDeclaration     #Yes
          ElementPosition     #1610612733
          HierarchyParent     #TrackingDimensions
          DataSource          #InventDim
          DataField           #inventSerialId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_InventSiteId
          ElementPosition     #715827882
          HierarchyParent     #StorageDimensions
          DataSource          #InventDim
          DataField           #InventSiteId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_InventSizeId
          ElementPosition     #1288490187
          HierarchyParent     #ProductDimensions
          DataSource          #InventDim
          DataField           #InventSizeId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_wMSLocationId
          ElementPosition     #1431655764
          HierarchyParent     #StorageDimensions
          DataSource          #InventDim
          DataField           #wMSLocationId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensions_wMSPalletId
          ElementPosition     #1789569705
          HierarchyParent     #StorageDimensions
          DataSource          #InventDim
          DataField           #wMSPalletId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensionsGrid_configId
          ElementPosition     #1023410173
          HierarchyParent     #InventoryDimensionsGrid
          DataSource          #InventDim
          DataField           #configId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensionsGrid_inventBatchId
          AutoDeclaration     #Yes
          ElementPosition     #1366580502
          HierarchyParent     #InventoryDimensionsGrid
          DataSource          #InventDim
          DataField           #inventBatchId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensionsGrid_InventColorId
          ElementPosition     #1459617789
          HierarchyParent     #InventoryDimensionsGrid
          DataSource          #InventDim
          DataField           #InventColorId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensionsGrid_InventGtdId_RU
          ElementPosition     #536870910
          HierarchyParent     #InventoryDimensionsGrid
          DataSource          #InventDim
          DataField           #InventGtdId_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensionsGrid_InventLocationId
          ElementPosition     #1895825405
          HierarchyParent     #InventoryDimensionsGrid
          DataSource          #InventDim
          DataField           #InventLocationId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensionsGrid_InventOwnerId_RU
          ElementPosition     #914358269
          HierarchyParent     #InventoryDimensionsGrid
          DataSource          #InventDim
          DataField           #InventOwnerId_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensionsGrid_InventProfileId_RU
          ElementPosition     #805306365
          HierarchyParent     #InventoryDimensionsGrid
          DataSource          #InventDim
          DataField           #InventProfileId_RU
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensionsGrid_inventSerialId
          AutoDeclaration     #Yes
          ElementPosition     #1952257860
          HierarchyParent     #InventoryDimensionsGrid
          DataSource          #InventDim
          DataField           #inventSerialId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensionsGrid_InventSiteId
          ElementPosition     #1677721597
          HierarchyParent     #InventoryDimensionsGrid
          DataSource          #InventDim
          DataField           #InventSiteId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensionsGrid_InventSizeId
          ElementPosition     #1241513981
          HierarchyParent     #InventoryDimensionsGrid
          DataSource          #InventDim
          DataField           #InventSizeId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensionsGrid_InventStatusId
          ElementPosition     #2066563234
          HierarchyParent     #InventoryDimensionsGrid
          DataSource          #InventDim
          DataField           #InventStatusId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensionsGrid_InventStyleId
          ElementPosition     #1568669693
          HierarchyParent     #InventoryDimensionsGrid
          DataSource          #InventDim
          DataField           #InventStyleId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensionsGrid_LicensePlateId
          ElementPosition     #2009410547
          HierarchyParent     #InventoryDimensionsGrid
          DataSource          #InventDim
          DataField           #LicensePlateId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensionsGrid_wMSLocationId
          ElementPosition     #2123715923
          HierarchyParent     #InventoryDimensionsGrid
          DataSource          #InventDim
          DataField           #wMSLocationId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #InventoryDimensionsGrid_wMSPalletId
          ElementPosition     #2133502632
          HierarchyParent     #InventoryDimensionsGrid
          DataSource          #InventDim
          DataField           #wMSPalletId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ItemName
          AllowEdit           #No
          Skip                #Yes
          ElementPosition     #1288490187
          HierarchyParent     #Sales
          DataSource          #SalesLine
          DataMethod          #ItemName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ItemNameGrid
          AllowEdit           #No
          Skip                #Yes
          ElementPosition     #536870910
          HierarchyParent     #SalesLineGrid
          DataSource          #SalesLine
          DataMethod          #ItemName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #LogisticsPostalAddress_Address1
          ElementPosition     #1073741822
          HierarchyParent     #AddressGroup2
          DataSource          #LogisticsPostalAddress
          DataField           #Address
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #Return_ReturnDispositionCodeId
          AutoDeclaration     #Yes
          ElementPosition     #1431655764
          HierarchyParent     #Return
          DataSource          #SalesLine
          DataField           #ReturnDispositionCodeId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReturnOrder_ContactPersonId
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1610612733
          HierarchyParent     #Customer
          DataSource          #SalesTable
          DataField           #ContactPersonId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReturnOrder_CustAccount
          ElementPosition     #536870910
          HierarchyParent     #HeaderCustomerGroup
          DataSource          #SalesTable
          DataField           #CustAccount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReturnOrder_CustomerRef
          ElementPosition     #1533916890
          HierarchyParent     #ReturnOrder
          DataSource          #SalesTable
          DataField           #CustomerRef
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReturnOrder_InvoiceAccount
          ElementPosition     #1073741820
          HierarchyParent     #HeaderCustomerGroup
          DataSource          #SalesTable
          DataField           #InvoiceAccount
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReturnOrder_M_CustomerName
          ElementPosition     #805306365
          HierarchyParent     #HeaderCustomerGroup
          DataSource          #SalesTable
          DataMethod          #customerName
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReturnOrder_M_editContactPersonName
          AutoDeclaration     #Yes
          ElementPosition     #1073741822
          HierarchyParent     #Customer
          LookupButton        #Always
          DataSource          #SalesTable
          DataMethod          #editContactPersonName
          PresenceDataSource  #SalesTable
          PresenceDataField   #ContactPersonId
        ENDPROPERTIES
        
        METHODS
          SOURCE #jumpRef
            #public void jumpRef()
            #{
            #    returnOrder_ContactPersonId.jumpRef();
            #}
          ENDSOURCE
          SOURCE #lookup
            #void lookup()
            #{
            #    ContactPerson::lookupCustContactPerson(returnOrder_ContactPersonId,
            #                                           salesTable.CustAccount,
            #                                           returnOrder_M_editContactPersonName,
            #                                           salesTable.ContactPersonId);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReturnOrder_ReturnReasonCodeId
          ElementPosition     #613566756
          HierarchyParent     #ReturnOrder
          DataSource          #SalesTable
          DataField           #ReturnReasonCodeId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReturnOrder_SalesId
          ElementPosition     #1227133512
          HierarchyParent     #ReturnOrder
          DataSource          #SalesTable
          DataField           #SalesId
          FastTabSummary      #No
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReturnOrderHeaderContactPersonId
          AutoDeclaration     #Yes
          Visible             #No
          ElementPosition     #1610612730
          HierarchyParent     #HeaderCustomerGroup
          DataSource          #SalesTable
          DataField           #ContactPersonId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReturnOrderHeaderCustomerRef
          ElementPosition     #1879048185
          HierarchyParent     #HeaderReturnOrderGroup
          DataSource          #SalesTable
          DataField           #CustomerRef
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReturnOrderHeaderMeditContactPersonName
          AutoDeclaration     #Yes
          ElementPosition     #1342177275
          HierarchyParent     #HeaderCustomerGroup
          LookupButton        #Always
          DataSource          #SalesTable
          DataMethod          #editContactPersonName
          PresenceDataSource  #SalesTable
          PresenceDataField   #ContactPersonId
        ENDPROPERTIES
        
        METHODS
          SOURCE #jumpRef
            #public void jumpRef()
            #{
            #    returnOrderHeaderContactPersonId.jumpRef();
            #}
          ENDSOURCE
          SOURCE #lookup
            #void lookup()
            #{
            #    ContactPerson::lookupCustContactPerson(returnOrderHeaderContactPersonId,
            #                                           salesTable.CustAccount,
            #                                           returnOrderHeaderMeditContactPersonName,
            #                                           salesTable.ContactPersonId);
            #}
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReturnOrderHeaderPurchOrderFormNum
          ElementPosition     #1687308579
          HierarchyParent     #HeaderReturnOrderGroup
          DataSource          #SalesTable
          DataField           #PurchOrderFormNum
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReturnOrderHeaderReturnItemNum
          ElementPosition     #536870910
          HierarchyParent     #HeaderReturnOrderGroup
          DataSource          #SalesTable
          DataField           #ReturnItemNum
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReturnOrderHeaderReturnReasonCodeId
          ElementPosition     #805306365
          HierarchyParent     #HeaderReturnOrderGroup
          DataSource          #SalesTable
          DataField           #ReturnReasonCodeId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReturnOrderHeaderSalesId
          ElementPosition     #1476395002
          HierarchyParent     #HeaderReturnOrderGroup
          DataSource          #SalesTable
          DataField           #SalesId
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #ReturnReplacement_ReturnReplacementId
          ElementPosition     #613566756
          HierarchyParent     #ReturnReplacement
          DataSource          #SalesTable
          DataField           #ReturnReplacementId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesLine_ExternalItemId
          Width               #Column width
          ElementPosition     #1431655764
          HierarchyParent     #ExternalReference
          DataSource          #SalesLine
          DataField           #ExternalItemId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesLine_IN_ReturnReasonCodeId
          CountryRegionCodes  #IN
          ElementPosition     #1431655764
          HierarchyParent     #CustomerReturns_IN
          DataSource          #SalesLine_IN
          DataField           #ReturnReasonCodeId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesLine_InventTransIdReturn
          AllowEdit           #No
          ElementPosition     #715827882
          HierarchyParent     #Return
          DataSource          #SalesLine
          DataField           #InventTransIdReturn
        ENDPROPERTIES
        
        METHODS
          SOURCE #toolTip
            #public str toolTip()
            #{
            #    str ret;
            #    if (salesLine.InventTransIdReturn)
            #    {
            #        ret = "@SYS319201" + ": " + "@SYS80119" + ", ";
            #        ret = ret + SalesLine::findInventTransId(salesLine.InventTransIdReturn).SalesId;
            #    }
            #
            #    return ret;
            #}
            #
          ENDSOURCE
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesLine_ItemIdGrid
          AutoDeclaration     #Yes
          ElementPosition     #357913940
          HierarchyParent     #SalesLineGrid
          DataSource          #SalesLine
          DataField           #ItemId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesLine_Name
          ElementPosition     #1717986916
          HierarchyParent     #Sales
          MultiLine           #Yes
          DataSource          #SalesLine
          DataField           #Name
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesLine_PdsCWSalesUnit
          ElementPosition     #775480202
          HierarchyParent     #SalesLineGrid
          DataSource          #SalesLine
          DataMethod          #pdsCWUnitId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesLine_SalesUnitGrid
          ElementPosition     #1073741820
          HierarchyParent     #SalesLineGrid
          DataSource          #SalesLine
          DataField           #SalesUnit
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesTable_CurrencyCode
          ElementPosition     #1717986916
          HierarchyParent     #Administration
          DataSource          #SalesTable
          DataField           #CurrencyCode
          FastTabSummary      #Yes
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesTable_CustAccountAdv
          AutoDeclaration     #Yes
          ElementPosition     #704643069
          HierarchyParent     #GridHeader
          DataSource          #SalesTable
          DataField           #CustAccount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesTable_Email
          ElementPosition     #1879048188
          HierarchyParent     #HeaderCustomerGroup
          DataSource          #SalesTable
          DataField           #Email
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesTable_InvoiceAccountAdv
          AutoDeclaration     #Yes
          ElementPosition     #939524092
          HierarchyParent     #GridHeader
          DataSource          #SalesTable
          DataField           #InvoiceAccount
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesTable_LanguageId
          ElementPosition     #1288490187
          HierarchyParent     #Administration
          DataSource          #SalesTable
          DataField           #LanguageId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesTable_ReturnItemNum
          AutoDeclaration     #Yes
          ElementPosition     #469762046
          HierarchyParent     #GridHeader
          DataSource          #SalesTable
          DataField           #ReturnItemNum
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesTable_ReturnReasonCodeId
          ElementPosition     #1174405115
          HierarchyParent     #GridHeader
          DataSource          #SalesTable
          DataField           #ReturnReasonCodeId
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL STRINGEDIT
        PROPERTIES
          Name                #SalesTable_ShipCarrierDeliveryContact
          ElementPosition     #1610612733
          HierarchyParent     #AddressGroup2
          DataSource          #SalesTable
          DataField           #ShipCarrierDeliveryContact
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL UTCDATETIMEEDIT
        PROPERTIES
          Name                #SalesLine_CreatedDateTime
          AllowEdit           #No
          Skip                #Yes
          HelpText            #@SYS69504
          ElementPosition     #1431655764
          HierarchyParent     #LineDateAndTime
          DataSource          #SalesLine
          DataField           #createdDateTime
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL UTCDATETIMEEDIT
        PROPERTIES
          Name                #SalesTable_createdDateTime
          ElementPosition     #1431655764
          HierarchyParent     #DateAndTime
          DataSource          #SalesTable
          DataField           #createdDateTime
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL WINDOW
        PROPERTIES
          Name                #MCROnHoldIcon
          AutoDeclaration     #Yes
          Width               #Column width
          Height              #Column height
          ElementPosition     #2096061810
          HierarchyParent     #GridHeader
          Imagemode           #Center
          Label               #@MCR20463
          DataSource          #SalesTable
          DataMethod          #MCRDisplayOnHold
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
      CONTROL WINDOW
        PROPERTIES
          Name                #MCRPriceMatched
          AutoDeclaration     #Yes
          Height              #1
          ConfigurationKey    #MCRCallCenter
          ElementPosition     #1342177275
          HierarchyParent     #SalesLineGrid
          Label               #@MCR25762
          DataSource          #SalesLine
          DataMethod          #showpricematchicon
        ENDPROPERTIES
        
        METHODS
        ENDMETHODS
      ENDCONTROL 
      
    ENDCONTAINER
    
  ENDDESIGN
  
  PERMISSIONS #Permissions
    PROPERTIES
    ENDPROPERTIES
    
    PERMISSIONSET #Read
      PROPERTIES
      ENDPROPERTIES
      
      FORM #Controls
        CONTROL #Attachments
          PROPERTIES
            Control             #Attachments
            EffectiveAccess     #Read
          ENDPROPERTIES
          
        ENDCONTROL
        
    ENDFORM
    
  TABLES #Tables
  ENDTABLES
  
SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
  ASSOCIATEDFORM #EcoResCategorySingleLookup
    PROPERTIES
      Form                #EcoResCategorySingleLookup
      AccessLevel         #Read
      SystemManaged       #No
      ManagedBy           #Manual
    ENDPROPERTIES
    
  ENDASSOCIATEDFORM
  
ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Update
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
    CONTROL #Attachments
      PROPERTIES
        Control             #Attachments
        EffectiveAccess     #Read
      ENDPROPERTIES
      
    ENDCONTROL
    
ENDFORM

TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
  ASSOCIATEDFORM #EcoResCategorySingleLookup
    PROPERTIES
      Form                #EcoResCategorySingleLookup
      AccessLevel         #Read
      SystemManaged       #No
      ManagedBy           #Manual
    ENDPROPERTIES
    
  ENDASSOCIATEDFORM
  
ASSOCIATEDFORM #InventOnhandCheckReserve
  PROPERTIES
    Form                #InventOnhandCheckReserve
    AccessLevel         #Delete
    SystemManaged       #No
    ManagedBy           #CodeAnalysis
  ENDPROPERTIES
  
ENDASSOCIATEDFORM

ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Create
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
    CONTROL #Attachments
      PROPERTIES
        Control             #Attachments
        EffectiveAccess     #Read
      ENDPROPERTIES
      
    ENDCONTROL
    
ENDFORM

TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
  ASSOCIATEDFORM #EcoResCategorySingleLookup
    PROPERTIES
      Form                #EcoResCategorySingleLookup
      AccessLevel         #Read
      SystemManaged       #No
      ManagedBy           #Manual
    ENDPROPERTIES
    
  ENDASSOCIATEDFORM
  
ASSOCIATEDFORM #InventOnhandCheckReserve
  PROPERTIES
    Form                #InventOnhandCheckReserve
    AccessLevel         #Delete
    SystemManaged       #No
    ManagedBy           #CodeAnalysis
  ENDPROPERTIES
  
ENDASSOCIATEDFORM

ASSOCIATEDFORM #SalesCreateOrder
  PROPERTIES
    Form                #SalesCreateOrder
    AccessLevel         #Delete
    SystemManaged       #No
    ManagedBy           #Manual
  ENDPROPERTIES
  
ENDASSOCIATEDFORM

ENDASSOCIATEDFORMS

ENDPERMISSIONSET

PERMISSIONSET #Delete
  PROPERTIES
  ENDPROPERTIES
  
  FORM #Controls
    CONTROL #Attachments
      PROPERTIES
        Control             #Attachments
        EffectiveAccess     #Read
      ENDPROPERTIES
      
    ENDCONTROL
    
ENDFORM

TABLES #Tables
ENDTABLES

SERVERMETHODS #Server Methods
ENDSERVERMETHODS

ASSOCIATEDFORMS #Associated Forms
  ASSOCIATEDFORM #EcoResCategorySingleLookup
    PROPERTIES
      Form                #EcoResCategorySingleLookup
      AccessLevel         #Read
      SystemManaged       #No
      ManagedBy           #Manual
    ENDPROPERTIES
    
  ENDASSOCIATEDFORM
  
ASSOCIATEDFORM #InventOnhandCheckReserve
  PROPERTIES
    Form                #InventOnhandCheckReserve
    AccessLevel         #Delete
    SystemManaged       #No
    ManagedBy           #CodeAnalysis
  ENDPROPERTIES
  
ENDASSOCIATEDFORM

ASSOCIATEDFORM #SalesCreateOrder
  PROPERTIES
    Form                #SalesCreateOrder
    AccessLevel         #Delete
    SystemManaged       #No
    ManagedBy           #Manual
  ENDPROPERTIES
  
ENDASSOCIATEDFORM

ENDASSOCIATEDFORMS

ENDPERMISSIONSET

ENDPERMISSIONS

ENDFORM


***Element: END
